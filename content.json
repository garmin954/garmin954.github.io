{"pages":[{"title":"tags","text":"","link":"/tags/index.html"},{"title":"categorys","text":"","link":"/categorys/index.html"}],"posts":[{"title":"HEXO+ICARUSä¸»é¢˜é…ç½®å®‰è£…","text":"1 å‰è¨€æ›¾ç»æŠ˜è…¾è¿‡Hexo+Nextä¸»é¢˜ï¼Œä½†æ˜¯å¾ˆé•¿æ—¶é—´éƒ½æ²¡æœ‰æ–‡ç« äº§å‡ºï¼Œå› ä¸ºä¹ æƒ¯äº†ä½¿ç”¨å°è±¡ç¬”è®°è®°å½•ä¸œè¥¿ï¼Œç°åœ¨æƒ³ç€æ¢ä¸ªä¸»é¢˜ï¼Œé‡æ–°å¼€å§‹ã€‚ 2 å®‰è£…Gitå’ŒNode.JS 2.1ä¸‹è½½Gitå’ŒNode.jsGitï¼š https://git-scm.com/download/win/Node.jsï¼šhttps://nodejs.org/zh-cn/download/ å®‰è£…å…¨éƒ¨é»˜è®¤è®¾ç½®ï¼Œä¸€è·¯Nextå³å¯ã€‚ 3 å®‰è£…Hexo 3.1ä¸‹è½½Hexoåˆ›å»ºå¥½ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼ˆä¸è¦åœ¨æ¡Œé¢ï¼‰ï¼Œå³é”®ç‚¹å‡»Git Bash Here,è¾“å…¥ä»¥ä¸‹å‘½ä»¤npm install -g hexo-cli è¿™ä¸ªè¿‡ç¨‹æ²¡æœ‰æç¤ºåé¦ˆï¼Œç­‰å¾…å³å¯ï¼Œå¤§çº¦1-2åˆ†é’Ÿå³å¯ï¼Œå¦‚æœå¤ªä¹…æ²¡æœ‰ååº”ï¼Œã€Ctrl+Cã€‘åœæ­¢ä¸‹è½½ï¼Œå¯ä»¥å°†npmçš„æºæ›´æ”¹ä¸ºæ·˜å®é•œåƒï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼Œå†å°è¯•ä¸‹è½½Hexo 12npm config set registry &quot;https://registry.npm.taobao.org/&quot;npm config set electron_mirror &quot;https://npm.taobao.org/mirrors/electron/&quot; ä¸‹è½½å®Œæˆååˆå§‹åŒ–Hexohexo initå®Œæˆååœ¨åˆå§‹åŒ–çš„è·¯å¾„ä¸‹ä¼šæœ‰å¦‚ä¸‹æ–‡ä»¶å¤¹ï¼Œåé¢æ ‡æ³¨å¯¹åº”ä½œç”¨ 3.2è¿è¡ŒHexoä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç”Ÿæˆåšå®¢å¹¶å¯åŠ¨æœ¬åœ°æµè§ˆ 12hexo ghexo s æ‰“å¼€ http://localhost:4000 æµè§ˆï¼Œæ³¨æ„å¤åˆ¶é“¾æ¥æ—¶ä¸è¦ä½¿ç”¨ã€Ctrl+Cã€‘ï¼Œå› ä¸ºè¿™ä¼šåœæ­¢æœ¬åœ°æµè§ˆæœåŠ¡ 3.3é…ç½®Hexoæ‰“å¼€_config.ymlï¼Œä¸€èˆ¬éœ€è¦é…ç½®ä»¥ä¸‹å‚æ•° 123456789101112131415title: #ç½‘ç«™æ ‡é¢˜author: #ä½œè€…language: #è¯­è¨€ï¼ˆè‹±è¯­enï¼Œä¸­æ–‡zh-CNï¼‰url: #ç½‘ç«™urlï¼ˆåŸŸåï¼‰permalink: #æ–‡ç« é“¾æ¥ï¼ˆä¾‹article/:urlname.htmlï¼‰# Extensionstheme: #ä¸»é¢˜# Deploymentdeploy: type: repo: #ä»“åº“SSHåœ°å€ branch: permalinkè®¾ç½®å°½é‡çŸ­ä¸€äº›ä¸å«ä¸­æ–‡ï¼Œå¹¶ä¸”å¯ä»¥è®¾ç½®ä¸€ä¸ªurlnameå‚æ•°åŠ htmlåç¼€ï¼Œæ–¹ä¾¿ä»¥ååœ¨æ–‡ç« å¤´éƒ¨è®¾ç½®è¯¥å±æ€§ï¼Œå®ç°è‡ªå®šä¹‰æ–‡ç« çš„url 3.4ä¸‹è½½ä¸»é¢˜è¿™é‡Œä½¿ç”¨çš„icarusä¸»é¢˜https://github.com/ppoffice/hexo-theme-icarusæ ¹æ®è¯´æ˜é¡µï¼Œä½¿ç”¨å‘½ä»¤ä¸‹è½½ git clone https://github.com/ppoffice/hexo-theme-icarus.git themes/icarusæˆ–ç›´æ¥ä¸‹è½½ZIPåŒ… å°†ä¸‹è½½çš„æ–‡ä»¶è§£å‹ï¼Œå¤åˆ¶åˆ°/theme/ä¸­,ä¸»é¢˜æ–‡ä»¶å¤¹è¿‡é•¿å¯ä»¥é‡å‘½åä¸ºicarusï¼Œç„¶åä¿®æ”¹Hexoé…ç½®æ–‡ä»¶_config.ymlä¸­çš„themeså‚æ•° theme: icarus #ä¸»é¢˜é‡æ–°ä½¿ç”¨å‘½ä»¤å³å¯æœ¬åœ°é¢„è§ˆæ•ˆæœ 12hexo ghexo s å…¶ä»–ä¸»é¢˜å¯ä»¥åœ¨GitHubä¸Šæœç´¢hexo-theme https://github.com/search?q=hexo-theme 4 é…ç½®GitHub 4.1åˆ›å»ºä»“åº“ç™»å½•GitHubè´¦å·åï¼Œæ‰“å¼€ https://github.com/newé¡µé¢åˆ›å»ºä»“åº“ï¼Œå‚æ•°é»˜è®¤å³å¯ï¼Œ`æ³¨æ„ä»“åº“åç§°ä¸€å®šè¦ç¬¦åˆ ç”¨æˆ·å.github.io çš„æ ¼å¼ 4.2åˆ›å»ºSSH keyè¾“å…¥å‘½ä»¤ï¼ˆæ³¨æ„æœ‰å¼•å·ï¼‰ï¼Œæ•²ä¸‰ä¸‹å›è½¦å³å¯ ssh-keygen -t rsa -C &quot;é‚®ç®±åœ°å€&quot;ä¹‹ååœ¨ç”µè„‘ç”¨æˆ·ç›®å½•å¦‚ C:\\Users\\Millet.sshä¸‹ç”Ÿæˆäº†id_rsaå’Œid_rsa.pubä¸¤ä¸ªæ–‡ä»¶å°†id_rsa.pubæ–‡ä»¶ä¸­çš„å†…å®¹å¤åˆ¶ï¼Œæ‰“å¼€GitHubä¸ªäººè®¾ç½® SSH and GPG keysï¼Œç‚¹å‡»New SSH keyï¼Œç²˜è´´åˆ°Keyé‡Œé¢ï¼Œæ ‡é¢˜éšä¾¿å– è¾“å…¥å‘½ä»¤ï¼Œç»‘å®šGitHubè´¦æˆ· 123456789git config --global user.email &quot;é‚®ç®±åœ°å€&quot;git config --global user.name &quot;ç”¨æˆ·å&quot; æµ‹è¯•è¿æ¥ssh -T git@github.comyes æç¤º Youâ€™ve successfully authenticated ï¼Œè¡¨æ˜å·²ç»æˆåŠŸè¿æ¥ 4.3éƒ¨ç½²Hexoåˆ°GitHubå®‰è£…éƒ¨ç½²æ’ä»¶npm install hexo-deployer-git --saveä¿®æ”¹Hexoé…ç½®æ–‡ä»¶_config.yml 123456789deploy: type: git repo: git@github.com:ç”¨æˆ·å/ç”¨æˆ·å.github.io.git #ä»“åº“SSHåœ°å€ branch: master å¼€å§‹éƒ¨ç½²hexo ghexo d ç­‰å¾…ä¸€ä¼šï¼Œæ‰“å¼€ https://ç”¨æˆ·å.github.io å³å¯çœ‹åˆ°æ•ˆæœ 4.4ç»‘å®šåŸŸå 1.åœ¨è‡ªå·±åŸŸåç®¡ç†é¢æ¿ä¸­æ·»åŠ CNAMEè®°å½•ï¼Œä¸»æœºå¤´ä¸ºï¼šwwwï¼Œå€¼ä¸ºï¼šç”¨æˆ·å.github.io2.åœ¨Hexoçš„\\source\\ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªCNAME.txt,è¾“å…¥ä½ çš„åŸŸåï¼Œç„¶åå°†txtåç¼€åˆ é™¤3.ä½¿ç”¨hexo gåŠhexo déƒ¨ç½²åˆ°GitHub4.åœ¨GitHubä»“åº“è®¾ç½®ä¸­,è¾“å…¥åŸŸåï¼Œå¼€å¯SSLè¯ä¹¦(æ³¨æ„å¿…é¡»è¦äºŒçº§åŸŸåæ‰èƒ½å¼€å¯ï¼Œä¸å¸¦ä¸»æœºå¤´é¡¶çº§åŸŸåæ— æ³•å¼€å¯) 5 ä¸»é¢˜é…ç½® 5.1ä¸»é¢˜å‚æ•°é…ç½®å¯¼èˆªæ æ˜¾ç¤ºåŠä¸ªäººä¿¡æ¯æ§ä»¶ä¿®æ”¹æ‰“å¼€/themes/icarus/_config.ymlï¼Œä¿®æ”¹ä»¥ä¸‹å‚æ•° 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576navbar: # Navigation bar menu links menu: #èœå•æ˜¾ç¤ºæ”¹ä¸ºä¸­æ–‡ é¦–é¡µ: / å½’æ¡£: /archives/ åˆ†ç±»: /categories/ æ ‡ç­¾: /tags/ å…³äº: /about/ widgets: - # Widget name type: profile position: left #æ”¾ç½®åœ¨å·¦è¾¹æ  author: #ä½œè€… author_title: #ä½œè€…æ ‡é¢˜ location: #ä½ç½®ä¿¡æ¯ article: #æ–‡ç« æ˜¾ç¤º # Code highlight settings highlight: # ä»£ç é«˜äº®ä¸»é¢˜ # https://github.com/highlightjs/highlight.js/tree/master/src/styles theme: atom-one-light # æ˜¾ç¤ºå¤åˆ¶æŒ‰é’® clipboard: true # ä»£ç æ˜¯å¦é»˜è®¤æŠ˜å . Can be &quot;folded&quot;, &quot;unfolded&quot; fold: unfolded # æ–‡ç« é¢„è§ˆå›¾ thumbnail: true # é˜…è¯»æ—¶é—´æ˜¾ç¤º readtime: true æ–‡ç« æ˜¾ç¤ºä¿®æ”¹article: #æ–‡ç« æ˜¾ç¤º # Code highlight settings highlight: # ä»£ç é«˜äº®ä¸»é¢˜ # https://github.com/highlightjs/highlight.js/tree/master/src/styles theme: atom-one-light # æ˜¾ç¤ºå¤åˆ¶æŒ‰é’® clipboard: true # ä»£ç æ˜¯å¦é»˜è®¤æŠ˜å . Can be &quot;folded&quot;, &quot;unfolded&quot; fold: unfolded # æ–‡ç« é¢„è§ˆå›¾ thumbnail: true # é˜…è¯»æ—¶é—´æ˜¾ç¤º readtime: true æ§ä»¶ä½ç½®ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„æ§ä»¶ä»£ç å…ˆåé¡ºåºå†³å®šäº†ç½‘é¡µä¸­ä¸¤æ æ§ä»¶çš„å…ˆåé¡ºåº - # Widget name type: toc position: left #æ§ä»¶çš„ä½ç½® -åˆ é™¤æ§ä»¶å¦‚æœéœ€è¦å»æ‰æŸä¸ªæ§ä»¶ï¼Œé‚£ä¹ˆå¯ä»¥åœ¨æ§ä»¶ä»£ç å‰åŠ #ï¼Œæ³¨æ„åˆ†å‰²çš„ç¬¦å· - ä¹Ÿè¦æ³¨é‡Šå½“ç„¶ä¹Ÿå¯ä»¥ç›´æ¥åˆ é™¤ä»£ç # -# # Widget name# type: category# # Where should the widget be placed, left or right# position: leftæ§ä»¶å›ºå®šä¿®æ”¹ä»¥ä¸‹falseä¸ºtrueå¯ä»¥è®©æ§ä»¶ä¸éšæ»šåŠ¨æ¡æ»šåŠ¨sidebar: # left sidebar settings left: #å·¦è¾¹æ å›ºå®š sticky: false # right sidebar settings right: #å³è¾¹æ å›ºå®š sticky: false 5.2ä¸»é¢˜ç¾åŒ–icarusè¿™æ¬¾ä¸»é¢˜ä¸ºå…¨å±€ä¸‰æ æ˜¾ç¤ºï¼Œè¿™æ ·æµè§ˆæ–‡ç« æ—¶æ˜¾å¾—è¿‡äºæ‹¥æŒ¤ï¼ˆå®½å±æ˜¾ç¤ºå™¨è·³è¿‡ï¼‰ï¼Œæ‰€ä»¥æœç´¢äº†ä¸€ä¸‹ï¼Œå¦‚ä½•è®©æ–‡ç« é¡µæ‹“å®½ä¸€ç‚¹ï¼Œå°‘æ˜¾ç¤ºäº›æ§ä»¶ï¼Œæœ€åæ‰¾åˆ°äº†ä¸‹é¢è¿™ç¯‡å¸–å­ Icarus ä¸»é¢˜è‡ªå®šä¹‰ https://www.alphalxy.com/2019/03/customize-icarus/ æŒ‰ç…§æ–‡ç« ä¸­çš„æ­¥éª¤é…ç½®å³å¯ï¼Œä½†æ˜¯æˆ‘æµ‹è¯•åå‘ç°PCç«¯æˆåŠŸæ”¹æˆäº†ä¸¤æ ï¼Œç§»åŠ¨ç«¯å¸ƒå±€é”™ä¹±äº†ï¼Œåé¢è¿˜æ˜¯ç”¨äº†è¿™ä½å¤§ä½¬çš„ç°æˆé…ç½®æ–‡ä»¶,æ„Ÿè°¢å¤§ä½¬åˆ†äº«ã€‚ ç°æˆé…ç½®æ–‡ä»¶ https://github.com/AlphaLxy/hexo-theme-icarus ä½¿ç”¨æ–¹æ³•ï¼šä¸‹è½½ZIPåŒ…ï¼Œè§£å‹åˆ°Hexoçš„themeæ–‡ä»¶å³å¯ï¼ŒæŒ‰ç…§ä¸Šæ–‡çš„æ–¹æ³•ä¿®æ”¹ä¸ºè‡ªå·±çš„å‚æ•° åº•éƒ¨è®¿é—®é‡åŠè¿è¡Œæ—¶é—´ä¿®æ”¹ ä¿®æ”¹\\themes\\icarus\\layout\\common\\footer.ejs æ–‡ä»¶ï¼Œå°†åŸæ¥åªæ˜¾ç¤ºäººæ•°çš„spanæ ‡ç­¾åˆ é™¤ï¼Œæ·»åŠ ä»¥ä¸‹ä»£ç  1234567891011121314151617181920 &lt;span id=&quot;busuanzi_container_site_uv&quot;&gt; æ¥è®¿ &lt;span id=&quot;busuanzi_value_site_uv&quot;&gt;&lt;/span&gt;äºº&lt;/span&gt; &lt;span id=&quot;busuanzi_container_site_pv&quot;&gt;, æ€»è®¿é—® &lt;span id=&quot;busuanzi_value_site_pv&quot;&gt;&lt;/span&gt;æ¬¡&lt;/span&gt;&lt;span id=&quot;timeDate&quot;&gt;è½½å…¥å¤©æ•°...&lt;/span&gt;&lt;span id=&quot;times&quot;&gt;è½½å…¥æ—¶åˆ†ç§’...&lt;/span&gt; &lt;script&gt; var now = new Date(); function createtime() { var grt= new Date(&quot;02/20/2020 00:00:00&quot;); /*å»ºç«™æ—¶é—´*/ now.setTime(now.getTime()+250); days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days); hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours); if(String(hnum).length ==1 ){hnum = &quot;0&quot; + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum); mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = &quot;0&quot; + mnum;} seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum); snum = Math.round(seconds); if(String(snum).length ==1 ){snum = &quot;0&quot; + snum;} document.getElementById(&quot;timeDate&quot;).innerHTML = &quot;æœ¬ç«™å·²å®‰å…¨è¿è¡Œ &quot;+dnum+&quot; å¤© &quot;; document.getElementById(&quot;times&quot;).innerHTML = hnum + &quot; å°æ—¶ &quot; + mnum + &quot; åˆ† &quot; + snum + &quot; ç§’&quot;; } setInterval(&quot;createtime()&quot;,250); &lt;/script&gt; å†ä¿®æ”¹icarusé…ç½®æ–‡ä»¶ï¼Œæ‰“å¼€busuanziç»Ÿè®¡ busuanzi: true 5.3æ’ä»¶æš‚æ—¶æœªä½¿ç”¨å¤ªå¤šæ’ä»¶ï¼Œè§‰å¾—åšå®¢ç®€æ´ç‚¹å¥½ï¼Œä¸èƒ½èŠ±é‡Œèƒ¡å“¨ï¼Œæœ‰ç©ºå†å¼„å§ â•®(ï¿£â–½ï¿£)â•­ 5.4è¯„è®ºåŠåˆ†äº«å‚è€ƒicaruså®˜æ–¹æ–‡ç« https://blog.zhangruipeng.me/hexo-theme-icarus/categories/Plugins/Comment/https://blog.zhangruipeng.me/hexo-theme-icarus/categories/Plugins/Share/ 6 å¸¸è§é—®é¢˜ä¿®æ”¹é…ç½®æˆ–æ–‡ç« åæµè§ˆæˆ–éƒ¨ç½²åˆ°GitHubå´æœªæ”¹å˜ï¼š1.å°è¯•æ¸…ç†æµè§ˆå™¨ç¼“å­˜2.ä½¿ç”¨hexo cleanï¼Œåˆ é™¤ç”Ÿæˆçš„ç¼“å­˜ï¼Œå†é‡æ–°hexo g3.åˆ é™¤éƒ¨ç½²åˆ°GitHubçš„ç¼“å­˜æ–‡ä»¶å¤¹.deploy_gitï¼Œé‡æ–°ç”ŸæˆåŠéƒ¨ç½² 7æ–‡ç« æ ¼å¼æ–‡ç« å¤´éƒ¨ 1234567891011title: date: urlname: #è‡ªå®šä¹‰æ–‡ç« URLcategories: tags: - æ ‡ç­¾thumbnail: #æ–‡ç« é¢„è§ˆå›¾comments: true #è¯„è®ºç³»ç»Ÿtoc: true #ç›®å½•mathjax: true #å…¬å¼æ¸²æŸ“ å¯ä»¥å°†æ–‡ç« å¤´éƒ¨ä¿å­˜åˆ°\\scaffolds\\post.mdæ¨¡æ¿ä¸­ï¼Œä¸‹æ¬¡ä½¿ç”¨hexo nç”Ÿæˆæ–‡ç« è‡ªå¸¦å¤´éƒ¨thumbnailå‚æ•°å¯ä»¥å¡«ç½‘å€ï¼Œä¹Ÿå¯ä»¥è‡ªå·±åœ¨\\source\\ä¸‹åˆ›å»ºä¸€ä¸ªimagesæ–‡ä»¶å¤¹ï¼Œå°†å›¾ç‰‡01.jpgæ”¾å…¥ï¼Œä¹‹åå°†thumbnailè®¾ç½®ä¸º/images/01.jpgå³å¯è°ƒç”¨â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”ã€Œä¸€ç²’ç±³:Dã€çš„åŸåˆ›æ–‡ç« åŸæ–‡é“¾æ¥ï¼šhttps://blog.csdn.net/milletloks/java/article/details/104445557","link":"/2017/05/26/HEXO+ICARUS%E4%B8%BB%E9%A2%98%E9%85%8D%E7%BD%AE%E5%AE%89%E8%A3%85/"},{"title":"jsé¢˜ç›®","text":"jsç¬”è¯•é¢˜ç›®æ•°ç»„ç»™å®šä¸€ä¸ªæ•°ç»„ï¼Œç¼–å†™ä¸€ä¸ªå‡½æ•°å»é™¤é‡å¤å…ƒç´  ä¸¤ç§æ–¹æ³•ï¼š 1) éå† + includes2) es6è¯­æ³•ï¼šSet()å¯¹è±¡è®¾ç½®å…³è”æ•°ç»„ï¼ˆå…³è”æ•°ç»„çš„é”®å”¯ä¸€çš„ï¼‰ï¼ŒArray.form()è½¬æˆç´¢å¼•æ•°ç»„ å€¼ç±»å‹å’Œå¼•ç”¨ç±»å‹1ï¼‰å€¼ç±»å‹ï¼š å­—ç¬¦ä¸²stringï¼Œæ•°å€¼numberï¼Œå¸ƒå°”å€¼booleanï¼Œ null, undefined2ï¼‰å¼•ç”¨ç±»å‹ï¼š å¯¹è±¡ Objectï¼Œæ•°ç»„Arrayï¼Œå‡½æ•°Function å€¼ç±»å‹çš„èµ‹å€¼ï¼šç›´æ¥å°†å­˜å‚¨çš„æ•°æ®å¤åˆ¶ä¸€ä»½è¿›è¡Œèµ‹å€¼ï¼Œä¸¤ä»½æ•°æ®åœ¨å†…å­˜ä¸­æ˜¯å®Œå…¨ç‹¬ç«‹çš„ã€‚ å¼•ç”¨ç±»å‹èµ‹å€¼ï¼šå¼•ç”¨ç±»å‹çš„èµ‹å€¼çš„æ—¶å€™ï¼Œæ˜¯å°†å˜é‡ä¸­çš„å­˜å‚¨çš„åœ°å€å¤åˆ¶ä¸€ä»½å•ç‹¬å­˜å‚¨ï¼Œä½†æ˜¯ä¸¤ä¸ªå˜é‡ä¸­ä¿®æ”¹å…¶ä¸­ä¸€ä¸ªå¯¹è±¡ï¼Œå¦å¤–ä¸€ä¸ªå¼•ç”¨æ¥è®¿é—®çš„æ—¶å€™ï¼Œä¹Ÿä¼šè®¿é—®åˆ°ä¿®æ”¹åçš„å€¼ã€‚ 123456789101112131415161718class Person { constructor(name) { this.name = name; }; printName() { alert(this.name); }} var b = function(name) { this.name = name; } b.prototype.ok = function() { alert(this.name) } new Person('ok').printName(); new b('iii').ok();","link":"/2020/05/09/%E9%A2%98%E7%9B%AE/"},{"title":"ç®—æ³•/å¤æ‚åº¦åˆ†æå’Œå¤§Oè¡¨ç¤ºæ³•","text":"","link":"/2020/05/09/%E7%AE%97%E6%B3%95/%E5%A4%8D%E6%9D%82%E5%BA%A6%E5%88%86%E6%9E%90%E5%92%8C%E5%A4%A7O%E8%A1%A8%E7%A4%BA%E6%B3%95/"},{"title":"php/åŸºç¡€","text":"### ç”¨äºé˜²SQLæ³¨å…¥çš„å‡ ä¸ªå‡½æ•° addslashes()åœ¨é¢„å®šä¹‰å­—ç¬¦å‰é¢åŠ åæ–œçº¿ å•å¼•å·ï¼ˆâ€™ï¼‰ åŒå¼•å·ï¼ˆâ€ï¼‰ åæ–œæ ï¼ˆ\\ï¼‰ NULL","link":"/2020/06/02/php/%E5%9F%BA%E7%A1%80/"},{"title":"Laravelå­¦ä¹ è§„åˆ’","text":"å‰è¨€ï¼šæ‰“ç®—å­¦å®Œæœ€åä¸€ä¸ªphpæ¡†æ¶laravelï¼Œæœ€åçš„å‚æ­»æŒ£æ‰ï¼Ÿï¼Ÿï¼Ÿ å½“ç„¶æ²¡æœ‰è¿™æ˜¯å·²ä¹…æƒ³å®Œæˆçš„äº‹ï¼Œè€Œè¿™ä¸€æ¬¡å¿…å°†å®ç°å®ƒï¼å“ˆå“ˆğŸ˜„ç”¨æ—¶ï¼š 12-25 å¤©å­¦ä¹ å¹¶æŒæ¡laravel è§„åˆ’ç¬¬ä¸€æ­¥ç¬¬ä¸€æ­¥è¿˜æ˜¯ä½¿ç”¨æ¨¡æ¿æ··åˆå¼€å‘æ¨¡å¼å­¦ä¹ åœ°å€ï¼šLaravel æ•™ç¨‹ - Web å¼€å‘å®æˆ˜è¿›é˜¶è§„åˆ’æ—¶é—´ï¼š2-5å¤©å­¦ä¹ å†…å®¹ï¼šåŸºç¡€çŸ¥è¯† ç¬¬äºŒæ­¥å‰åç«¯åˆ†ç¦»ç¬¬äºŒæ­¥çœ‹çœ‹å­¦é™¢å›çš„è¯¾ç¨‹å­¦ä¹ åœ°å€ï¼šåŸºäº Laravel + Vue æ„å»ºå‰åç«¯åˆ†ç¦»åº”ç”¨è§„åˆ’æ—¶é—´ï¼š2-5å¤©å­¦ä¹ å†…å®¹ï¼šå‰åç«¯åˆ†ç¦» ç¬¬ä¸‰æ­¥å·©å›ºå‰åç«¯åˆ†ç¦»ç¬¬ä¸‰æ­¥å·©å›ºçŸ¥è¯†ç‚¹å­¦ä¹ åœ°å€ï¼šå®æˆ˜æ„æ¶ API æœåŠ¡å™¨è§„åˆ’æ—¶é—´ï¼š2-5å¤©å­¦ä¹ å†…å®¹ï¼šå‰åç«¯åˆ†ç¦» ç¬¬å››æ­¥ å®æˆ˜å•†åŸé¡¹ç›®ç¬¬ä¸‰æ­¥å·©å›ºçŸ¥è¯†ç‚¹â•æ‹“å±•é¡¹ç›®ç»éªŒå­¦ä¹ åœ°å€ï¼šç”µå•†å®æˆ˜ ,ç”µå•†è¿›é˜¶è§„åˆ’æ—¶é—´ï¼š5-10å¤©å­¦ä¹ å†…å®¹ï¼šå•†åŸé¡¹ç›®å¼€å‘ç»éªŒ OVER å¸Œæœ›è‡³æ­¤çš„æˆ‘äº†å´äº†è¿™ä¸ªæ„¿æœ›äº†ï¼Œå¹¶èƒ½ç†Ÿç»ƒçš„ä½¿ç”¨laravelè¿™é—¨æ¡†æ¶ï¼ï¼ï¼","link":"/2020/05/14/php/%E5%AD%A6%E4%B9%A0Laravel%E8%A7%84%E5%88%92/"},{"title":"å­¦ä¹ è®¡åˆ’-å‰ç«¯","text":"æœ€è¿‘æ„Ÿè§‰è‡ªå·±æ˜¯ä¸€ä¸ªå¤±è´¥çš„ç¨‹åºå‘˜ æœ‰ç‚¹è¿·èŒ«ï¼Œç‰¹åˆ«æ˜¯çœ‹åˆ°å„ç±»æŠ€æœ¯ç½‘ç«™ä¸Šåˆ«äººçš„æ–‡ç«  â€œé¢è¯•â€,â€officeâ€,â€å·¥èµ„â€ï¼Œè¿™äº›æ ‡ç­¾å¯¹æˆ‘æ¥è¯´æ˜¯ç‰¹åˆ«çš„åˆºçœ¼ï¼Œåˆºä¼¤äº†æˆ‘çš„ç¾è€»å¿ƒï¼æ˜¯çš„ï¼æ²¡æœ‰å¿…è¦å†è¿™æ ·è¿·èŒ«ï¼Œå½·å¾¨ä¸‹å»äº†ï¼ç»™è‡ªå·±ä¸€ä¸ªå­¦ä¹ è®¡åˆ’ï¼Œå…‹æœæ‡’æƒ°å’Œæ‚å¿µï¼åªè¦åšå®šå’Œåšä¿¡ I will win è®¡ç®—æœºç½‘ç»œåè®®åŸºç¡€html css åŸºç¡€javascript åŸºç¡€æ¡†æ¶webpack","link":"/2020/04/30/articles/%E5%AD%A6%E4%B9%A0%E8%AE%A1%E5%88%92-%E5%89%8D%E7%AB%AF/"},{"title":"argument","text":"æ€»æ‰€å‘¨çŸ¥ï¼Œjsæ˜¯ä¸€é—¨ç›¸å½“çµæ´»çš„è¯­è¨€ã€‚å½“æˆ‘ä»¬åœ¨jsä¸­åœ¨è°ƒç”¨ä¸€ä¸ªå‡½æ•°çš„æ—¶å€™ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šç»™è¿™ä¸ªå‡½æ•°ä¼ é€’ä¸€äº›å‚æ•°ï¼ŒjsæŠŠä¼ å…¥åˆ°è¿™ä¸ªå‡½æ•°çš„å…¨éƒ¨å‚æ•°å­˜å‚¨åœ¨ä¸€ä¸ªå«åšargumentsçš„ä¸œè¥¿é‡Œé¢ï¼Œé‚£ä¹ˆè¿™åˆ°åº•æ˜¯ä»€ä¹ˆä¸œè¥¿ï¼Ÿ åœ¨jsä¸­ä¸‡ç‰©çš†å¯¹è±¡ï¼Œç”šè‡³æ•°ç»„å­—ç¬¦ä¸²å‡½æ•°éƒ½æ˜¯å¯¹è±¡ã€‚æ‰€ä»¥è¿™ä¸ªå«åšargumentsçš„ä¸œè¥¿ä¹Ÿæ˜¯ä¸ªå¯¹è±¡ï¼Œè€Œä¸”æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å¯¹è±¡ï¼Œå®ƒçš„å±æ€§åæ˜¯æŒ‰ç…§ä¼ å…¥å‚æ•°çš„åºåˆ—æ¥çš„ï¼Œç¬¬1ä¸ªå‚æ•°çš„å±æ€§åæ˜¯â€™0â€™ï¼Œç¬¬2ä¸ªå‚æ•°çš„å±æ€§åæ˜¯â€™1â€™ï¼Œä»¥æ­¤ç±»æ¨ï¼Œå¹¶ä¸”å®ƒè¿˜æœ‰lengthå±æ€§ï¼Œå­˜å‚¨çš„æ˜¯å½“å‰ä¼ å…¥å‡½æ•°å‚æ•°çš„ä¸ªæ•°ï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬æŠŠè¿™ç§å¯¹è±¡å«åšç±»æ•°ç»„å¯¹è±¡ã€‚ç±»æ•°ç»„å¯¹è±¡å’Œæ•°ç»„éƒ½æ˜¯å¯¹è±¡è¿™ä¸ªå¦ˆç”Ÿçš„ï¼Œä½†æ˜¯æ•°ç»„æ˜¯å¤§å“¥æ¯”ç±»æ•°ç»„å¯¹è±¡å¤šäº†å¾ˆå¤šå…¶ä»–çš„ç©å…·(æ–¹æ³•)ï¼Œç±»æ•°ç»„å¯¹è±¡åªæ˜¯é•¿å¾—å¾ˆåƒæ•°ç»„çš„å¼Ÿå¼Ÿè€Œå·²ã€‚ æ…¢ç€ï¼Œåˆšåˆšä¸æ˜¯è¯´æ•°ç»„ä¹Ÿæ˜¯å¯¹è±¡å—ï¼Œç°åœ¨è¿™ä¸ªç±»æ•°ç»„å¯¹è±¡åˆæ˜¯ä»€ä¹ˆï¼Ÿ æ²¡åŠæ³•ï¼Œjså°±æ˜¯è¿™ä¹ˆçš„çµæ´»ã€‚è¿™ä¸ªç±»æ•°ç»„å¯¹è±¡ä¸ä»…å­˜å‚¨ç»™å‡½æ•°ä¼ å…¥çš„å‚æ•°ï¼Œä¹Ÿå…·æœ‰ä¸€äº›å…¶ä»–çš„å±æ€§ï¼Œç­‰ä¸‹ä¼šä¸€ä¸€é“æ¥ã€‚ å› ä¸ºç±»æ•°ç»„å¯¹è±¡å’Œæ•°ç»„æœ‰å¾ˆå¤šçš„å…±æ€§ï¼Œæ‰€ä»¥æˆ‘ä»¬ç»å¸¸å¯ä»¥ç”¨callæ–¹æ³•ï¼Œè®©ç±»æ•°ç»„å¯¹è±¡ä¹Ÿä½¿ç”¨çš„æ•°ç»„çš„ä¸€äº›æ–¹æ³•ï¼Œå°±æ˜¯è®©è¿™ä¸ªå¼Ÿå¼Ÿå»ç©å“¥å“¥çš„ç©å…·ï¼Œæ¯”å¦‚â€¦â€¦ï¼Œè¿˜æ˜¯ä¸æ‰¯è¿œäº†ï¼Œè¿™ç¯‡æ–‡ç« åªæ˜¯è¯´ä»€ä¹ˆæ˜¯argumentsï¼Œæƒ³çŸ¥é“æ›´å¤šå…³äºå¯¹è±¡å¦‚ä½•å€Ÿè°ƒæ•°ç»„æ–¹æ³•çš„è¯ï¼Œè¯·å‚è€ƒè¿™ç¯‡æ–‡ç« ã€‚ ä¸‹é¢ä¸¾ä¸ªæ —å­ï¼š 12345678910function add() { if( arguments.length == 2 ){ return arguments[0] + arguments[1]; }else{ return 'ä¼ å…¥å‚æ•°ä¸åˆæ³•'; }} console.log( add(2,3) );console.log( add(1,2,3) ); çœ‹çœ‹ç»“æœï¼š ç»“æœ æœ€åæˆ‘ä»¬è¿˜å¯ä»¥çœ‹åˆ°argumentsè¿˜æœ‰ä¸€ä¸ªå«åšcalleeçš„å±æ€§ï¼Œè¿™ä¸ªå±æ€§æ˜¯è¡¨ç¤ºçš„æ˜¯å½“å‰å‡½æ•°çš„ä¸€ä¸ªå¼•ç”¨ï¼Œç®€å•ç‚¹è¯´ï¼Œè¿™ä¸ªå±æ€§é‡Œé¢å­˜å‚¨çš„æˆ‘ä»¬è°ƒç”¨çš„è¿™ä¸ªå‡½æ•°çš„ä»£ç ï¼Œå®åœ¨æ— æ³•ç†è§£çš„æ—¶å€™ï¼Œåˆåˆ°äº†console.logå¤§æ˜¾èº«æ‰‹çš„æ—¶å€™äº†ã€‚ 12345678910function showcallee() { var a = 'è¿™é‡Œæ˜¯ä»£ç '; var b = 'è¿™æ˜¯å¦ä¸€æ®µä»£ç '; var c = a + b; console.log(arguments.callee); return c;}showcallee(); ç»“æœ çœ‹åˆ°ç»“æœçš„ä½ æ˜¯ä¸æ˜¯å’Œæˆ‘ä¸€æ ·æƒŠå‘†äº†å‘¢ï¼Œè¿™ä¸å°±æ˜¯æˆ‘å†™çš„ä»£ç å—ï¼Œarguments.calleeå®Œå®Œæ•´æ•´çš„æŠŠè¿™ä¸ªå‡½æ•°çš„è¿™æ®µä»£ç è¿”å›äº†ã€‚ argumentsçš„ä¸€äº›å¦™ç”¨1.åˆ©ç”¨argumentså®ç°æ–¹æ³•çš„é‡è½½ä¸‹é¢æˆ‘ä»¬åˆ©ç”¨argumentså¯¹è±¡æ¥å®ç°ä¸€ä¸ªå‚æ•°ç›¸åŠ çš„å‡½æ•°ï¼Œä¸è®ºä¼ å…¥å¤šå°‘å‚æ•°éƒ½è¡Œï¼Œå°†ä¼ å…¥çš„å‚æ•°ç›¸åŠ åè¿”å›ã€‚ 12345678910111213function add() { var len = arguments.length, sum = 0; for(;len--;){ sum += arguments[len]; } return sum;} console.log( add(1,2,3) ); //6console.log( add(1,3) ); //4console.log( add(1,2,3,5,6,2,7) ); //26 ç”±äºjsæ˜¯ä¸€ç§å¼±ç±»å‹çš„è¯­è¨€ï¼Œæ²¡æœ‰é‡è½½æœºåˆ¶ï¼Œå½“æˆ‘ä»¬é‡å†™å‡½æ•°æ—¶ï¼Œä¼šå°†åŸæ¥çš„å‡½æ•°ç›´æ¥è¦†ç›–ï¼Œè¿™é‡Œæˆ‘ä»¬èƒ½åˆ©ç”¨argumentsï¼Œæ¥åˆ¤æ–­ä¼ å…¥çš„å®å‚ç±»å‹ä¸æ•°é‡è¿›è¡Œä¸åŒçš„æ“ä½œï¼Œç„¶åè¿”å›ä¸åŒçš„æ•°å€¼ã€‚ 2.åˆ©ç”¨arguments.calleeå®ç°é€’å½’å…ˆæ¥çœ‹çœ‹ä¹‹å‰æˆ‘ä»¬æ˜¯æ€ä¹ˆå®ç°é€’å½’çš„ï¼Œè¿™æ˜¯ä¸€ä¸ªç»“ç®—é˜¶ä¹˜çš„å‡½æ•° 1234567function factorial(num) { if(num&lt;=1) { return 1; }else { return num * factorial(num-1); } } ä½†æ˜¯å½“è¿™ä¸ªå‡½æ•°å˜æˆäº†ä¸€ä¸ªåŒ¿åå‡½æ•°æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨calleeæ¥é€’å½’è¿™ä¸ªå‡½æ•°ã€‚ 1234567function factorial(num) { if(num&lt;=1) { return 1; }else { return num * arguments.callee(num-1); } } è¿™ä¸ªæ–¹æ³•è™½ç„¶å¥½ç”¨ï¼Œä½†æ˜¯æœ‰ä¸€ç‚¹å€¼å¾—æ³¨æ„ï¼ŒECMAScript4ä¸­ä¸ºäº†é™åˆ¶jsçš„çµæ´»åº¦ï¼Œè®©jså˜å¾—ä¸¥æ ¼ï¼Œæ–°å¢äº†ä¸¥æ ¼æ¨¡å¼ï¼Œåœ¨ä¸¥æ ¼æ¨¡å¼ä¸­æˆ‘ä»¬è¢«ç¦æ­¢ä¸ä½¿ç”¨varæ¥ç›´æ¥å£°æ˜ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œå½“ç„¶è¿™ä¸æ˜¯é‡ç‚¹ï¼Œé‡ç‚¹æ˜¯arguments.calleeè¿™ä¸ªå±æ€§ä¹Ÿè¢«ç¦æ­¢äº†ã€‚ä¸è¿‡è¿™éƒ½ä¸æ˜¯äº‹å„¿ï¼ŒES6ä¸ºæˆ‘ä»¬æ–°å¢äº†å¾ˆå¤šå¥½ç”¨çš„å˜é‡å£°æ˜æ–¹å¼å’Œæ–°çš„è¯­æ³•ç³–ï¼Œä½œä¸ºä¸€ä¸ªæ—¶é«¦çš„å‰ç«¯ï¼Œæˆ‘ä»¬èµ¶ç´§å­¦ä¹ ä¸€äº›ES6çš„æ–°è¯­æ³•å§ã€‚","link":"/2020/05/09/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80/arguments/"},{"title":"Hello World","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new \"My New Post\" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment","link":"/2020/05/09/web/hello-world/"},{"title":"å‰ç«¯åŸºç¡€/é¡µé¢ç»“æ„è¯­ä¹‰åŒ–","text":"1. ä¸ºä»€ä¹ˆéœ€è¦è¯­ä¹‰åŒ–ï¼Ÿ æ˜“ç»´æŠ¤ï¼Œæ˜“ä¿®æ”¹ï¼Œæ˜“é˜…è¯» æœ‰åˆ©äºæœç´¢å¼•æ“çˆ¬å–ï¼ˆseoï¼‰ 2. è¯­ä¹‰åŒ–æ˜¯ä»€ä¹ˆï¼Ÿ è¯­ä¹‰å…ƒç´ å‡æœ‰ä¸€ä¸ªå…±åŒç‰¹ç‚¹â€”â€”ä»–ä»¬å‡ä¸åšä»»ä½•äº‹æƒ…ã€‚æ¢å¥è¯è¯´ï¼Œè¯­ä¹‰å…ƒç´ ä»…ä»…æ˜¯é¡µé¢ç»“æ„çš„è§„èŒƒåŒ–ï¼Œå¹¶ä¸ä¼šå¯¹å†…å®¹æœ‰æœ¬è´¨çš„å½±å“ã€‚ 2.1 å¤´éƒ¨&lt;header&gt;å…ƒç´ æœ‰ä¸¤ç§ç”¨æ³•ï¼Œç¬¬ä¸€æ˜¯æ ‡æ³¨å†…å®¹çš„æ ‡é¢˜ï¼Œç¬¬äºŒæ˜¯æ ‡æ³¨ç½‘é¡µçš„é¡µçœ‰ï¼Œå¦‚ä¸Šå›¾ä½ çœ‹åˆ°çš„é‚£æ ·ã€‚é™¤éå¿…è¦ï¼ˆå†…å®¹æ ‡é¢˜é™„å¸¦å…¶å®ƒä¿¡æ¯çš„æƒ…å†µä¸‹ï¼šå‘å¸ƒæ—¶é—´ã€ä½œè€…ç­‰ï¼‰ï¼Œä¸€èˆ¬ä¸åœ¨å†…å®¹ä¸­ä½¿ç”¨&lt;header&gt;å› è€Œï¼Œç½‘é¡µä¸­å¯ä»¥åŒ…å«å¤šä¸ª&lt;header&gt;å…ƒç´ ã€‚æŒ‰ç…§ HTML5 çš„è§„å®šï¼Œ&lt;header&gt;éƒ½åº”åŒ…å«æŸä¸ªçº§åˆ«çš„æ ‡é¢˜ï¼Œæ‰€ä»¥åº”éšå¼æˆ–æ˜¾å¼åœ°åŒ…å«æ ‡é¢˜ï¼Œé€šå¸¸å°†ä¸å¸Œæœ›æ˜¾ç¤ºçš„æ ‡é¢˜è®¾ç½®ä¸ºdisplay: none; ä¸€æ–¹é¢éµå®ˆè§„èŒƒï¼Œå¦ä¸€æ–¹é¢åˆ™æä¾›äº†æ— éšœç¢é˜…è¯»è€Œä¸è‡³äºå½±å“åˆ°é¡µé¢è®¾è®¡ã€‚ 2.2 å¯¼èˆªæ å¯¼èˆªæ ä½¿ç”¨&lt;nav&gt;çœ‹èµ·æ¥æ˜¯ç†æ‰€å½“ç„¶çš„ï¼Œè¿›ä¸€æ­¥ï¼Œå®ƒä¹Ÿç”¨äºä¸€ç»„æ–‡ç« çš„é“¾æ¥ã€‚ä¸€ä¸ªé¡µé¢å¯ä»¥åŒ…å«å¤šä¸ªå…ƒç´ ï¼Œä½†é€šå¸¸ä»…ä»…åœ¨é¡µé¢çš„ä¸»è¦å¯¼èˆªéƒ¨åˆ†ä½¿ç”¨å®ƒã€‚ é™„æ³¨ &lt;aside&gt;å…ƒç´ å¹¶ä¸ä»…ä»…æ˜¯ä¾§æ ï¼Œå®ƒè¡¨ç¤ºä¸å®ƒå‘¨å›´æ–‡æœ¬æ²¡æœ‰å¯†åˆ‡å…³ç³»çš„å†…å®¹ã€‚æ–‡ç« ä¸­åŒæ ·å¯ä»¥ä½¿ç”¨&lt;aside&gt;å…ƒç´ ï¼Œæ¥è¯´æ˜æ–‡ç« çš„é™„åŠ å†…å®¹ã€è§£é‡Šè¯´æ˜æŸä¸ªè§‚ç‚¹ã€ç›¸å…³å†…å®¹é“¾æ¥ç­‰ç­‰ã€‚ å½“&lt;aside&gt;ç”¨äºä¾§æ æ—¶ï¼Œå…¶è¡¨ç¤ºæ•´ä¸ªç½‘é¡µçš„é™„åŠ å†…å®¹ã€‚é€šå¸¸çš„å¹¿å‘ŠåŒºåŸŸã€æœç´¢ã€åˆ†äº«é“¾æ¥åˆ™ä½äºä¾§æ ã€‚ ä¾§æ ä¸­çš„&lt;section&gt;å…ƒç´ è§„å®šäº†ä¸€ä¸ªåŒºåŸŸï¼Œé€šå¸¸æ˜¯å¸¦æœ‰æ ‡é¢˜çš„å†…å®¹ã€‚ æ ‡ç­¾é€‚åˆæ ‡è®°çš„å†…å®¹åŒºå—ï¼š ä¸é¡µé¢ä¸»ä½“å¹¶åˆ—æ˜¾ç¤ºçš„å°å†…å®¹å—ã€‚ ç‹¬ç«‹æ€§å†…å®¹ï¼Œæ¸…å•ã€è¡¨å•ç­‰ã€‚ åˆ†ç»„å†…å®¹ï¼Œå¦‚ CMS ç³»ç»Ÿä¸­çš„æ–‡ç« åˆ†ç±»åŒºå—ã€‚ æ¯”è¾ƒé•¿æ–‡æ¡£çš„ä¸€éƒ¨åˆ†ï¼Œå¯èƒ½ä»…ä»…æ˜¯ä¸ºäº†æ­£ç¡®è§„å®šé¡µé¢å¤§çº²ã€‚&lt;div&gt;æ ‡ç­¾ä¾ç„¶æ˜¯å¯ç”¨çš„ï¼Œå½“ä½ è§‰å¾—ä½¿ç”¨å…¶å®ƒæ ‡ç­¾éƒ½ä¸å¤ªåˆé€‚çš„æ—¶å€™ã€‚æ–°çš„è¯­ä¹‰å…ƒç´ å‡ºç°ä¹‹å‰ï¼Œæˆ‘ä»¬æ€»æ˜¯è¿™ä¹ˆå¹²çš„ï¼ 2.3 é¡µè„š åŒå¯â€œåŒ…ç½—ä¸‡è±¡â€çš„&lt;header&gt;å…ƒç´ ä¸åŒï¼Œæ ‡å‡†è§„å®š&lt;footer&gt;æ ‡ç­¾ä»…ä»…å¯ä»¥åŒ…å«ç‰ˆæƒã€æ¥æºä¿¡æ¯ã€æ³•å¾‹é™åˆ¶ç­‰ç­‰ä¹‹ç±»çš„æ–‡æœ¬æˆ–é“¾æ¥ä¿¡æ¯ã€‚ å¦‚æœæƒ³è¦åœ¨é¡µè„šä¸­åŒ…å«å…¶å®ƒå†…å®¹ï¼Œå¯ä»¥ä½¿ç”¨ç†Ÿæ‚‰çš„&lt;div&gt;æ¥å¸®å¿™ã€‚ 2.4 ä¸»è¦å†…å®¹åœ¨æ—©å…ˆçš„ HTML5 ç‰ˆæœ¬ä¸­å¹¶æ²¡æœ‰è§„å®šé¡µé¢ä¸»ä½“çš„æ ‡ç­¾ï¼Œç›¸å…³çš„ä¹¦ä¸­ç»å¸¸ä¼šè¯´ï¼šé™¤å»å¤´éƒ¨ã€å°¾éƒ¨ã€ä¾§æ ç­‰å…¶å®ƒéƒ¨åˆ†ï¼Œå‰©ä¸‹çš„è‡ªç„¶æ˜¯ä¸»ä½“éƒ¨åˆ†ã€‚ ç„¶è€Œï¼ŒHTML5.1 ä¸­è§„å®šäº†ä¸€ä¸ª&lt;main&gt;æ ‡ç­¾æ¥æ ‡è¯†ä¸»ä½“å†…å®¹ã€‚&lt;main&gt;æ ‡ç­¾ä¸èƒ½åŒ…å«åœ¨é¡µé¢å…¶å®ƒåŒºå—å…ƒç´ ä¸­ï¼Œé€šå¸¸æ˜¯&lt;body&gt;çš„å­æ ‡ç­¾ï¼Œæˆ–è€…æ˜¯å…¨å±€&lt;div&gt;çš„å­æ ‡ç­¾ã€‚&lt;main&gt;æ ‡ç­¾å¯ä»¥å¸®åŠ©å±å¹•é˜…è¯»å·¥å…·è¯†åˆ«é¡µé¢çš„ä¸»ä½“éƒ¨åˆ†ï¼Œä»è€Œè®©è®¿é—®è€…è¿…é€Ÿå¾—åˆ°æœ‰ç”¨çš„ä¿¡æ¯ã€‚ 2.5 æ–‡ç« &lt;article&gt;è¡¨ç¤ºä¸€ä¸ªå®Œæ•´çš„ã€è‡ªæˆä¸€ä½“çš„å†…å®¹å—ã€‚å¦‚æ–‡ç« æˆ–æ–°é—»æŠ¥é“ã€‚&lt;article&gt;åº”åŒ…å«å®Œæ•´çš„æ ‡é¢˜ã€æ–‡ç« ç½²åã€å‘å¸ƒæ—¶é—´ã€æ­£æ–‡ã€‚å½“è¯­ä¹‰ä¸è¡¨ç°å‘ç”Ÿå†²çªï¼Œä¾‹å¦‚æœ‰æ—¶éœ€è¦å°†æ–‡ç« åˆ†å¤šä¸ªé¡µé¢æ˜¾ç¤ºï¼Œé‚£ä¹ˆéœ€è¦æŠŠæ¯ä¸ªé¡µé¢çš„æ–‡ç« åŒºåŸŸéƒ½ç”¨&lt;article&gt;æ ‡è®°ã€‚ æ–‡ç« ä¸­åŒ…å«æ’å›¾æ—¶ï¼Œä½¿ç”¨æ–°çš„è¯­ä¹‰å…ƒç´ &lt;figure&gt;æ ‡ç­¾ã€‚ 12345678910&lt;article&gt; &lt;h1&gt;æ ‡é¢˜&lt;/h1&gt; &lt;p&gt; &lt;!-- å†…å®¹ --&gt; &lt;/p&gt; &lt;figure&gt; &lt;img src=&quot;#&quot; alt=&quot;æ’å›¾&quot;&gt; &lt;figcaption&gt;è¿™æ˜¯ä¸€ä¸ªæ’å›¾&lt;/figcaption&gt; &lt;/figure&gt;&lt;/article&gt; ä¸Šè¿°æƒ…å†µä¸‹ï¼Œ&lt;figcaption&gt;åŒ…å«äº†å…³äºæ’å›¾çš„è¯¦ç»†è§£é‡Šï¼Œåˆ™&lt;img&gt;çš„altå±æ€§å¯ä»¥ç•¥å»ã€‚ 3. å‚è€ƒè½¬è‡ªé›¨è½åšå®¢","link":"/2020/05/09/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80/%E9%A1%B5%E9%9D%A2%E7%BB%93%E6%9E%84%E8%AF%AD%E4%B9%89%E5%8C%96/"},{"title":"å­¦ä¹ å†™ä½œ","text":"ä¸€ï¼Œä¸ºä»€ä¹ˆè¦å­¦ä¹ å†™ä½œ è®°å½•å·¥ä½œç”Ÿæ´»çš„é—®é¢˜è§£å†³æ–¹æ³•å’Œç»éªŒæ€»ç»“ æå‡è‡ªå·±çš„è¯­è¨€æ„æ€èƒ½åŠ›å’Œé€»è¾‘èƒ½åŠ› äºŒï¼Œæ€ä¹ˆå†™ä½œ ä¸€ç¯‡æŠ€æœ¯æ–‡ç« ï¼Œé™¤äº†åˆšæˆ‘ä»¬è¯´çš„è¿™ç§ç»“æ„ä½“ï¼Œè¿˜æœ‰å¼€ç¯‡ã€æ€»ç»“ã€å‘¼åè¡ŒåŠ¨ç­‰ç¯èŠ‚ã€‚ç»¼åˆèµ·æ¥ï¼Œå¸¸è§çš„æŠ€æœ¯æ–‡ç« ç»„ç»‡ç»“æ„å¦‚ä¸‹ï¼š å¼€ç¯‡ï¼Œè¿™éƒ¨åˆ†é˜æ˜æ–‡ç« è®²ä»€ä¹ˆã€èƒ½å¸¦ç»™è¯»è€…ä»€ä¹ˆä»·å€¼ï¼› ç»“æ„ä½“ï¼ŒæŒ‰ç…§ä¸€å®šçš„ç»“æ„ï¼Œå±•å¼€å™è¿°ï¼Œæ¯”å¦‚æ—¶é—´çº¿ã€æ¯”å¦‚èµ°è¯»ä»£ç çš„é€»è¾‘ã€æ¯”å¦‚è®¾è®¡æ¼”ç¤ºç¤ºä¾‹çš„è¿‡ç¨‹ï¼ˆé—®é¢˜-è®¾è®¡æ€è·¯-ä»£ç æ¼”ç¤º-ä»£ç è§£è¯»-ç»“æœå±•ç¤ºï¼‰ã€æ¯”å¦‚QAï¼ˆé—®é¢˜-ç­”æ¡ˆï¼‰ã€æ¯”å¦‚å¹¶åˆ—æ¡ç›®ã€æ¯”å¦‚æ€»åˆ†æ€»ã€æ¯”å¦‚å®æˆ˜å°é¡¹ç›®çš„è®²è§£è¿‡ç¨‹ï¼ˆé¡¹ç›®èƒŒæ™¯-æ•ˆæœå±•ç¤º-è®¾è®¡è§£é‡Š-ä»£ç æ¼”ç¤º-ä»£ç è§£è¯»-å»¶ä¼¸åœºæ™¯ï¼‰ç­‰ï¼› æ€»ç»“ï¼Œä¸€æ®µè¯ï¼Œå›é¡¾è®²è¿‡çš„è¦ç‚¹ï¼Œç‚¹å‡ºè¯»è€…åº”è¯¥æ³¨æ„çš„åœ°æ–¹ï¼› å‘¼åè¡ŒåŠ¨ï¼Œå¯ä»¥ä¸€ä¸¤å¥è¯ï¼Œå‘¼åè¯»è€…è‡ªå·±è®¾è®¡ä»£ç ã€åŠ¨æ‰‹è¯•è¯•ï¼Œæˆ–è€…ç»™å‡ºä¸€äº›ç»ƒä¹ é¢˜ï¼Œè®©è¯»è€…å»åšã€‚ 2.1 å¼€ç¯‡ æ–‡ç« çš„å¼€å¤´éƒ¨åˆ†ï¼Œå¾€å¾€å†³å®šç€è¯»è€…æ˜¯å¦æ„¿æ„ç»§ç»­çœ‹ä¸‹å»ï¼Œå› æ­¤åˆ‡å…¥ç‚¹è¦è¶³å¤Ÿç²¾å‡†ï¼Œè¶³å¤Ÿåˆ‡é¢˜ï¼Œä¸”è¶³å¤Ÿæœ‰å¸å¼•åŠ›ã€‚ è¿™éƒ¨åˆ†é˜æ˜æ–‡ç« è®²ä»€ä¹ˆã€èƒ½å¸¦ç»™è¯»è€…ä»€ä¹ˆä»·å€¼ï¼› 2.2 ç»“æ„ä½“ å„ä¸ªéƒ¨åˆ†ä¹Ÿéœ€è¦ä¸²æˆä¸²ï¼Œé‚£å°±éœ€è¦æˆ‘ä»¬åŠ å…¥ä¸€å®šçš„å‘¼åº”ã€‚æˆ‘ä»¬çš„æ–‡ç« å¯ä»¥åˆ†æˆå¤šä¸ªéƒ¨åˆ†ï¼Œä½†æ‰€æœ‰éƒ¨åˆ†åŠ¡å¿…åº”è¯¥ä¸ºé¢˜ç›®ï¼Œä¹Ÿå°±æ˜¯ä¸»é¢˜æœåŠ¡ã€‚å› æ­¤åœ¨å„éƒ¨åˆ†ä¹‹é—´ï¼Œå°±éœ€è¦å‡ºç°å¿…è¦çš„å‘¼åº”ï¼Œ 2.3 æ€»ç»“ ä¸€æ®µè¯ï¼Œå›é¡¾è®²è¿‡çš„è¦ç‚¹ï¼Œç‚¹å‡ºè¯»è€…åº”è¯¥æ³¨æ„çš„åœ°æ–¹ï¼›","link":"/2020/04/16/articles/%E5%AD%A6%E4%B9%A0%E5%86%99%E4%BD%9C/"},{"title":"phpé¢è¯•é¢˜ç›®è§£çŸ¥","text":"phpé¢è¯•é¢˜ç›®è§£çŸ¥ 1.è¡¨å•æäº¤ä¸­çš„Getå’ŒPostçš„å¼‚åŒç‚¹ å‚è€ƒæ–‡ç« ","link":"/2020/05/17/php/%E9%9D%A2%E8%AF%95/php%E9%9D%A2%E8%AF%95%E9%A2%98%E7%9F%A5%E8%A7%A3/"},{"title":"php/å·¥å…·/phpåå°„è·å–ç±»å’Œæ–¹æ³•ä¸­çš„æ³¨é‡Š","text":"title: phpåå°„è·å–ç±»å’Œæ–¹æ³•ä¸­çš„æ³¨é‡Š date: 2020-05-15 21:15:57categories: php toc: true è·å–ä¸€ä¸ªç±»é‡Œé¢æ‰€æœ‰çš„æ–¹æ³•ï¼Œå’Œæ³¨é‡Šçš„å·¥å…·ï¼è¿™æ ·ç¼–ç¨‹å°±å®¹æ˜“å¤šäº†ï¼ é€šè¿‡phpä¸­çš„åå°„æœºåˆ¶ï¼Œè·å–è¯¥ç±»çš„æ–‡æ¡£æ³¨é‡Šï¼Œå†é€šè¿‡è·å–å…¶æ‰€æœ‰çš„æ–¹æ³•ï¼Œè·å–æ–¹æ³•çš„æ³¨é‡Š æ‰€ç”¨åˆ°çš„ä¸»è¦ç±»åŠå…¶æ–¹æ³• &lt;?php ReflectionClass ReflectionClass::getDocComment ReflectionClass::getMethods $method-&gt;getName(); $method-&gt;getDocComment(); $method-&gt;isProtected(); $method-&gt;getParameters(); $param-&gt;getName(); $param-&gt;isDefaultValueAvailable(); $param-&gt;getDefaultValue(); æµ‹è¯•ç±»å¦‚ä¸‹ï¼š test.php &lt;?php header(\"Content-type: text/html; charset=utf-8\"); require_once dir(__DIR__).'function.php'; require_once dir(__DIR__).'TestClass.php'; $class_name = 'TestClass'; $reflection = new ReflectionClass ( $class_name ); //é€šè¿‡åå°„è·å–ç±»çš„æ³¨é‡Š $doc = $reflection-&gt;getDocComment (); //è§£æç±»çš„æ³¨é‡Šå¤´ $parase_result = DocParserFactory::getInstance()-&gt;parse ( $doc ); $class_metadata = $parase_result; //è¾“å‡ºæµ‹è¯• var_dump ( $doc ); echo \"\\r\\n\"; print_r( $parase_result ); echo \"\\r\\n-----------------------------------\\r\\n\"; //è·å–ç±»ä¸­çš„æ–¹æ³•ï¼Œè®¾ç½®è·å–public,protectedç±»å‹æ–¹æ³• $methods = $reflection-&gt;getMethods(ReflectionMethod::IS_PUBLIC + ReflectionMethod::IS_PROTECTED + ReflectionMethod::IS_PRIVATE); //éå†æ‰€æœ‰çš„æ–¹æ³• foreach ($methods as $method) { //è·å–æ–¹æ³•çš„æ³¨é‡Š $doc = $method-&gt;getDocComment(); //è§£ææ³¨é‡Š $info = DocParserFactory::getInstance()-&gt;parse($doc); $metadata = $class_metadata + $info; //è·å–æ–¹æ³•çš„ç±»å‹ $method_flag = $method-&gt;isProtected();//è¿˜å¯èƒ½æ˜¯public,protectedç±»å‹çš„ //è·å–æ–¹æ³•çš„å‚æ•° $params = $method-&gt;getParameters(); $position=0; //è®°å½•å‚æ•°çš„æ¬¡åº foreach ($params as $param){ $arguments[$param-&gt;getName()] = $position; //å‚æ•°æ˜¯å¦è®¾ç½®äº†é»˜è®¤å‚æ•°ï¼Œå¦‚æœè®¾ç½®äº†ï¼Œåˆ™è·å–å…¶é»˜è®¤å€¼ $defaults[$position] = $param-&gt;isDefaultValueAvailable() ? $param-&gt;getDefaultValue() : NULL; $position++; } $call = array( 'class_name'=&gt;$class_name, 'method_name'=&gt;$method-&gt;getName(), 'arguments'=&gt;$arguments, 'defaults'=&gt;$defaults, 'metadata'=&gt;$metadata, 'method_flag'=&gt;$method_flag ); print_r($call); echo \"\\r\\n-----------------------------------\\r\\n\"; } function.php &lt;?php require_once dir(__DIR__).'DocParser.php'; /** * è§£ædoc * ä¸‹é¢çš„DocParserFactoryæ˜¯å¯¹å…¶çš„è¿›ä¸€æ­¥å°è£…ï¼Œæ¯æ¬¡è§£ææ—¶ï¼Œå¯ä»¥å‡å°‘åˆå§‹åŒ–DocParserçš„æ¬¡æ•° * * @param $php_doc_comment * @return array */ function parse_doc($php_doc_comment) { $p = new DocParser (); return $p-&gt;parse ( $php_doc_comment ); } /** * Class DocParserFactory è§£ædoc * * @example * DocParserFactory::getInstance()-&gt;parse($doc); */ class DocParserFactory{ private static $p; private function DocParserFactory(){ } public static function getInstance(){ if(self::$p == null){ self::$p = new DocParser (); } return self::$p; } } TestClass.php &lt;?php /** * A test class åœ¨æ­¤å¤„ä¸èƒ½æ·»åŠ @ur,@param,@return æ³¨é‡Š * å¦‚æœè¦å°†ç±»çš„æ³¨é‡Šå’Œæ–¹æ³•çš„æ³¨é‡Šåˆå¹¶çš„è¯ï¼Œæ·»åŠ äº†ä¸Šé¢çš„æ³¨é‡Šï¼Œä¼šå°†æ–¹æ³•ä¸­çš„æ³¨é‡Šç»™è¦†ç›–æ‰ */ class TestClass { /** * @desc è·å–publicæ–¹æ³• * * @url GET pnrs * @param array $request_data * @return int id */ public function getPublicMethod($no_default,$add_time = '0000-00-00') { echo \"public\"; } /** * @desc è·å–privateæ–¹æ³• * * @url GET private_test * @return int id */ private function getPrivateMethod($no_default,$time = '0000-00-00') { echo \"private\"; } /** * @desc è·å–protectedæ–¹æ³• * * @url GET protected_test * @param $no_defalut,$time * @return int id */ protected function getProtectedMethod($no_default,$time = '0000-00-00') { echo \"protected\"; } } DocParser.php è¯¥ç±»æºè‡ªä¸€ä¸ªå¼€æºé¡¹ç›® &lt;?php /** * Parses the PHPDoc comments for metadata. Inspired by Documentor code base * @category Framework * @package restler * @subpackage helper * @author Murray Picton &lt;info@murraypicton.com&gt; * @author R.Arul Kumaran &lt;arul@luracast.com&gt; * @copyright 2010 Luracast * @license http://www.gnu.org/licenses/ GNU General Public License * @link https://github.com/murraypicton/Doqumentor */ class DocParser { private $params = array (); function parse($doc = '') { if ($doc == '') { return $this-&gt;params; } // Get the comment if (preg_match ( '#^/\\*\\*(.*)\\*/#s', $doc, $comment ) === false) return $this-&gt;params; $comment = trim ( $comment [1] ); // Get all the lines and strip the * from the first character if (preg_match_all ( '#^\\s*\\*(.*)#m', $comment, $lines ) === false) return $this-&gt;params; $this-&gt;parseLines ( $lines [1] ); return $this-&gt;params; } private function parseLines($lines) { foreach ( $lines as $line ) { $parsedLine = $this-&gt;parseLine ( $line ); // Parse the line if ($parsedLine === false &amp;&amp; ! isset ( $this-&gt;params ['description'] )) { if (isset ( $desc )) { // Store the first line in the short description $this-&gt;params ['description'] = implode ( PHP_EOL, $desc ); } $desc = array (); } elseif ($parsedLine !== false) { $desc [] = $parsedLine; // Store the line in the long description } } $desc = implode ( ' ', $desc ); if (! empty ( $desc )) $this-&gt;params ['long_description'] = $desc; } private function parseLine($line) { // trim the whitespace from the line $line = trim ( $line ); if (empty ( $line )) return false; // Empty line if (strpos ( $line, '@' ) === 0) { if (strpos ( $line, ' ' ) &gt; 0) { // Get the parameter name $param = substr ( $line, 1, strpos ( $line, ' ' ) - 1 ); $value = substr ( $line, strlen ( $param ) + 2 ); // Get the value } else { $param = substr ( $line, 1 ); $value = ''; } // Parse the line and return false if the parameter is valid if ($this-&gt;setParam ( $param, $value )) return false; } return $line; } private function setParam($param, $value) { if ($param == 'param' || $param == 'return') $value = $this-&gt;formatParamOrReturn ( $value ); if ($param == 'class') list ( $param, $value ) = $this-&gt;formatClass ( $value ); if (empty ( $this-&gt;params [$param] )) { $this-&gt;params [$param] = $value; } else if ($param == 'param') { $arr = array ( $this-&gt;params [$param], $value ); $this-&gt;params [$param] = $arr; } else { $this-&gt;params [$param] = $value + $this-&gt;params [$param]; } return true; } private function formatClass($value) { $r = preg_split ( \"[\\(|\\)]\", $value ); if (is_array ( $r )) { $param = $r [0]; parse_str ( $r [1], $value ); foreach ( $value as $key =&gt; $val ) { $val = explode ( ',', $val ); if (count ( $val ) &gt; 1) $value [$key] = $val; } } else { $param = 'Unknown'; } return array ( $param, $value ); } private function formatParamOrReturn($string) { $pos = strpos ( $string, ' ' ); $type = substr ( $string, 0, $pos ); return '(' . $type . ')' . substr ( $string, $pos + 1 ); } }","link":"/2020/05/24/php/%E5%B7%A5%E5%85%B7/php%E5%8F%8D%E5%B0%84%E8%8E%B7%E5%8F%96%E7%B1%BB%E5%92%8C%E6%96%B9%E6%B3%95%E4%B8%AD%E7%9A%84%E6%B3%A8%E9%87%8A/"},{"title":"Vueä¹‹Mixins(æ··å…¥)","text":"","link":"/2020/05/09/web/vue/Vue%E4%B9%8BMixins(%E6%B7%B7%E5%85%A5)/"},{"title":"æŒ‰ä½ä¸‰ç§’çš„äº‹ä»¶","text":"12@touchstart.prevent=&quot;touchin(i, $event)&quot;@touchend.prevent=&quot;cleartime()&quot; 12345678910111213141516171819202122232425262728293031323334// 500è¡¨ç¤ºè§¦å±æ—¶é—´ï¼Œå¯ä»¥æ ¹æ®å®é™…æƒ…å†µå†™ï¼Œåªè¦è¾¾åˆ°è¿™ä¸ªæ—¶é—´å°±ä¼šè§¦å‘setTimeouté‡Œçš„äº‹ä»¶// åˆ é™¤å›¾ç‰‡æ–¹æ³•touchin(index, obj){ var _self=this; this.Loop = setTimeout(function() { _self.Loop = 0; //æ‰§è¡Œé•¿æŒ‰è¦æ‰§è¡Œçš„å†…å®¹ï¼Œå¦‚å¼¹å‡ºèœå• wx.showModal({ title: 'æç¤º', content: 'ç¡®è®¤åˆ é™¤å›¾ç‰‡', success: function (res) { if (res.confirm) { // åˆ é™¤æ“ä½œ _self.images_list.splice(index, 1); } else if (res.cancel) { // å–æ¶ˆæ“ä½œ } } }); }, 500); return false;},// è§¦å±ç¦»å¼€çš„äº‹ä»¶cleartime(index) { var that=this; clearTimeout(this.Loop); if(that.Loop!=0){ //è¿™é‡Œå†™è¦æ‰§è¡Œçš„å†…å®¹ï¼ˆå°¤å¦‚onclickäº‹ä»¶ï¼‰ // that.previewPicture(index) } return false;},","link":"/2020/05/09/web/%E4%BA%8B%E4%BB%B6/js%E9%95%BF%E6%8C%893%E7%A7%92%E8%A7%A6%E5%8F%91%E4%BA%8B%E4%BB%B6/"},{"title":"Vueä½¿ç”¨æ’ä»¶Xlsxå¯¼å…¥æ•°æ®","text":"å‰å°ä½¿ç”¨æ’ä»¶ Xlsx å¯¼å…¥æ•°æ® å®‰è£…1npm install xlsx ä½¿ç”¨è·å–å¯¼å…¥æ•°æ® æ¨¡æ¿ 12345678910111213&lt;div class=\"upload-demo\"&gt; &lt;el-upload class=\"upload-demo\" drag action=\"/\" :on-change=\"importExcel\" :auto-upload=\"false\" multiple&gt; &lt;i class=\"el-icon-upload\"&gt;&lt;/i&gt; &lt;div class=\"el-upload__text\"&gt;å°†æ–‡ä»¶æ‹–åˆ°æ­¤å¤„ï¼Œæˆ–&lt;em&gt;ç‚¹å‡»ä¸Šä¼ &lt;/em&gt;&lt;/div&gt; &lt;/el-upload&gt; &lt;el-button @click=\"uploadXlsx\" type=\"primary\"&gt;ç¡®è®¤ä¸Šä¼ &lt;/el-button&gt;&lt;/div&gt; methodsæ–¹æ³•é‡Œ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546importExcel(file) { // let file = file.files[0] // ä½¿ç”¨åŸå§‹çš„inputæ–¹æ³•éœ€è¦åŠ ä¸Šè¿™ä¸€æ­¥ const types = file.name.split('.')[1] console.log(types); const fileType = ['xlsx', 'xlc', 'xlm', 'xls', 'xlt', 'xlw', 'csv'].some(item =&gt; item === types) if (!fileType) { this.$message('æ ¼å¼é”™è¯¯ï¼è¯·é‡æ–°é€‰æ‹©') return } this.file2Xce(file).then(tabJson =&gt; { if (tabJson &amp;&amp; tabJson.length &gt; 0) { this.XlsxJson = tabJson console.log('æ•°æ®:', this.XlsxJson) // XlsxJsonå°±æ˜¯è§£æå‡ºæ¥çš„jsonæ•°æ®,æ•°æ®æ ¼å¼å¦‚ä¸‹ // [ // { // sheetName: sheet1 // sheet: sheetData // } // ] } }) }, file2Xce(file) { return new Promise(function(resolve, reject) { const reader = new FileReader() reader.onload = function(e) { const data = e.target.result this.wb = Xlsx.read(data, { type: 'binary' }) const result = [] this.wb.SheetNames.forEach((sheetName) =&gt; { result.push({ sheetName: sheetName, sheet: Xlsx.utils.sheet_to_json(this.wb.Sheets[sheetName]) }) }) resolve(result) } reader.readAsBinaryString(file.raw) // reader.readAsBinaryString(file) //ä½¿ç”¨åŸå§‹inputæ–¹æ³• }) }, æ‰“å°çš„å€¼","link":"/2020/06/30/web/vue/Vue%E4%BD%BF%E7%94%A8%E6%8F%92%E4%BB%B6Xlsx%E5%AF%BC%E5%85%A5%E6%95%B0%E6%8D%AE/"},{"title":"vuexçŠ¶æ€ç®¡ç†åŸºç¡€è¯¦æƒ…","text":"ä¸€ï¼ŒVuex çŠ¶æ€çŠ¶æ€ç®¡ç†1.1 ä»€ä¹ˆæ˜¯ vuex çŠ¶æ€çŠ¶æ€ç®¡ç† Vuex æ˜¯ä¸€ä¸ªä¸“ä¸º Vue.js åº”ç”¨ç¨‹åºå¼€å‘çš„çŠ¶æ€ç®¡ç†æ¨¡å¼ã€‚å®ƒé‡‡ç”¨é›†ä¸­å¼å­˜å‚¨ç®¡ç†åº”ç”¨çš„æ‰€æœ‰ç»„ä»¶çš„çŠ¶æ€ï¼Œå¹¶ä»¥ç›¸åº”çš„è§„åˆ™ä¿è¯çŠ¶æ€ä»¥ä¸€ç§å¯é¢„æµ‹çš„æ–¹å¼å‘ç”Ÿå˜åŒ–ã€‚Vuex ä¹Ÿé›†æˆåˆ° Vue çš„å®˜æ–¹è°ƒè¯•å·¥å…· devtools extensionï¼Œæä¾›äº†è¯¸å¦‚é›¶é…ç½®çš„ time-travel è°ƒè¯•ã€çŠ¶æ€å¿«ç…§å¯¼å…¥å¯¼å‡ºç­‰é«˜çº§è°ƒè¯•åŠŸèƒ½ 1.2 ä¸ºä»€ä¹ˆè¦ä½¿ç”¨vuex è§£å†³äº†ä»€ä¹ˆéš¾é¢˜ äºŒï¼ŒVuexåŸºç¡€ä¸‰ï¼Œæ€ä¹ˆä½¿ç”¨Vuexå››ï¼Œæ³¨æ„äº‹é¡¹","link":"/2020/04/16/web/vue/Vue%E4%B9%8Bvuex%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E5%9F%BA%E7%A1%80%E6%B7%B1%E5%85%A5/"},{"title":"es6çŸ¥è¯†ç‚¹","text":"å˜é‡å­—ç¬¦ä¸²æ•°ç»„å¯¹è±¡","link":"/2020/05/10/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80/es6/es6%E7%9F%A5%E8%AF%86%E7%82%B9/"},{"title":"å°ç¨‹åºç™»å½•æµç¨‹","text":"å…ˆæ”¾ä¸€å¼ å°ç¨‹åºå®˜æ–¹ç™»å½•æµç¨‹æ—¶åºå‹å‹æƒŠ ç¬¬ä¸€æ­¥ï¼š å‰ç«¯ wx.login è·å–code ç¬¬äºŒæ­¥ï¼š å‰ç«¯ é€šè¿‡buttonæŒ‰é’®è·å– iv å’Œ encryptedData 123&lt;button open-type=&quot;getUserInfo&quot; bindgetuserinfo=&quot;bindGetUserInfo&quot; lang=&quot;zh_CN&quot; type=&quot;primary&quot;&gt; æˆæƒç™»å½•&lt;/button&gt; ç¬¬ä¸‰æ­¥ï¼šå‰ç«¯ wx.request æºå¸¦ code, iv, encryptedData è¯·æ±‚æ¥å£ï¼ŒæœåŠ¡å™¨ç«¯ æ‹¿å»code è¯·æ±‚å¾®ä¿¡æ¥å£ æ¢å– openid ,session_key ç¬¬å››æ­¥ï¼šæœåŠ¡ç«¯ æŸ¥çœ‹æ•°æ®åº“æ˜¯å¦å­˜åœ¨ç”¨æˆ·ï¼Œä¸å­˜åœ¨æ—¶ç”¨session_keyè¿›è¡Œè§£å¯†ï¼ˆå¾—åˆ°ç”¨æˆ·ä¿¡æ¯ï¼‰ï¼Œå­˜åœ¨æ—¶ç›´æ¥æ‰§è¡Œç¬¬äº”æ­¥ ç¬¬äº”æ­¥ï¼šæœåŠ¡ç«¯ç”Ÿäº§tokenè¿”å›ç»™å‰ç«¯ ç¬¬å…­æ­¥ï¼šå‰ç«¯å¤„ç†tokenå’Œç™»å½•çŠ¶æ€ æˆ‘çš„ç®€çº¦æ€ç»´å¯¼å›¾ å‰ç«¯ç™»å½•çŠ¶æ€åŠtokenå­˜å‚¨More info: Writing","link":"/2020/05/09/web/%E5%B0%8F%E7%A8%8B%E5%BA%8F/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E7%99%BB%E5%BD%95%E6%B5%81%E7%A8%8B/"},{"title":"constå¸¸é‡åŸºç¡€è¯¦è§£","text":"ä»€ä¹ˆæ˜¯constå¸¸é‡å®šä¹‰å¸¸é‡,å¸¸é‡å°±æ˜¯ä¸å˜çš„å€¼ï¼Œç”¨åœ¨å‡½æ•°ï¼Œå˜é‡ï¼Œæ•°ç»„ï¼ŒæŒ‡é’ˆç±»å‹è¯´æ˜å‰ï¼ˆå¦‚ï¼šconst int a=10;ï¼‰è¡¨ç¤ºçš„aå€¼æ°¸è¿œæ˜¯10. constè¯¦ç»†å£°æ˜constconstå£°æ˜ä¸€ä¸ªåªè¯»çš„å¸¸é‡ã€‚ä¸€æ—¦å£°æ˜ï¼Œå¸¸é‡çš„å€¼å°±ä¸èƒ½æ”¹å˜ã€‚ 12345const PI = 3.1415;PI // 3.1415PI = 3;// TypeError: Assignment to constant variable. ä¸Šé¢ä»£ç è¡¨æ˜æ”¹å˜å¸¸é‡çš„å€¼ä¼šæŠ¥é”™ã€‚ constå£°æ˜çš„å˜é‡ä¸å¾—æ”¹å˜å€¼ï¼Œè¿™æ„å‘³ç€ï¼Œconstä¸€æ—¦å£°æ˜å˜é‡ï¼Œå°±å¿…é¡»ç«‹å³åˆå§‹åŒ–ï¼Œä¸èƒ½ç•™åˆ°ä»¥åèµ‹å€¼ã€‚ 12const foo;// SyntaxError: Missing initializer in const declaration ä¸Šé¢ä»£ç è¡¨ç¤ºï¼Œå¯¹äºconstæ¥è¯´ï¼Œåªå£°æ˜ä¸èµ‹å€¼ï¼Œå°±ä¼šæŠ¥é”™ã€‚ constçš„ä½œç”¨åŸŸä¸letå‘½ä»¤ç›¸åŒï¼šåªåœ¨å£°æ˜æ‰€åœ¨çš„å—çº§ä½œç”¨åŸŸå†…æœ‰æ•ˆã€‚ 12345if (true) { const MAX = 5; }MAX // Uncaught ReferenceError: MAX is not defined constå‘½ä»¤å£°æ˜çš„å¸¸é‡ä¹Ÿæ˜¯ä¸æå‡ï¼ŒåŒæ ·å­˜åœ¨æš‚æ—¶æ€§æ­»åŒºï¼Œåªèƒ½åœ¨å£°æ˜çš„ä½ç½®åé¢ä½¿ç”¨ã€‚ 1234if (true) { console.log(MAX); // ReferenceError const MAX = 5;} ä¸Šé¢ä»£ç åœ¨å¸¸é‡MAXå£°æ˜ä¹‹å‰å°±è°ƒç”¨ï¼Œç»“æœæŠ¥é”™ã€‚ constå£°æ˜çš„å¸¸é‡ï¼Œä¹Ÿä¸letä¸€æ ·ä¸å¯é‡å¤å£°æ˜ã€‚ 123456var message = \"Hello!\";let age = 25;// ä»¥ä¸‹ä¸¤è¡Œéƒ½ä¼šæŠ¥é”™const message = \"Goodbye!\";const age = 30; å¯¹äºå¤åˆç±»å‹çš„å˜é‡ï¼Œå˜é‡åä¸æŒ‡å‘æ•°æ®ï¼Œè€Œæ˜¯æŒ‡å‘æ•°æ®æ‰€åœ¨çš„åœ°å€ã€‚constå‘½ä»¤åªæ˜¯ä¿è¯å˜é‡åæŒ‡å‘çš„åœ°å€ä¸å˜ï¼Œå¹¶ä¸ä¿è¯è¯¥åœ°å€çš„æ•°æ®ä¸å˜ï¼Œæ‰€ä»¥å°†ä¸€ä¸ªå¯¹è±¡å£°æ˜ä¸ºå¸¸é‡å¿…é¡»éå¸¸å°å¿ƒã€‚ 123456const foo = {};foo.prop = 123;foo.prop// 123foo = {}; // TypeError: \"foo\" is read-only ä¸Šé¢ä»£ç ä¸­ï¼Œå¸¸é‡ foo å‚¨å­˜çš„æ˜¯ä¸€ä¸ªåœ°å€ï¼Œè¿™ä¸ªåœ°å€æŒ‡å‘ä¸€ä¸ªå¯¹è±¡ã€‚ä¸å¯å˜çš„åªæ˜¯è¿™ä¸ªåœ°å€ï¼Œå³ä¸èƒ½æŠŠ foo æŒ‡å‘å¦ä¸€ä¸ªåœ°å€ï¼Œä½†å¯¹è±¡æœ¬èº«æ˜¯å¯å˜çš„ï¼Œæ‰€ä»¥ä¾ç„¶å¯ä»¥ä¸ºå…¶æ·»åŠ æ–°å±æ€§ã€‚ ä¸‹é¢æ˜¯å¦ä¸€ä¸ªä¾‹å­ã€‚ 1234const a = [];a.push('Hello'); // å¯æ‰§è¡Œa.length = 0; // å¯æ‰§è¡Œa = ['Dave']; // æŠ¥é”™ ä¸Šé¢ä»£ç ä¸­ï¼Œå¸¸é‡aæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œè¿™ä¸ªæ•°ç»„æœ¬èº«æ˜¯å¯å†™çš„ï¼Œä½†æ˜¯å¦‚æœå°†å¦ä¸€ä¸ªæ•°ç»„èµ‹å€¼ç»™aï¼Œå°±ä¼šæŠ¥é”™ã€‚å¦‚æœçœŸçš„æƒ³å°†å¯¹è±¡å†»ç»“ï¼Œåº”è¯¥ä½¿ç”¨Object.freezeæ–¹æ³•ã€‚ 1234const foo = Object.freeze({});// å¸¸è§„æ¨¡å¼æ—¶ï¼Œä¸‹é¢ä¸€è¡Œä¸èµ·ä½œç”¨ï¼›// ä¸¥æ ¼æ¨¡å¼æ—¶ï¼Œè¯¥è¡Œä¼šæŠ¥é”™foo.prop = 123; ä¸Šé¢ä»£ç ä¸­ï¼Œå¸¸é‡fooæŒ‡å‘ä¸€ä¸ªå†»ç»“çš„å¯¹è±¡ï¼Œæ‰€ä»¥æ·»åŠ æ–°å±æ€§ä¸èµ·ä½œç”¨ï¼Œä¸¥æ ¼æ¨¡å¼æ—¶è¿˜ä¼šæŠ¥é”™ã€‚ é™¤äº†å°†å¯¹è±¡æœ¬èº«å†»ç»“ï¼Œå¯¹è±¡çš„å±æ€§ä¹Ÿåº”è¯¥å†»ç»“ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªå°†å¯¹è±¡å½»åº•å†»ç»“çš„å‡½æ•°ã€‚ 12345678var constantize = (obj) =&gt; { Object.freeze(obj); Object.keys(obj).forEach( (key, value) =&gt; { if ( typeof obj[key] === 'object' ) { constantize( obj[key] ); } });}; ES5åªæœ‰ä¸¤ç§å£°æ˜å˜é‡çš„æ–¹æ³•ï¼švarå‘½ä»¤å’Œfunctionå‘½ä»¤ã€‚ES6é™¤äº†æ·»åŠ letå’Œconstå‘½ä»¤ï¼Œåé¢ç« èŠ‚è¿˜ä¼šæåˆ°ï¼Œå¦å¤–ä¸¤ç§å£°æ˜å˜é‡çš„æ–¹æ³•ï¼šimportå‘½ä»¤å’Œclasså‘½ä»¤ã€‚æ‰€ä»¥ï¼ŒES6ä¸€å…±æœ‰6ç§å£°æ˜å˜é‡çš„æ–¹æ³•ã€‚ é¡¶å±‚å¯¹è±¡çš„å±æ€§(window)é¡¶å±‚å¯¹è±¡ï¼Œåœ¨æµè§ˆå™¨ç¯å¢ƒæŒ‡çš„æ˜¯ window å¯¹è±¡ï¼Œåœ¨ Node æŒ‡çš„æ˜¯ global å¯¹è±¡ã€‚ES5 ä¹‹ä¸­ï¼Œé¡¶å±‚å¯¹è±¡çš„å±æ€§ä¸å…¨å±€å˜é‡æ˜¯ç­‰ä»·çš„ã€‚ 12345window.a = 1;a // 1a = 2;window.a // 2 ä¸Šé¢ä»£ç ä¸­ï¼Œé¡¶å±‚å¯¹è±¡çš„å±æ€§èµ‹å€¼ä¸å…¨å±€å˜é‡çš„èµ‹å€¼ï¼Œæ˜¯åŒä¸€ä»¶äº‹ã€‚ é¡¶å±‚å¯¹è±¡çš„å±æ€§ä¸å…¨å±€å˜é‡æŒ‚é’©ï¼Œè¢«è®¤ä¸ºæ˜¯ JavaScript è¯­è¨€æœ€å¤§çš„è®¾è®¡è´¥ç¬”ä¹‹ä¸€ã€‚è¿™æ ·çš„è®¾è®¡å¸¦æ¥äº†å‡ ä¸ªå¾ˆå¤§çš„é—®é¢˜ï¼Œé¦–å…ˆæ˜¯æ²¡æ³•åœ¨ç¼–è¯‘æ—¶å°±æŠ¥å‡ºå˜é‡æœªå£°æ˜çš„é”™è¯¯ï¼Œåªæœ‰è¿è¡Œæ—¶æ‰èƒ½çŸ¥é“ï¼ˆå› ä¸ºå…¨å±€å˜é‡å¯èƒ½æ˜¯é¡¶å±‚å¯¹è±¡çš„å±æ€§åˆ›é€ çš„ï¼Œè€Œå±æ€§çš„åˆ›é€ æ˜¯åŠ¨æ€çš„ï¼‰ï¼›å…¶æ¬¡ï¼Œç¨‹åºå‘˜å¾ˆå®¹æ˜“ä¸çŸ¥ä¸è§‰åœ°å°±åˆ›å»ºäº†å…¨å±€å˜é‡ï¼ˆæ¯”å¦‚æ‰“å­—å‡ºé”™ï¼‰ï¼›æœ€åï¼Œé¡¶å±‚å¯¹è±¡çš„å±æ€§æ˜¯åˆ°å¤„å¯ä»¥è¯»å†™çš„ï¼Œè¿™éå¸¸ä¸åˆ©äºæ¨¡å—åŒ–ç¼–ç¨‹ã€‚å¦ä¸€æ–¹é¢ï¼Œwindow å¯¹è±¡æœ‰å®ä½“å«ä¹‰ï¼ŒæŒ‡çš„æ˜¯æµè§ˆå™¨çš„çª—å£å¯¹è±¡ï¼Œé¡¶å±‚å¯¹è±¡æ˜¯ä¸€ä¸ªæœ‰å®ä½“å«ä¹‰çš„å¯¹è±¡ï¼Œä¹Ÿæ˜¯ä¸åˆé€‚çš„ã€‚ ES6 ä¸ºäº†æ”¹å˜è¿™ä¸€ç‚¹ï¼Œä¸€æ–¹é¢è§„å®šï¼Œä¸ºäº†ä¿æŒå…¼å®¹æ€§ï¼Œvarå‘½ä»¤å’Œfunctionå‘½ä»¤å£°æ˜çš„å…¨å±€å˜é‡ï¼Œä¾æ—§æ˜¯é¡¶å±‚å¯¹è±¡çš„å±æ€§ï¼›å¦ä¸€æ–¹é¢è§„å®šï¼Œletå‘½ä»¤ã€constå‘½ä»¤ã€classå‘½ä»¤å£°æ˜çš„å…¨å±€å˜é‡ï¼Œä¸å±äºé¡¶å±‚å¯¹è±¡çš„å±æ€§ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä»ES6å¼€å§‹ï¼Œå…¨å±€å˜é‡å°†é€æ­¥ä¸é¡¶å±‚å¯¹è±¡çš„å±æ€§è„±é’©ã€‚ 1234567var a = 1;// å¦‚æœåœ¨Nodeçš„REPLç¯å¢ƒï¼Œå¯ä»¥å†™æˆglobal.a// æˆ–è€…é‡‡ç”¨é€šç”¨æ–¹æ³•ï¼Œå†™æˆthis.awindow.a // 1let b = 1;window.b // undefined ä¸Šé¢ä»£ç ä¸­ï¼Œå…¨å±€å˜é‡ a ç”±varå‘½ä»¤å£°æ˜ï¼Œæ‰€ä»¥å®ƒæ˜¯é¡¶å±‚å¯¹è±¡çš„å±æ€§ï¼›å…¨å±€å˜é‡ b ç”±let å‘½ä»¤å£°æ˜ï¼Œæ‰€ä»¥å®ƒä¸æ˜¯é¡¶å±‚å¯¹è±¡çš„å±æ€§ï¼Œè¿”å›undefinedã€‚ global å¯¹è±¡ES5çš„é¡¶å±‚å¯¹è±¡ï¼Œæœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªé—®é¢˜ï¼Œå› ä¸ºå®ƒåœ¨å„ç§å®ç°é‡Œé¢æ˜¯ä¸ç»Ÿä¸€çš„ã€‚ æµè§ˆå™¨é‡Œé¢ï¼Œé¡¶å±‚å¯¹è±¡æ˜¯windowï¼Œä½† Node å’Œ Web Worker æ²¡æœ‰windowã€‚ æµè§ˆå™¨å’Œ Web Worker é‡Œé¢ï¼Œselfä¹ŸæŒ‡å‘é¡¶å±‚å¯¹è±¡ï¼Œä½†æ˜¯Nodeæ²¡æœ‰selfã€‚ Node é‡Œé¢ï¼Œé¡¶å±‚å¯¹è±¡æ˜¯globalï¼Œä½†å…¶ä»–ç¯å¢ƒéƒ½ä¸æ”¯æŒã€‚ åŒä¸€æ®µä»£ç ä¸ºäº†èƒ½å¤Ÿåœ¨å„ç§ç¯å¢ƒï¼Œéƒ½èƒ½å–åˆ°é¡¶å±‚å¯¹è±¡ï¼Œç°åœ¨ä¸€èˆ¬æ˜¯ä½¿ç”¨thiså˜é‡ï¼Œä½†æ˜¯æœ‰å±€é™æ€§ã€‚ å…¨å±€ç¯å¢ƒä¸­,thisä¼šè¿”å›é¡¶å±‚å¯¹è±¡ã€‚ä½†æ˜¯ï¼ŒNode æ¨¡å—å’Œ ES6 æ¨¡å—ä¸­ï¼Œthis è¿”å›çš„æ˜¯å½“å‰æ¨¡å—ã€‚ å‡½æ•°é‡Œé¢çš„this,å¦‚æœå‡½æ•°ä¸æ˜¯ä½œä¸ºå¯¹è±¡çš„æ–¹æ³•è¿è¡Œï¼Œè€Œæ˜¯å•çº¯ä½œä¸ºå‡½æ•°è¿è¡Œï¼Œthisä¼šæŒ‡å‘é¡¶å±‚å¯¹è±¡ã€‚ä½†æ˜¯ï¼Œä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œè¿™æ—¶thisä¼šè¿”å›undefinedã€‚ ä¸ç®¡æ˜¯ä¸¥æ ¼æ¨¡å¼ï¼Œè¿˜æ˜¯æ™®é€šæ¨¡å¼ï¼Œnew Function('return this')()ï¼Œæ€»æ˜¯ä¼šè¿”å›å…¨å±€å¯¹è±¡ã€‚ä½†æ˜¯ï¼Œå¦‚æœæµè§ˆå™¨ç”¨äº†CSPï¼ˆContent Security Policyï¼Œå†…å®¹å®‰å…¨æ”¿ç­–ï¼‰ï¼Œé‚£ä¹ˆevalã€new Functionè¿™äº›æ–¹æ³•éƒ½å¯èƒ½æ— æ³•ä½¿ç”¨ã€‚ ç»¼ä¸Šæ‰€è¿°ï¼Œå¾ˆéš¾æ‰¾åˆ°ä¸€ç§æ–¹æ³•ï¼Œå¯ä»¥åœ¨æ‰€æœ‰æƒ…å†µä¸‹ï¼Œéƒ½å–åˆ°é¡¶å±‚å¯¹è±¡ã€‚ä¸‹é¢æ˜¯ä¸¤ç§å‹‰å¼ºå¯ä»¥ä½¿ç”¨çš„æ–¹æ³•ã€‚ 12345678910111213141516// æ–¹æ³•ä¸€(typeof window !== 'undefined' ? window : (typeof process === 'object' &amp;&amp; typeof require === 'function' &amp;&amp; typeof global === 'object') ? global : this);// æ–¹æ³•äºŒvar getGlobal = function () { if (typeof self !== 'undefined') { return self; }// Web Worker if (typeof window !== 'undefined') { return window; } // windew if (typeof global !== 'undefined') { return global; } // nodeç¯å¢ƒ throw new Error('unable to locate global object');}; ç°åœ¨æœ‰ä¸€ä¸ªææ¡ˆï¼Œåœ¨è¯­è¨€æ ‡å‡†çš„å±‚é¢ï¼Œå¼•å…¥ global ä½œä¸ºé¡¶å±‚å¯¹è±¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨æ‰€æœ‰ç¯å¢ƒä¸‹ï¼Œglobal éƒ½æ˜¯å­˜åœ¨çš„ï¼Œéƒ½å¯ä»¥ä»å®ƒæ‹¿åˆ°é¡¶å±‚å¯¹è±¡ã€‚ å«ç‰‡åº“ system.global æ¨¡æ‹Ÿäº†è¿™ä¸ªææ¡ˆï¼Œå¯ä»¥åœ¨æ‰€æœ‰ç¯å¢ƒæ‹¿åˆ° globalã€‚ 12345// CommonJSçš„å†™æ³•require('system.global/shim')();// ES6æ¨¡å—çš„å†™æ³•import shim from 'system.global/shim'; shim(); ä¸Šé¢ä»£ç å¯ä»¥ä¿è¯å„ç§ç¯å¢ƒé‡Œé¢ï¼Œglobalå¯¹è±¡éƒ½æ˜¯å­˜åœ¨çš„ã€‚ 123456// CommonJSçš„å†™æ³•var global = require('system.global')();// ES6æ¨¡å—çš„å†™æ³•import getGlobal from 'system.global';const global = getGlobal(); ä¸Šé¢ä»£ç å°†é¡¶å±‚å¯¹è±¡æ”¾å…¥å˜é‡globalã€‚ globalThis æä¾›äº†ä¸€ä¸ªæ ‡å‡†çš„æ–¹å¼æ¥è·å–ä¸åŒç¯å¢ƒä¸‹çš„å…¨å±€ this å¯¹è±¡ï¼ˆä¹Ÿå°±æ˜¯å…¨å±€å¯¹è±¡è‡ªèº«ï¼‰ã€‚ä¸åƒ window æˆ–è€… self è¿™äº›å±æ€§ï¼Œå®ƒç¡®ä¿å¯ä»¥åœ¨æœ‰æ— çª—å£çš„å„ç§ç¯å¢ƒä¸‹æ­£å¸¸å·¥ä½œã€‚æ‰€ä»¥ï¼Œä½ å¯ä»¥å®‰å¿ƒçš„ä½¿ç”¨ globalThisï¼Œä¸å¿…æ‹…å¿ƒå®ƒçš„è¿è¡Œç¯å¢ƒã€‚ä¸ºä¾¿äºè®°å¿†ï¼Œä½ åªéœ€è¦è®°ä½ï¼Œå…¨å±€ä½œç”¨åŸŸä¸­çš„ this å°±æ˜¯ globalThisã€‚ æˆ‘çš„æ€»ç»“1.const æœ¬è´¨ï¼šconstå®šä¹‰ä¸€ä¸ªå¸¸é‡ æŒ‡å‘ä¸€ä¸ªå†…å­˜åœ°å€ä¸å˜ï¼Œä½†ä¸èƒ½å½±å“å†…å­˜çš„æ•°æ®å˜åŒ–ï¼ˆæ¯”å¦‚ï¼šå¤åˆå‹å˜é‡(æ•°ç»„ï¼Œå¯¹è±¡)ï¼‰ å’Œletä¸€æ ·æœ‰ æš‚æ—¶æ€§æ­»åŒº,ä¸èƒ½åœ¨å£°æ˜å‰ä½¿ç”¨ æ²¡æœ‰å˜é‡æå‡ 2.é¡¶å±‚å¯¹è±¡å±æ€§ é¡¶å±‚å¯¹è±¡çš„å±æ€§ä¸å…¨å±€å˜é‡æ˜¯ç­‰ä»·çš„ (window) es6æœ‰å£°æ˜å˜é‡çš„æ–¹æ³•ï¼Œä¸¤ç§var,functionå£°æ˜å…¨å±€å˜é‡ï¼Œè¿˜æœ‰let,const,class,import 3.Globalå¯¹è±¡ æµè§ˆå™¨é‡Œé¢é‡Œä½¿ç”¨window web Workerself Node é‡Œä½¿ç”¨global ä¸‰ç§ç¯å¢ƒéƒ½èƒ½ç”¨globalThis","link":"/2020/05/09/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80/es6/const%E5%B8%B8%E9%87%8F%E5%9F%BA%E7%A1%80%E8%AF%A6%E8%A7%A3/"},{"title":"å½»åº•ç†è§£thisæŒ‡å‘","text":"thisï¼šå½“å‰æ‰§è¡Œä»£ç çš„ç¯å¢ƒå¯¹è±¡ï¼Œåœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œæ€»æ˜¯æŒ‡å‘ä¸€ä¸ªå¯¹è±¡ï¼Œåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹å¯ä»¥æ˜¯ä»»æ„å€¼ï¼Œå…·ä½“å®˜æ–¹è¯¦ç»†ä»‹ç» ä½œç”¨ï¼šä¾¿æ·çš„è·å–ä½¿ç”¨æ‰€æŒ‡å‘ç¯å¢ƒçš„â€œå±æ€§â€ï¼Œâ€œæ–¹æ³•â€ å…¨å±€windowåœ¨å…¨å±€ä½œç”¨åŸŸä¸‹ä½¿ç”¨this,å¾—åˆ°çš„æ˜¯é¡¶å±‚å¯¹è±¡window 123this// Window {parent: Window, postMessage: Æ’, blur: Æ’, focus: Æ’, close: Æ’, â€¦}console.log(this === window); // true ç„¶è€Œï¼Œåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œthiså°†ä¿æŒä»–è¿›å…¥æ‰§è¡Œç¯å¢ƒæ—¶çš„å€¼ï¼Œæ‰€ä»¥ä¸‹é¢çš„thiså°†ä¼šé»˜è®¤ä¸ºundefinedã€‚ 123456function f2(){ \"use strict\"; // è¿™é‡Œæ˜¯ä¸¥æ ¼æ¨¡å¼ return this;}f2() === undefined; // true æ‰€ä»¥ï¼Œåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå¦‚æœ this æ²¡æœ‰è¢«æ‰§è¡Œç¯å¢ƒï¼ˆexecution contextï¼‰å®šä¹‰ï¼Œé‚£å®ƒå°†ä¿æŒä¸º undefinedã€‚ è¯·çœ‹ç¬¬5ç‚¹ å‡½æ•°æ™®é€šå‡½æ•°æ™®é€šå‡½æ•°è¿™é‡Œæ˜¯æŒ‡ä½¿ç”¨function å£°æ˜çš„å‡½æ•° 1234567var obj ={ func:function(){ console.log(this) }}obj.func()// VM7926:3 {func: Æ’} ä¸Šé¢ä»£ç å¯ä»¥çœ‹å‡ºæ™®é€šå‡½æ•°thisæŒ‡å‘å½“å‰è°ƒç”¨çš„å¯¹è±¡obj. thiså¯¹è±¡æ˜¯åœ¨è¿è¡Œæ—¶åŸºäºå‡½æ•°çš„æ‰§è¡Œç¯å¢ƒç»‘å®šçš„ï¼šåœ¨å…¨å±€å‡½æ•°ä¸­ï¼ŒthisæŒ‡å‘çš„æ˜¯windowï¼›å½“å‡½æ•°è¢«ä½œä¸ºæŸä¸ªå¯¹è±¡çš„æ–¹æ³•è°ƒç”¨æ—¶ï¼Œthiså°±ç­‰äºé‚£ä¸ªå¯¹è±¡ã€‚ é—­åŒ…å‡½æ•°thisæŒ‡å‘retrunå‡ºæ¥å‡½æ•°çš„æ‰§è¡Œç¯å¢ƒ 12345678910111213141516171819var name = \"window\";var object = { name : \"object\", getNameFunc : function(){ return function(){ return this.name; }; }};var obj = { name : \"obj\", getNameFunc : object.getNameFunc()};function foo() { return this.name;}console.log(foo());//Windowconsole.log(object.getNameFunc()()); //Windowconsole.log(obj.getNameFunc());//obj é—­åŒ…å‡½æ•°æ— æ³•ç›´æ¥è®¿é—®åŒ…å«ä»–çš„å‡½æ•°çš„thiså¯¹è±¡, å› ä¸ºäºŒè€…çš„thisæŒ‡å‘æ˜¯ä¸ä¸€æ ·çš„,å¤–éƒ¨å‡½æ•°çš„thisæŒ‡å‘è°ƒç”¨ä»–çš„å¯¹è±¡, é—­åŒ…å†…éƒ¨å‡½æ•°çš„thisæŒ‡å‘äº†å…¨å±€å¯¹è±¡, å…¶å®å¹¶ä¸éš¾ç†è§£.å®é™…ä¸Š, å½“è°ƒç”¨object.getNameFunc()æ—¶, å°±åƒå…¨å±€å¯¹è±¡è¿”å›äº†ä¸€ä¸ªå‡½æ•°, è¿”å›çš„è¿™ä¸ªå‡½æ•°å’Œfooå‡½æ•°å…¶å®å¹¶æ— ä¸¤æ ·.åœ¨å…¨å±€ä¸­è°ƒç”¨è¿™ä¸ªè¿”å›çš„å‡½æ•°æ—¶, å‡½æ•°çš„thisè‡ªç„¶å°±æŒ‡å‘äº†å…¨å±€å¯¹è±¡, å°±å¥½åƒè°ƒç”¨fooå‡½æ•°ä¸€æ ·. è€Œå½“object.getNameFunc()åœ¨objå†…éƒ¨æ—¶, è¿”å›çš„é—­åŒ…å‡½æ•°å°±æˆäº†obj çš„å±æ€§, æ­¤æ—¶é—­åŒ…å‡½æ•°çš„thiså°±æŒ‡å‘äº†objå¯¹è±¡. ç®­å¤´å‡½æ•°ç®­å¤´å‡½æ•°ä¸­thisæŒ‡å‘å½“å‰å°é—­ç¯å¢ƒï¼Œåœ¨å…¨å±€ä»£ç ä¸­ï¼Œå®ƒå°†è¢«è®¾ç½®ä¸ºå…¨å±€å¯¹è±¡ 1234567891011121314var object = { name: \"object\", getNameFunc: function() { return ()=&gt;{ return this.name; }; }};var obj = { name : \"obj\", getNameFunc : object.getNameFunc()};console.log(object.getNameFunc()()); //objectconsole.log(obj.getNameFunc());//object ä¸Šé¢ä»£ç çœ‹å‡ºï¼Œthisä¸€ç›´æŒ‡å‘çš„æ˜¯objectè¿™ä¸ªå°é—­çš„è¯æ³•ç¯å¢ƒ æ„é€ å‡½æ•°è¿™ä¸ªå°±ä¸åšå¤ªå¤šè§£é‡Šäº†ï¼Œå½“ä¸€ä¸ªå‡½æ•°ç”¨ä½œæ„é€ å‡½æ•°æ—¶ï¼ˆä½¿ç”¨newå…³é”®å­—ï¼‰ï¼Œå®ƒçš„thisè¢«ç»‘å®šåˆ°æ­£åœ¨æ„é€ çš„æ–°å¯¹è±¡ï¼Œä¸äº†è§£çœ‹å®˜æ–¹ä»‹ç» åŸå‹é“¾ä¸­çš„ thiså¯¹äºåœ¨å¯¹è±¡åŸå‹é“¾ä¸ŠæŸå¤„å®šä¹‰çš„æ–¹æ³•ï¼ŒåŒæ ·çš„æ¦‚å¿µä¹Ÿé€‚ç”¨ã€‚å¦‚æœè¯¥æ–¹æ³•å­˜åœ¨äºä¸€ä¸ªå¯¹è±¡çš„åŸå‹é“¾ä¸Šï¼Œé‚£ä¹ˆthisæŒ‡å‘çš„æ˜¯è°ƒç”¨è¿™ä¸ªæ–¹æ³•çš„å¯¹è±¡ï¼Œå°±åƒè¯¥æ–¹æ³•åœ¨å¯¹è±¡ä¸Šä¸€æ ·ã€‚ 12345678910var o = { f: function() { return this.a + this.b; }};var p = Object.create(o);p.a = 1;p.b = 4;console.log(p.f()); // 5 æ›´æ¢ç»‘å®šç¯å¢ƒæŠŠ this çš„å€¼ä»ä¸€ä¸ªç¯å¢ƒä¼ åˆ°å¦ä¸€ä¸ªç¯å¢ƒ call å’Œ apply12345678910var obj = {a: 'Custom'};// è¿™ä¸ªå±æ€§æ˜¯åœ¨globalå¯¹è±¡å®šä¹‰çš„ã€‚var a = 'Global';function whatsThis(arg) { return this.a; // thisçš„å€¼å–å†³äºå‡½æ•°çš„è°ƒç”¨æ–¹å¼}whatsThis(); // 'Global'whatsThis.call(obj, 'is_a'); // 'Custom'whatsThis.apply(obj, ['is_a']); // 'Custom' apply å’Œ call çš„å·®åˆ«åªæ˜¯å‚æ•°ä¼ é€’æ–¹å¼ä¸ä¸€æ · bindes5å°±åŠ å…¥äº†æ”¹æ–¹æ³•ï¼ŒåŒæ ·æ˜¯æ›´æ”¹thisæŒ‡å‘ç¯å¢ƒï¼Œä¸è¿‡bind æ˜¯è°ƒç”¨f.bind(someObject)ä¼šåˆ›å»ºä¸€ä¸ªä¸få…·æœ‰ç›¸åŒå‡½æ•°ä½“å’Œä½œç”¨åŸŸçš„å‡½æ•°ï¼Œä½†æ˜¯åœ¨è¿™ä¸ªæ–°å‡½æ•°ä¸­ï¼Œthiså°†æ°¸ä¹…åœ°è¢«ç»‘å®šåˆ°äº†bindçš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œæ— è®ºè¿™ä¸ªå‡½æ•°æ˜¯å¦‚ä½•è¢«è°ƒç”¨çš„ 123456789101112function f(){ return this.a;}var g = f.bind({a:\"azerty\"});console.log(g()); // azertyvar h = g.bind({a:'yoo'}); // bindåªç”Ÿæ•ˆä¸€æ¬¡ï¼console.log(h()); // azertyvar o = {a:37, f:f, g:g, h:h};console.log(o.a, o.f(), o.g(), o.h()); // 37, 37, azerty, azerty","link":"/2020/05/06/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80/es6/this%E6%8C%87%E9%92%88%E6%8C%87%E5%90%91/"},{"title":"letå’ŒvaråŸºç¡€è¯¦è§£","text":"letæ˜¯ä»€ä¹ˆ ES6æ–°å¢äº†letå‘½ä»¤ï¼Œç”¨æ¥å£°æ˜å˜é‡ã€‚å®ƒçš„ç”¨æ³•ç±»ä¼¼äºvarï¼Œä½†æ˜¯æ‰€å£°æ˜çš„å˜é‡ï¼Œåªåœ¨letå‘½ä»¤æ‰€åœ¨çš„ä»£ç å—å†…æœ‰æ•ˆã€‚ 123456{ let a = 10; var b = 1;}console.log(a) // ReferenceError: a is not defined.console.log(b) // 1 ä¸Šé¢ä»£ç åœ¨ä»£ç å—ä¹‹ä¸­ï¼Œåˆ†åˆ«ç”¨letå’Œvarå£°æ˜äº†ä¸¤ä¸ªå˜é‡ã€‚ç„¶ååœ¨ä»£ç å—ä¹‹å¤–è°ƒç”¨è¿™ä¸¤ä¸ªå˜é‡ï¼Œç»“æœletå£°æ˜çš„å˜é‡æŠ¥é”™ï¼Œvarå£°æ˜çš„å˜é‡è¿”å›äº†æ­£ç¡®çš„å€¼ã€‚è¿™è¡¨æ˜ï¼Œletå£°æ˜çš„å˜é‡åªåœ¨å®ƒæ‰€åœ¨çš„ä»£ç å—æœ‰æ•ˆã€‚ forå¾ªç¯çš„è®¡æ•°å™¨ï¼Œå°±å¾ˆåˆé€‚ä½¿ç”¨letå‘½ä»¤ã€‚ 1234for (let i = 0; i &lt; 10; i++) {}console.log(i);//ReferenceError: i is not defined ä¸Šé¢ä»£ç ä¸­ï¼Œè®¡æ•°å™¨iåªåœ¨forå¾ªç¯ä½“å†…æœ‰æ•ˆï¼Œåœ¨å¾ªç¯ä½“å¤–å¼•ç”¨å°±ä¼šæŠ¥é”™ã€‚ ä¸‹é¢çš„ä»£ç å¦‚æœä½¿ç”¨varï¼Œæœ€åè¾“å‡ºçš„æ˜¯10ã€‚ 1234567var a = [];for (var i = 0; i &lt; 10; i++) { a[i] = function () { console.log(i); };}a[6](); // 10 ä¸Šé¢ä»£ç ä¸­ï¼Œå˜é‡iæ˜¯varå£°æ˜çš„ï¼Œåœ¨å…¨å±€èŒƒå›´å†…éƒ½æœ‰æ•ˆã€‚æ‰€ä»¥æ¯ä¸€æ¬¡å¾ªç¯ï¼Œæ–°çš„iå€¼éƒ½ä¼šè¦†ç›–æ—§å€¼ï¼Œå¯¼è‡´æœ€åè¾“å‡ºçš„æ˜¯æœ€åä¸€è½®çš„içš„å€¼ã€‚ å¦‚æœä½¿ç”¨letï¼Œå£°æ˜çš„å˜é‡ä»…åœ¨å—çº§ä½œç”¨åŸŸå†…æœ‰æ•ˆï¼Œæœ€åè¾“å‡ºçš„æ˜¯6ã€‚ 1234567var a = [];for (let i = 0; i &lt; 10; i++) { a[i] = function () { console.log(i); };}a[6](); // 6 ä¸Šé¢ä»£ç ä¸­ï¼Œå˜é‡iæ˜¯letå£°æ˜çš„ï¼Œå½“å‰çš„iåªåœ¨æœ¬è½®å¾ªç¯æœ‰æ•ˆï¼Œæ‰€ä»¥æ¯ä¸€æ¬¡å¾ªç¯çš„iå…¶å®éƒ½æ˜¯ä¸€ä¸ªæ–°çš„å˜é‡ï¼Œæ‰€ä»¥æœ€åè¾“å‡ºçš„æ˜¯6ã€‚ ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å®ƒä¸å­˜åœ¨å˜é‡æå‡letä¸åƒvaré‚£æ ·ä¼šå‘ç”Ÿâ€œå˜é‡æå‡â€ç°è±¡ã€‚æ‰€ä»¥ï¼Œå˜é‡ä¸€å®šè¦åœ¨å£°æ˜åä½¿ç”¨ï¼Œå¦åˆ™æŠ¥é”™ã€‚ 12345console.log(foo); // è¾“å‡ºundefinedconsole.log(bar); // æŠ¥é”™ReferenceErrorvar foo = 2;let bar = 2; ä¸Šé¢ä»£ç ä¸­ï¼Œå˜é‡fooç”¨varå‘½ä»¤å£°æ˜ï¼Œä¼šå‘ç”Ÿå˜é‡æå‡ï¼Œå³è„šæœ¬å¼€å§‹è¿è¡Œæ—¶ï¼Œå˜é‡fooå·²ç»å­˜åœ¨äº†ï¼Œä½†æ˜¯æ²¡æœ‰å€¼ï¼Œæ‰€ä»¥ä¼šè¾“å‡ºundefinedã€‚å˜é‡barç”¨letå‘½ä»¤å£°æ˜ï¼Œä¸ä¼šå‘ç”Ÿå˜é‡æå‡ã€‚è¿™è¡¨ç¤ºåœ¨å£°æ˜å®ƒä¹‹å‰ï¼Œå˜é‡baræ˜¯ä¸å­˜åœ¨çš„ï¼Œè¿™æ—¶å¦‚æœç”¨åˆ°å®ƒï¼Œå°±ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚ æš‚æ—¶æ€§æ­»åŒºåªè¦å—çº§ä½œç”¨åŸŸå†…å­˜åœ¨letå‘½ä»¤ï¼Œå®ƒæ‰€å£°æ˜çš„å˜é‡å°±â€œç»‘å®šâ€ï¼ˆbindingï¼‰è¿™ä¸ªåŒºåŸŸï¼Œä¸å†å—å¤–éƒ¨çš„å½±å“ã€‚ 12345var tmp = 123;if (true) { tmp = 'abc'; // ReferenceError let tmp;} ä¸Šé¢ä»£ç ä¸­ï¼Œå­˜åœ¨å…¨å±€å˜é‡tmpï¼Œä½†æ˜¯å—çº§ä½œç”¨åŸŸå†…letåˆå£°æ˜äº†ä¸€ä¸ªå±€éƒ¨å˜é‡tmpï¼Œå¯¼è‡´åè€…ç»‘å®šè¿™ä¸ªå—çº§ä½œç”¨åŸŸï¼Œæ‰€ä»¥åœ¨letå£°æ˜å˜é‡å‰ï¼Œå¯¹tmpèµ‹å€¼ä¼šæŠ¥é”™ã€‚ ES6æ˜ç¡®è§„å®šï¼Œå¦‚æœåŒºå—ä¸­å­˜åœ¨letå’Œconstå‘½ä»¤ï¼Œè¿™ä¸ªåŒºå—å¯¹è¿™äº›å‘½ä»¤å£°æ˜çš„å˜é‡ï¼Œä»ä¸€å¼€å§‹å°±å½¢æˆäº†å°é—­ä½œç”¨åŸŸã€‚å‡¡æ˜¯åœ¨å£°æ˜ä¹‹å‰å°±ä½¿ç”¨è¿™äº›å˜é‡ï¼Œå°±ä¼šæŠ¥é”™ã€‚ æ€»ä¹‹ï¼Œåœ¨ä»£ç å—å†…ï¼Œä½¿ç”¨letå‘½ä»¤å£°æ˜å˜é‡ä¹‹å‰ï¼Œè¯¥å˜é‡éƒ½æ˜¯ä¸å¯ç”¨çš„ã€‚è¿™åœ¨è¯­æ³•ä¸Šï¼Œç§°ä¸ºâ€œæš‚æ—¶æ€§æ­»åŒºâ€ï¼ˆtemporal dead zoneï¼Œç®€ç§°TDZï¼‰ã€‚ 1234567891011if (true) { // TDZå¼€å§‹ tmp = 'abc'; // ReferenceError console.log(tmp); // ReferenceError let tmp; // TDZç»“æŸ console.log(tmp); // undefined tmp = 123; console.log(tmp); // 123} ä¸Šé¢ä»£ç ä¸­ï¼Œåœ¨letå‘½ä»¤å£°æ˜å˜é‡tmpä¹‹å‰ï¼Œéƒ½å±äºå˜é‡tmpçš„â€œæ­»åŒºâ€ã€‚â€œæš‚æ—¶æ€§æ­»åŒºâ€ä¹Ÿæ„å‘³ç€typeofä¸å†æ˜¯ä¸€ä¸ªç™¾åˆ†ä¹‹ç™¾å®‰å…¨çš„æ“ä½œã€‚ 12typeof x; // ReferenceErrorlet x; ä¸Šé¢ä»£ç ä¸­ï¼Œå˜é‡xä½¿ç”¨letå‘½ä»¤å£°æ˜ï¼Œæ‰€ä»¥åœ¨å£°æ˜ä¹‹å‰ï¼Œéƒ½å±äºxçš„â€œæ­»åŒºâ€ï¼Œåªè¦ç”¨åˆ°è¯¥å˜é‡å°±ä¼šæŠ¥é”™ã€‚å› æ­¤ï¼Œtypeofè¿è¡Œæ—¶å°±ä¼šæŠ›å‡ºä¸€ä¸ªReferenceErrorã€‚ä½œä¸ºæ¯”è¾ƒï¼Œå¦‚æœä¸€ä¸ªå˜é‡æ ¹æœ¬æ²¡æœ‰è¢«å£°æ˜ï¼Œä½¿ç”¨typeofåè€Œä¸ä¼šæŠ¥é”™ã€‚ 1typeof undeclared_variable // \"undefined\" ä¸Šé¢ä»£ç ä¸­ï¼Œundeclared_variableæ˜¯ä¸€ä¸ªä¸å­˜åœ¨çš„å˜é‡åï¼Œç»“æœè¿”å›â€œundefinedâ€ã€‚æ‰€ä»¥ï¼Œåœ¨æ²¡æœ‰letä¹‹å‰ï¼Œtypeofè¿ç®—ç¬¦æ˜¯ç™¾åˆ†ä¹‹ç™¾å®‰å…¨çš„ï¼Œæ°¸è¿œä¸ä¼šæŠ¥é”™ã€‚ç°åœ¨è¿™ä¸€ç‚¹ä¸æˆç«‹äº†ã€‚è¿™æ ·çš„è®¾è®¡æ˜¯ä¸ºäº†è®©å¤§å®¶å…»æˆè‰¯å¥½çš„ç¼–ç¨‹ä¹ æƒ¯ï¼Œå˜é‡ä¸€å®šè¦åœ¨å£°æ˜ä¹‹åä½¿ç”¨ï¼Œå¦åˆ™å°±æŠ¥é”™ã€‚ 12345function bar(x = y, y = 2) { return [x, y];}bar(); // æŠ¥é”™ ä¸Šé¢ä»£ç ä¸­ï¼Œè°ƒç”¨barå‡½æ•°ä¹‹æ‰€ä»¥æŠ¥é”™ï¼ˆæŸäº›å®ç°å¯èƒ½ä¸æŠ¥é”™ï¼‰ï¼Œæ˜¯å› ä¸ºå‚æ•°xé»˜è®¤å€¼ç­‰äºå¦ä¸€ä¸ªå‚æ•°yï¼Œè€Œæ­¤æ—¶yè¿˜æ²¡æœ‰å£°æ˜ï¼Œå±äºâ€æ­»åŒºâ€œã€‚å¦‚æœyçš„é»˜è®¤å€¼æ˜¯xï¼Œå°±ä¸ä¼šæŠ¥é”™ï¼Œå› ä¸ºæ­¤æ—¶xå·²ç»å£°æ˜äº†ã€‚ æœ‰äº›â€œæ­»åŒºâ€æ¯”è¾ƒéšè”½ï¼Œä¸å¤ªå®¹æ˜“å‘ç°ã€‚ES6è§„å®šæš‚æ—¶æ€§æ­»åŒºå’Œletã€constè¯­å¥ä¸å‡ºç°å˜é‡æå‡ï¼Œä¸»è¦æ˜¯ä¸ºäº†å‡å°‘è¿è¡Œæ—¶é”™è¯¯ï¼Œé˜²æ­¢åœ¨å˜é‡å£°æ˜å‰å°±ä½¿ç”¨è¿™ä¸ªå˜é‡ï¼Œä»è€Œå¯¼è‡´æ„æ–™ä¹‹å¤–çš„è¡Œä¸ºã€‚è¿™æ ·çš„é”™è¯¯åœ¨ES5æ˜¯å¾ˆå¸¸è§çš„ï¼Œç°åœ¨æœ‰äº†è¿™ç§è§„å®šï¼Œé¿å…æ­¤ç±»é”™è¯¯å°±å¾ˆå®¹æ˜“äº†ã€‚ æ€»ä¹‹ï¼Œæš‚æ—¶æ€§æ­»åŒºçš„æœ¬è´¨å°±æ˜¯ï¼Œåªè¦ä¸€è¿›å…¥å½“å‰ä½œç”¨åŸŸï¼Œæ‰€è¦ä½¿ç”¨çš„å˜é‡å°±å·²ç»å­˜åœ¨äº†ï¼Œä½†æ˜¯ä¸å¯è·å–ï¼Œåªæœ‰ç­‰åˆ°å£°æ˜å˜é‡çš„é‚£ä¸€è¡Œä»£ç å‡ºç°ï¼Œæ‰å¯ä»¥è·å–å’Œä½¿ç”¨è¯¥å˜é‡ã€‚ ä¸å…è®¸é‡å¤å£°æ˜letä¸å…è®¸åœ¨ç›¸åŒä½œç”¨åŸŸå†…ï¼Œé‡å¤å£°æ˜åŒä¸€ä¸ªå˜é‡ã€‚ 1234567891011// æŠ¥é”™function func() { let a = 10; var a = 1;}// æŠ¥é”™function func() { let a = 10; let a = 1;} å› æ­¤ï¼Œä¸èƒ½åœ¨å‡½æ•°å†…éƒ¨é‡æ–°å£°æ˜å‚æ•°ã€‚ 12345678910function func(arg) { let arg; // æŠ¥é”™}function func(arg) { { console.log(arg); let arg; // ä¸æŠ¥é”™ }} å—çº§ä½œç”¨åŸŸä¸ºä»€ä¹ˆéœ€è¦å—çº§ä½œç”¨åŸŸï¼ŸES5åªæœ‰å…¨å±€ä½œç”¨åŸŸå’Œå‡½æ•°ä½œç”¨åŸŸï¼Œæ²¡æœ‰å—çº§ä½œç”¨åŸŸï¼Œè¿™å¸¦æ¥å¾ˆå¤šä¸åˆç†çš„åœºæ™¯ã€‚ ç¬¬ä¸€ç§åœºæ™¯ï¼Œå†…å±‚å˜é‡å¯èƒ½ä¼šè¦†ç›–å¤–å±‚å˜é‡ã€‚ 12345678910var tmp = new Date();function f() { console.log(tmp); // å˜é‡æå‡å‡½æ•°å…ˆäºå…¨å±€ if (false) { var tmp = \"hello world\"; }}f(); // undefined ä¸Šé¢ä»£ç ä¸­ï¼Œå‡½æ•°fæ‰§è¡Œåï¼Œè¾“å‡ºç»“æœä¸ºundefinedï¼ŒåŸå› åœ¨äºå˜é‡æå‡ï¼Œå¯¼è‡´å†…å±‚çš„tmpå˜é‡è¦†ç›–äº†å¤–å±‚çš„tmpå˜é‡ã€‚ ç¬¬äºŒç§åœºæ™¯ï¼Œç”¨æ¥è®¡æ•°çš„å¾ªç¯å˜é‡æ³„éœ²ä¸ºå…¨å±€å˜é‡ã€‚ 1234567var s = 'hello';for (var i = 0; i &lt; s.length; i++) { console.log(s[i]); // çœŸçš„å¯ä»¥åšæ•°ç»„æ¥å–}console.log(i); // 5 ä¸Šé¢ä»£ç ä¸­ï¼Œå˜é‡iåªç”¨æ¥æ§åˆ¶å¾ªç¯ï¼Œä½†æ˜¯å¾ªç¯ç»“æŸåï¼Œå®ƒå¹¶æ²¡æœ‰æ¶ˆå¤±ï¼Œæ³„éœ²æˆäº†å…¨å±€å˜é‡ã€‚ ES6çš„å—çº§ä½œç”¨åŸŸletå®é™…ä¸Šä¸ºJavaScriptæ–°å¢äº†å—çº§ä½œç”¨åŸŸã€‚ 1234567function f1() { let n = 5; if (true) { let n = 10; } console.log(n); // 5} ä¸Šé¢çš„å‡½æ•°æœ‰ä¸¤ä¸ªä»£ç å—ï¼Œéƒ½å£°æ˜äº†å˜é‡nï¼Œè¿è¡Œåè¾“å‡º5ã€‚è¿™è¡¨ç¤ºå¤–å±‚ä»£ç å—ä¸å—å†…å±‚ä»£ç å—çš„å½±å“ã€‚å¦‚æœä½¿ç”¨varå®šä¹‰å˜é‡nï¼Œæœ€åè¾“å‡ºçš„å€¼å°±æ˜¯10ã€‚ ES6å…è®¸å—çº§ä½œç”¨åŸŸçš„ä»»æ„åµŒå¥—ã€‚ 12345{ { {let insane = 'Hello World'} }}; ä¸Šé¢ä»£ç ä½¿ç”¨äº†ä¸€ä¸ªä¸‰å±‚çš„å—çº§ä½œç”¨åŸŸã€‚å¤–å±‚ä½œç”¨åŸŸæ— æ³•è¯»å–å†…å±‚ä½œç”¨åŸŸçš„å˜é‡ã€‚ 1234{{{{ {let insane = 'Hello World'} console.log(insane); // æŠ¥é”™}}}}; å†…å±‚ä½œç”¨åŸŸå¯ä»¥å®šä¹‰å¤–å±‚ä½œç”¨åŸŸçš„åŒåå˜é‡ã€‚ 1234{{{{ let insane = 'Hello World'; {let insane = 'Hello World'}}}}}; å—çº§ä½œç”¨åŸŸçš„å‡ºç°ï¼Œå®é™…ä¸Šä½¿å¾—è·å¾—å¹¿æ³›åº”ç”¨çš„ç«‹å³æ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼ï¼ˆIIFEï¼‰ä¸å†å¿…è¦äº†ã€‚ 1234567891011// IIFE å†™æ³• åŒ¿åå‡½æ•°è‡ªè°ƒç”¨(IIFE) å˜é‡åªåœ¨å‡½æ•°é‡Œæœ‰ç”¨(function () { var tmp = ...; ...}());// å—çº§ä½œç”¨åŸŸå†™æ³•{ let tmp = ...; ...} å—çº§ä½œç”¨åŸŸä¸å‡½æ•°å£°æ˜å‡½æ•°èƒ½ä¸èƒ½åœ¨å—çº§ä½œç”¨åŸŸä¹‹ä¸­å£°æ˜ï¼Œæ˜¯ä¸€ä¸ªç›¸å½“ä»¤äººæ··æ·†çš„é—®é¢˜ã€‚ ES5è§„å®šï¼Œå‡½æ•°åªèƒ½åœ¨é¡¶å±‚ä½œç”¨åŸŸå’Œå‡½æ•°ä½œç”¨åŸŸä¹‹ä¸­å£°æ˜ï¼Œä¸èƒ½åœ¨å—çº§ä½œç”¨åŸŸå£°æ˜ã€‚ 12345678910// æƒ…å†µä¸€if (true) { function f() {}}// æƒ…å†µäºŒtry { function f() {}} catch(e) {} ä¸Šé¢ä»£ç çš„ä¸¤ç§å‡½æ•°å£°æ˜ï¼Œæ ¹æ®ES5çš„è§„å®šéƒ½æ˜¯éæ³•çš„ã€‚ ä½†æ˜¯ï¼Œæµè§ˆå™¨æ²¡æœ‰éµå®ˆè¿™ä¸ªè§„å®šï¼Œä¸ºäº†å…¼å®¹ä»¥å‰çš„æ—§ä»£ç ï¼Œè¿˜æ˜¯æ”¯æŒåœ¨å—çº§ä½œç”¨åŸŸä¹‹ä¸­å£°æ˜å‡½æ•°ï¼Œå› æ­¤ä¸Šé¢ä¸¤ç§æƒ…å†µå®é™…éƒ½èƒ½è¿è¡Œï¼Œä¸ä¼šæŠ¥é”™ã€‚ä¸è¿‡ï¼Œâ€œä¸¥æ ¼æ¨¡å¼â€ä¸‹è¿˜æ˜¯ä¼šæŠ¥é”™ã€‚ 123456// ES5ä¸¥æ ¼æ¨¡å¼'use strict';if (true) { function f() {}}// æŠ¥é”™ ES6 å¼•å…¥äº†å—çº§ä½œç”¨åŸŸï¼Œæ˜ç¡®å…è®¸åœ¨å—çº§ä½œç”¨åŸŸä¹‹ä¸­å£°æ˜å‡½æ•°ã€‚ 123456// ES6ä¸¥æ ¼æ¨¡å¼'use strict';if (true) { function f() {}}// ä¸æŠ¥é”™ ES6 è§„å®šï¼Œå—çº§ä½œç”¨åŸŸä¹‹ä¸­ï¼Œå‡½æ•°å£°æ˜è¯­å¥çš„è¡Œä¸ºç±»ä¼¼äºletï¼Œåœ¨å—çº§ä½œç”¨åŸŸä¹‹å¤–ä¸å¯å¼•ç”¨ã€‚ 123456789function f() { console.log('I am outside!'); }(function () { if (false) { // é‡å¤å£°æ˜ä¸€æ¬¡å‡½æ•°f function f() { console.log('I am inside!'); } } f();}()); ä¸Šé¢ä»£ç åœ¨ ES5 ä¸­è¿è¡Œï¼Œä¼šå¾—åˆ°â€œI am inside!â€ï¼Œå› ä¸ºåœ¨ifå†…å£°æ˜çš„å‡½æ•°fä¼šè¢«æå‡åˆ°å‡½æ•°å¤´éƒ¨ï¼Œå®é™…è¿è¡Œçš„ä»£ç å¦‚ä¸‹ã€‚ 12345678// ES5ç‰ˆæœ¬function f() { console.log('I am outside!'); }(function () { function f() { console.log('I am inside!'); } if (false) { } f();}()); ES6 çš„è¿è¡Œç»“æœå°±å®Œå…¨ä¸ä¸€æ ·äº†ï¼Œä¼šå¾—åˆ°â€œI am outside!â€ã€‚å› ä¸ºå—çº§ä½œç”¨åŸŸå†…å£°æ˜çš„å‡½æ•°ç±»ä¼¼äºletï¼Œå¯¹ä½œç”¨åŸŸä¹‹å¤–æ²¡æœ‰å½±å“ï¼Œå®é™…è¿è¡Œçš„ä»£ç å¦‚ä¸‹ã€‚ 12345// ES6ç‰ˆæœ¬function f() { console.log('I am outside!'); }(function () { f();}()); å¾ˆæ˜¾ç„¶ï¼Œè¿™ç§è¡Œä¸ºå·®å¼‚ä¼šå¯¹è€ä»£ç äº§ç”Ÿå¾ˆå¤§å½±å“ã€‚ä¸ºäº†å‡è½»å› æ­¤äº§ç”Ÿçš„ä¸å…¼å®¹é—®é¢˜ï¼ŒES6åœ¨é™„å½•Bé‡Œé¢è§„å®šï¼Œæµè§ˆå™¨çš„å®ç°å¯ä»¥ä¸éµå®ˆä¸Šé¢çš„è§„å®šï¼Œæœ‰è‡ªå·±çš„è¡Œä¸ºæ–¹å¼ã€‚ å…è®¸åœ¨å—çº§ä½œç”¨åŸŸå†…å£°æ˜å‡½æ•°ã€‚å‡½æ•°å£°æ˜ç±»ä¼¼äºvarï¼Œå³ä¼šæå‡åˆ°å…¨å±€ä½œç”¨åŸŸæˆ–å‡½æ•°ä½œç”¨åŸŸçš„å¤´éƒ¨ã€‚åŒæ—¶ï¼Œå‡½æ•°å£°æ˜è¿˜ä¼šæå‡åˆ°æ‰€åœ¨çš„å—çº§ä½œç”¨åŸŸçš„å¤´éƒ¨ã€‚æ³¨æ„ï¼Œä¸Šé¢ä¸‰æ¡è§„åˆ™åªå¯¹ES6çš„æµè§ˆå™¨å®ç°æœ‰æ•ˆï¼Œå…¶ä»–ç¯å¢ƒçš„å®ç°ä¸ç”¨éµå®ˆï¼Œè¿˜æ˜¯å°†å—çº§ä½œç”¨åŸŸçš„å‡½æ•°å£°æ˜å½“ä½œletå¤„ç†ã€‚ å‰é¢é‚£æ®µä»£ç ï¼Œåœ¨ Chrome ç¯å¢ƒä¸‹è¿è¡Œä¼šæŠ¥é”™ã€‚ 1234567891011// ES6çš„æµè§ˆå™¨ç¯å¢ƒfunction f() { console.log('I am outside!'); }(function () { if (false) { // é‡å¤å£°æ˜ä¸€æ¬¡å‡½æ•°f function f() { console.log('I am inside!'); } } f();}());// Uncaught TypeError: f is not a function ä¸Šé¢çš„ä»£ç æŠ¥é”™ï¼Œæ˜¯å› ä¸ºå®é™…è¿è¡Œçš„æ˜¯ä¸‹é¢çš„ä»£ç ã€‚ 12 // ES6çš„æµè§ˆå™¨ç¯å¢ƒfunction f() { console.log(â€˜I am outside!â€™); }(function () { var f = undefined; if (false) { function f() { console.log(â€˜I am inside!â€™); } } f();}());// Uncaught TypeError: f is not a functionè€ƒè™‘åˆ°ç¯å¢ƒå¯¼è‡´çš„è¡Œä¸ºå·®å¼‚å¤ªå¤§ï¼Œåº”è¯¥é¿å…åœ¨å—çº§ä½œç”¨åŸŸå†…å£°æ˜å‡½æ•°ã€‚å¦‚æœç¡®å®éœ€è¦ï¼Œä¹Ÿåº”è¯¥å†™æˆå‡½æ•°è¡¨è¾¾å¼ï¼Œè€Œä¸æ˜¯å‡½æ•°å£°æ˜è¯­å¥ã€‚ 123456789101112131415// å‡½æ•°å£°æ˜è¯­å¥{ let a = 'secret'; function f() { return a; }}// å‡½æ•°è¡¨è¾¾å¼{ let a = 'secret'; let f = function () { return a; };} å¦å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹ã€‚ES6çš„å—çº§ä½œç”¨åŸŸå…è®¸å£°æ˜å‡½æ•°çš„è§„åˆ™ï¼Œåªåœ¨ä½¿ç”¨å¤§æ‹¬å·çš„æƒ…å†µä¸‹æˆç«‹ï¼Œå¦‚æœæ²¡æœ‰ä½¿ç”¨å¤§æ‹¬å·ï¼Œå°±ä¼šæŠ¥é”™ã€‚ 12345678910// ä¸æŠ¥é”™'use strict';if (true) { function f() {}}// æŠ¥é”™'use strict';if (true) function f() {} do è¡¨è¾¾å¼æœ¬è´¨ä¸Šï¼Œå—çº§ä½œç”¨åŸŸæ˜¯ä¸€ä¸ªè¯­å¥ï¼Œå°†å¤šä¸ªæ“ä½œå°è£…åœ¨ä¸€èµ·ï¼Œæ²¡æœ‰è¿”å›å€¼ã€‚ 1234{ let t = f(); t = t * t + 1;} ä¸Šé¢ä»£ç ä¸­ï¼Œå—çº§ä½œç”¨åŸŸå°†ä¸¤ä¸ªè¯­å¥å°è£…åœ¨ä¸€èµ·ã€‚ä½†æ˜¯ï¼Œåœ¨å—çº§ä½œç”¨åŸŸä»¥å¤–ï¼Œæ²¡æœ‰åŠæ³•å¾—åˆ°tçš„å€¼ï¼Œå› ä¸ºå—çº§ä½œç”¨åŸŸä¸è¿”å›å€¼ï¼Œé™¤étæ˜¯å…¨å±€å˜é‡ã€‚ ç°åœ¨æœ‰ä¸€ä¸ªææ¡ˆï¼Œä½¿å¾—å—çº§ä½œç”¨åŸŸå¯ä»¥å˜ä¸ºè¡¨è¾¾å¼ï¼Œä¹Ÿå°±æ˜¯è¯´å¯ä»¥è¿”å›å€¼ï¼ŒåŠæ³•å°±æ˜¯åœ¨å—çº§ä½œç”¨åŸŸä¹‹å‰åŠ ä¸Šdoï¼Œä½¿å®ƒå˜ä¸ºdoè¡¨è¾¾å¼ã€‚ 1234let x = do { let t = f(); t * t + 1;}; ä¸Šé¢ä»£ç ä¸­ï¼Œå˜é‡xä¼šå¾—åˆ°æ•´ä¸ªå—çº§ä½œç”¨åŸŸçš„è¿”å›å€¼ã€‚ æˆ‘çš„æ€»ç»“1.å˜é‡æå‡ letæ²¡æœ‰å˜é‡æå‡ï¼Œvaræœ‰å˜é‡æå‡ æå‡ä¼˜å…ˆçº§ï¼š å˜é‡ &gt; å‡½æ•° &gt; å‚æ•° &gt; æå‡ 2.æš‚æ—¶æ€§æ­»åŒº åœ¨letå·²å£°æ˜å˜é‡çš„ä½œç”¨åŸŸé‡Œå˜é‡å·²å­˜åœ¨ï¼Œä½†ä¸èƒ½ä½¿ç”¨ï¼Œåœ¨å£°æ˜è¯­å¥åé¢æ‰èƒ½æ­£å¸¸ä½¿ç”¨ es6ç”¨æ¥è§„èŒƒå˜é‡çš„ä½¿ç”¨ 3.ä¸å…è®¸é‡å¤å£°æ˜ letå˜é‡åœ¨åŒä¸€ä½œç”¨åŸŸåªèƒ½å£°æ˜ä¸€æ¬¡ 4.å—çº§ä½œç”¨åŸŸ letåªèƒ½åœ¨å½“å‰ä½œç”¨åŸŸä½¿ç”¨","link":"/2020/05/09/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80/es6/let%E5%92%8Cvar%E5%9F%BA%E7%A1%80%E8%AF%A6%E8%A7%A3/"},{"title":"å­—ç¬¦ä¸²çš„æ‰©å±•","text":"å­—ç¬¦ä¸²çš„æ‰©å±• å­—ç¬¦çš„ Unicode è¡¨ç¤ºæ³•ES6 åŠ å¼ºäº†å¯¹ Unicode çš„æ”¯æŒï¼Œå…è®¸é‡‡ç”¨\\uxxxxå½¢å¼è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œå…¶ä¸­xxxxè¡¨ç¤ºå­—ç¬¦çš„ Unicode ç ç‚¹ã€‚ 12\"\\u0061\"// \"a\" ä½†æ˜¯ï¼Œè¿™ç§è¡¨ç¤ºæ³•åªé™äºç ç‚¹åœ¨\\u0000~\\uFFFFä¹‹é—´çš„å­—ç¬¦ã€‚è¶…å‡ºè¿™ä¸ªèŒƒå›´çš„å­—ç¬¦ï¼Œå¿…é¡»ç”¨ä¸¤ä¸ªåŒå­—èŠ‚çš„å½¢å¼è¡¨ç¤ºã€‚ 12345\"\\uD842\\uDFB7\"// \"ğ ®·\"\"\\u20BB7\"// \" 7\" ä¸Šé¢ä»£ç è¡¨ç¤ºï¼Œå¦‚æœç›´æ¥åœ¨\\uåé¢è·Ÿä¸Šè¶…è¿‡0xFFFFçš„æ•°å€¼ï¼ˆæ¯”å¦‚\\u20BB7ï¼‰ï¼ŒJavaScript ä¼šç†è§£æˆ\\u20BB+7ã€‚ç”±äº\\u20BBæ˜¯ä¸€ä¸ªä¸å¯æ‰“å°å­—ç¬¦ï¼Œæ‰€ä»¥åªä¼šæ˜¾ç¤ºä¸€ä¸ªç©ºæ ¼ï¼Œåé¢è·Ÿç€ä¸€ä¸ª7ã€‚ ES6 å¯¹è¿™ä¸€ç‚¹åšå‡ºäº†æ”¹è¿›ï¼Œåªè¦å°†ç ç‚¹æ”¾å…¥å¤§æ‹¬å·ï¼Œå°±èƒ½æ­£ç¡®è§£è¯»è¯¥å­—ç¬¦ã€‚ 1234567891011\"\\u{20BB7}\"// \"ğ ®·\"\"\\u{41}\\u{42}\\u{43}\"// \"ABC\"let hello = 123;hell\\u{6F} // 123'\\u{1F680}' === '\\uD83D\\uDE80'// true ä¸Šé¢ä»£ç ä¸­ï¼Œæœ€åä¸€ä¸ªä¾‹å­è¡¨æ˜ï¼Œå¤§æ‹¬å·è¡¨ç¤ºæ³•ä¸å››å­—èŠ‚çš„ UTF-16 ç¼–ç æ˜¯ç­‰ä»·çš„ã€‚ æœ‰äº†è¿™ç§è¡¨ç¤ºæ³•ä¹‹åï¼ŒJavaScript å…±æœ‰ 6 ç§æ–¹æ³•å¯ä»¥è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ã€‚ 12345'\\z' === 'z' // true'\\172' === 'z' // true'\\x7A' === 'z' // true'\\u007A' === 'z' // true'\\u{7A}' === 'z' // true å­—ç¬¦ä¸²çš„éå†å™¨æ¥å£ES6 ä¸ºå­—ç¬¦ä¸²æ·»åŠ äº†éå†å™¨æ¥å£ï¼ˆè¯¦è§ã€ŠIteratorã€‹ä¸€ç« ï¼‰ï¼Œä½¿å¾—å­—ç¬¦ä¸²å¯ä»¥è¢«forâ€¦ofå¾ªç¯éå†ã€‚ 123456for (let codePoint of 'foo') { console.log(codePoint)}// \"f\"// \"o\"// \"o\" é™¤äº†éå†å­—ç¬¦ä¸²ï¼Œè¿™ä¸ªéå†å™¨æœ€å¤§çš„ä¼˜ç‚¹æ˜¯å¯ä»¥è¯†åˆ«å¤§äº0xFFFFçš„ç ç‚¹ï¼Œä¼ ç»Ÿçš„forå¾ªç¯æ— æ³•è¯†åˆ«è¿™æ ·çš„ç ç‚¹ã€‚ 123456789101112let text = String.fromCodePoint(0x20BB7);for (let i = 0; i &lt; text.length; i++) { console.log(text[i]);}// \" \"// \" \"for (let i of text) { console.log(i);}// \"ğ ®·\" ä¸Šé¢ä»£ç ä¸­ï¼Œå­—ç¬¦ä¸²textåªæœ‰ä¸€ä¸ªå­—ç¬¦ï¼Œä½†æ˜¯forå¾ªç¯ä¼šè®¤ä¸ºå®ƒåŒ…å«ä¸¤ä¸ªå­—ç¬¦ï¼ˆéƒ½ä¸å¯æ‰“å°ï¼‰ï¼Œè€Œforâ€¦ofå¾ªç¯ä¼šæ­£ç¡®è¯†åˆ«å‡ºè¿™ä¸€ä¸ªå­—ç¬¦ã€‚ ç›´æ¥è¾“å…¥ U+2028 å’Œ U+2029 JavaScript å­—ç¬¦ä¸²å…è®¸ç›´æ¥è¾“å…¥å­—ç¬¦ï¼Œä»¥åŠè¾“å…¥å­—ç¬¦çš„è½¬ä¹‰å½¢å¼ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œâ€œä¸­â€çš„ Unicode ç ç‚¹æ˜¯ U+4e2dï¼Œä½ å¯ä»¥ç›´æ¥åœ¨å­—ç¬¦ä¸²é‡Œé¢è¾“å…¥è¿™ä¸ªæ±‰å­—ï¼Œä¹Ÿå¯ä»¥è¾“å…¥å®ƒçš„è½¬ä¹‰å½¢å¼\\u4e2dï¼Œä¸¤è€…æ˜¯ç­‰ä»·çš„ã€‚ 1'ä¸­' === '\\u4e2d' // true ä½†æ˜¯ï¼ŒJavaScript è§„å®šæœ‰5ä¸ªå­—ç¬¦ï¼Œä¸èƒ½åœ¨å­—ç¬¦ä¸²é‡Œé¢ç›´æ¥ä½¿ç”¨ï¼Œåªèƒ½ä½¿ç”¨è½¬ä¹‰å½¢å¼ã€‚ 12345U+005Cï¼šåæ–œæ ï¼ˆreverse solidus)U+000Dï¼šå›è½¦ï¼ˆcarriage returnï¼‰U+2028ï¼šè¡Œåˆ†éš”ç¬¦ï¼ˆline separatorï¼‰U+2029ï¼šæ®µåˆ†éš”ç¬¦ï¼ˆparagraph separatorï¼‰U+000Aï¼šæ¢è¡Œç¬¦ï¼ˆline feedï¼‰ ä¸¾ä¾‹æ¥è¯´ï¼Œå­—ç¬¦ä¸²é‡Œé¢ä¸èƒ½ç›´æ¥åŒ…å«åæ–œæ ï¼Œä¸€å®šè¦è½¬ä¹‰å†™æˆ\\æˆ–è€…\\u005cã€‚ è¿™ä¸ªè§„å®šæœ¬èº«æ²¡æœ‰é—®é¢˜ï¼Œéº»çƒ¦åœ¨äº JSON æ ¼å¼å…è®¸å­—ç¬¦ä¸²é‡Œé¢ç›´æ¥ä½¿ç”¨ U+2028ï¼ˆè¡Œåˆ†éš”ç¬¦ï¼‰å’Œ U+2029ï¼ˆæ®µåˆ†éš”ç¬¦ï¼‰ã€‚ è¿™æ ·ä¸€æ¥ï¼ŒæœåŠ¡å™¨è¾“å‡ºçš„ JSON è¢«JSON.parseè§£æï¼Œå°±æœ‰å¯èƒ½ç›´æ¥æŠ¥é”™ã€‚ 12const json = '\"\\u2028\"';JSON.parse(json); // å¯èƒ½æŠ¥é”™ JSON æ ¼å¼å·²ç»å†»ç»“ï¼ˆRFC 7159ï¼‰ï¼Œæ²¡æ³•ä¿®æ”¹äº†ã€‚ä¸ºäº†æ¶ˆé™¤è¿™ä¸ªæŠ¥é”™ï¼ŒES2019 å…è®¸ JavaScript å­—ç¬¦ä¸²ç›´æ¥è¾“å…¥ U+2028ï¼ˆè¡Œåˆ†éš”ç¬¦ï¼‰å’Œ U+2029ï¼ˆæ®µåˆ†éš”ç¬¦ï¼‰ã€‚ 1const PS = eval(\"'\\u2029'\"); æ ¹æ®è¿™ä¸ªææ¡ˆï¼Œä¸Šé¢çš„ä»£ç ä¸ä¼šæŠ¥é”™ã€‚ æ³¨æ„ï¼Œæ¨¡æ¿å­—ç¬¦ä¸²ç°åœ¨å°±å…è®¸ç›´æ¥è¾“å…¥è¿™ä¸¤ä¸ªå­—ç¬¦ã€‚å¦å¤–ï¼Œæ­£åˆ™è¡¨è¾¾å¼ä¾ç„¶ä¸å…è®¸ç›´æ¥è¾“å…¥è¿™ä¸¤ä¸ªå­—ç¬¦ï¼Œè¿™æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œå› ä¸º JSON æœ¬æ¥å°±ä¸å…è®¸ç›´æ¥åŒ…å«æ­£åˆ™è¡¨è¾¾å¼ã€‚ JSON.stringify() çš„æ”¹é€  æ ¹æ®æ ‡å‡†ï¼ŒJSON æ•°æ®å¿…é¡»æ˜¯ UTF-8 ç¼–ç ã€‚ä½†æ˜¯ï¼Œç°åœ¨çš„JSON.stringify()æ–¹æ³•æœ‰å¯èƒ½è¿”å›ä¸ç¬¦åˆ UTF-8 æ ‡å‡†çš„å­—ç¬¦ä¸²ã€‚ å…·ä½“æ¥è¯´ï¼ŒUTF-8 æ ‡å‡†è§„å®šï¼Œ0xD800åˆ°0xDFFFä¹‹é—´çš„ç ç‚¹ï¼Œä¸èƒ½å•ç‹¬ä½¿ç”¨ï¼Œå¿…é¡»é…å¯¹ä½¿ç”¨ã€‚ æ¯”å¦‚ï¼Œ\\uD834\\uDF06æ˜¯ä¸¤ä¸ªç ç‚¹ï¼Œä½†æ˜¯å¿…é¡»æ”¾åœ¨ä¸€èµ·é…å¯¹ä½¿ç”¨ï¼Œä»£è¡¨å­—ç¬¦ğŒ†ã€‚ è¿™æ˜¯ä¸ºäº†è¡¨ç¤ºç ç‚¹å¤§äº0xFFFFçš„å­—ç¬¦çš„ä¸€ç§å˜é€šæ–¹æ³•ã€‚å•ç‹¬ä½¿ç”¨\\uD834å’Œ\\uDFO6è¿™ä¸¤ä¸ªç ç‚¹æ˜¯ä¸åˆæ³•çš„ï¼Œ æˆ–è€…é¢ å€’é¡ºåºä¹Ÿä¸è¡Œï¼Œå› ä¸º\\uDF06\\uD834å¹¶æ²¡æœ‰å¯¹åº”çš„å­—ç¬¦ã€‚ JSON.stringify()çš„é—®é¢˜åœ¨äºï¼Œå®ƒå¯èƒ½è¿”å›0xD800åˆ°0xDFFFä¹‹é—´çš„å•ä¸ªç ç‚¹ã€‚ 1JSON.stringify('\\u{D834}') // \"\\u{D834}\" ä¸ºäº†ç¡®ä¿è¿”å›çš„æ˜¯åˆæ³•çš„ UTF-8 å­—ç¬¦ï¼ŒES2019 æ”¹å˜äº†JSON.stringify()çš„è¡Œä¸ºã€‚å¦‚æœé‡åˆ°0xD800åˆ°0xDFFFä¹‹é—´çš„å•ä¸ªç ç‚¹ï¼Œæˆ–è€…ä¸å­˜åœ¨çš„é…å¯¹å½¢å¼ï¼Œå®ƒä¼šè¿”å›è½¬ä¹‰å­—ç¬¦ä¸²ï¼Œç•™ç»™åº”ç”¨è‡ªå·±å†³å®šä¸‹ä¸€æ­¥çš„å¤„ç†ã€‚ 12JSON.stringify('\\u{D834}') // \"\"\\\\uD834\"\"JSON.stringify('\\uDF06\\uD834') // \"\"\\\\udf06\\\\ud834\"\" æ¨¡æ¿å­—ç¬¦ä¸²ä¼ ç»Ÿçš„ JavaScript è¯­è¨€ï¼Œè¾“å‡ºæ¨¡æ¿é€šå¸¸æ˜¯è¿™æ ·å†™çš„ï¼ˆä¸‹é¢ä½¿ç”¨äº† jQuery çš„æ–¹æ³•ï¼‰ã€‚ 123456$('#result').append( 'There are &lt;b&gt;' + basket.count + '&lt;/b&gt; ' + 'items in your basket, ' + '&lt;em&gt;' + basket.onSale + '&lt;/em&gt; are on sale!'); ä¸Šé¢è¿™ç§å†™æ³•ç›¸å½“ç¹çä¸æ–¹ä¾¿ï¼ŒES6 å¼•å…¥äº†æ¨¡æ¿å­—ç¬¦ä¸²è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ 12345$('#result').append(` There are &lt;b&gt;${basket.count}&lt;/b&gt; items in your basket, &lt;em&gt;${basket.onSale}&lt;/em&gt; are on sale!`); æ¨¡æ¿å­—ç¬¦ä¸²ï¼ˆtemplate stringï¼‰æ˜¯å¢å¼ºç‰ˆçš„å­—ç¬¦ä¸²ï¼Œç”¨åå¼•å·ï¼ˆ`ï¼‰æ ‡è¯†ã€‚å®ƒå¯ä»¥å½“ä½œæ™®é€šå­—ç¬¦ä¸²ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥å®šä¹‰å¤šè¡Œå­—ç¬¦ä¸²ï¼Œæˆ–è€…åœ¨å­—ç¬¦ä¸²ä¸­åµŒå…¥å˜é‡ã€‚ 12345678910111213// æ™®é€šå­—ç¬¦ä¸²`In JavaScript '\\n' is a line-feed.`// å¤šè¡Œå­—ç¬¦ä¸²`In JavaScript this is not legal.`console.log(`string text line 1string text line 2`);// å­—ç¬¦ä¸²ä¸­åµŒå…¥å˜é‡let name = \"Bob\", time = \"today\";`Hello ${name}, how are you ${time}?` ä¸Šé¢ä»£ç ä¸­çš„æ¨¡æ¿å­—ç¬¦ä¸²ï¼Œéƒ½æ˜¯ç”¨åå¼•å·è¡¨ç¤ºã€‚å¦‚æœåœ¨æ¨¡æ¿å­—ç¬¦ä¸²ä¸­éœ€è¦ä½¿ç”¨åå¼•å·ï¼Œåˆ™å‰é¢è¦ç”¨åæ–œæ è½¬ä¹‰ã€‚ 1let greeting = `\\`Yo\\` World!`; å¦‚æœä½¿ç”¨æ¨¡æ¿å­—ç¬¦ä¸²è¡¨ç¤ºå¤šè¡Œå­—ç¬¦ä¸²ï¼Œæ‰€æœ‰çš„ç©ºæ ¼å’Œç¼©è¿›éƒ½ä¼šè¢«ä¿ç•™åœ¨è¾“å‡ºä¹‹ä¸­ã€‚ 123456$('#list').html(`&lt;ul&gt; &lt;li&gt;first&lt;/li&gt; &lt;li&gt;second&lt;/li&gt;&lt;/ul&gt;`); ä¸Šé¢ä»£ç ä¸­ï¼Œæ‰€æœ‰æ¨¡æ¿å­—ç¬¦ä¸²çš„ç©ºæ ¼å’Œæ¢è¡Œï¼Œéƒ½æ˜¯è¢«ä¿ç•™çš„ï¼Œæ¯”å¦‚æ ‡ç­¾å‰é¢ä¼šæœ‰ä¸€ä¸ªæ¢è¡Œã€‚å¦‚æœä½ ä¸æƒ³è¦è¿™ä¸ªæ¢è¡Œï¼Œå¯ä»¥ä½¿ç”¨trimæ–¹æ³•æ¶ˆé™¤å®ƒã€‚ 123456$('#list').html(`&lt;ul&gt; &lt;li&gt;first&lt;/li&gt; &lt;li&gt;second&lt;/li&gt;&lt;/ul&gt;`.trim()); æ¨¡æ¿å­—ç¬¦ä¸²ä¸­åµŒå…¥å˜é‡ï¼Œéœ€è¦å°†å˜é‡åå†™åœ¨${}ä¹‹ä¸­ã€‚ 123456789101112function authorize(user, action) { if (!user.hasPrivilege(action)) { throw new Error( // ä¼ ç»Ÿå†™æ³•ä¸º // 'User ' // + user.name // + ' is not authorized to do ' // + action // + '.' `User ${user.name} is not authorized to do ${action}.`); }} å¤§æ‹¬å·å†…éƒ¨å¯ä»¥æ”¾å…¥ä»»æ„çš„ JavaScript è¡¨è¾¾å¼ï¼Œå¯ä»¥è¿›è¡Œè¿ç®—ï¼Œä»¥åŠå¼•ç”¨å¯¹è±¡å±æ€§ã€‚ 123456789101112let x = 1;let y = 2;`${x} + ${y} = ${x + y}`// \"1 + 2 = 3\"`${x} + ${y * 2} = ${x + y * 2}`// \"1 + 4 = 5\"let obj = {x: 1, y: 2};`${obj.x + obj.y}`// \"3\" æ¨¡æ¿å­—ç¬¦ä¸²ä¹‹ä¸­è¿˜èƒ½è°ƒç”¨å‡½æ•°ã€‚ 123456function fn() { return \"Hello World\";}`foo ${fn()} bar`// foo Hello World bar å¦‚æœå¤§æ‹¬å·ä¸­çš„å€¼ä¸æ˜¯å­—ç¬¦ä¸²ï¼Œå°†æŒ‰ç…§ä¸€èˆ¬çš„è§„åˆ™è½¬ä¸ºå­—ç¬¦ä¸²ã€‚æ¯”å¦‚ï¼Œå¤§æ‹¬å·ä¸­æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå°†é»˜è®¤è°ƒç”¨å¯¹è±¡çš„toStringæ–¹æ³•ã€‚ å¦‚æœæ¨¡æ¿å­—ç¬¦ä¸²ä¸­çš„å˜é‡æ²¡æœ‰å£°æ˜ï¼Œå°†æŠ¥é”™ã€‚ 123// å˜é‡placeæ²¡æœ‰å£°æ˜let msg = `Hello, ${place}`;// æŠ¥é”™ ç”±äºæ¨¡æ¿å­—ç¬¦ä¸²çš„å¤§æ‹¬å·å†…éƒ¨ï¼Œå°±æ˜¯æ‰§è¡Œ JavaScript ä»£ç ï¼Œå› æ­¤å¦‚æœå¤§æ‹¬å·å†…éƒ¨æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå°†ä¼šåŸæ ·è¾“å‡ºã€‚ 12`Hello ${'World'}`// \"Hello World\" æ¨¡æ¿å­—ç¬¦ä¸²ç”šè‡³è¿˜èƒ½åµŒå¥—ã€‚ 12345678const tmpl = addrs =&gt; ` &lt;table&gt; ${addrs.map(addr =&gt; ` &lt;tr&gt;&lt;td&gt;${addr.first}&lt;/td&gt;&lt;/tr&gt; &lt;tr&gt;&lt;td&gt;${addr.last}&lt;/td&gt;&lt;/tr&gt; `).join('')} &lt;/table&gt;`; ä¸Šé¢ä»£ç ä¸­ï¼Œæ¨¡æ¿å­—ç¬¦ä¸²çš„å˜é‡ä¹‹ä¸­ï¼ŒåˆåµŒå…¥äº†å¦ä¸€ä¸ªæ¨¡æ¿å­—ç¬¦ä¸²ï¼Œä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ã€‚ 123456789101112131415const data = [ { first: '&lt;Jane&gt;', last: 'Bond' }, { first: 'Lars', last: '&lt;Croft&gt;' },];console.log(tmpl(data));// &lt;table&gt;//// &lt;tr&gt;&lt;td&gt;&lt;Jane&gt;&lt;/td&gt;&lt;/tr&gt;// &lt;tr&gt;&lt;td&gt;Bond&lt;/td&gt;&lt;/tr&gt;//// &lt;tr&gt;&lt;td&gt;Lars&lt;/td&gt;&lt;/tr&gt;// &lt;tr&gt;&lt;td&gt;&lt;Croft&gt;&lt;/td&gt;&lt;/tr&gt;//// &lt;/table&gt; å¦‚æœéœ€è¦å¼•ç”¨æ¨¡æ¿å­—ç¬¦ä¸²æœ¬èº«ï¼Œåœ¨éœ€è¦æ—¶æ‰§è¡Œï¼Œå¯ä»¥å†™æˆå‡½æ•°ã€‚ 12let func = (name) =&gt; `Hello ${name}!`;func('Jack') // \"Hello Jack!\" ä¸Šé¢ä»£ç ä¸­ï¼Œæ¨¡æ¿å­—ç¬¦ä¸²å†™æˆäº†ä¸€ä¸ªå‡½æ•°çš„è¿”å›å€¼ã€‚æ‰§è¡Œè¿™ä¸ªå‡½æ•°ï¼Œå°±ç›¸å½“äºæ‰§è¡Œè¿™ä¸ªæ¨¡æ¿å­—ç¬¦ä¸²äº†ã€‚ å®ä¾‹ï¼šæ¨¡æ¿ç¼–è¯‘ ä¸‹é¢ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªé€šè¿‡æ¨¡æ¿å­—ç¬¦ä¸²ï¼Œç”Ÿæˆæ­£å¼æ¨¡æ¿çš„å®ä¾‹ã€‚ 1234567let template = `&lt;ul&gt; &lt;% for(let i=0; i &lt; data.supplies.length; i++) { %&gt; &lt;li&gt;&lt;%= data.supplies[i] %&gt;&lt;/li&gt; &lt;% } %&gt;&lt;/ul&gt;`; ä¸Šé¢ä»£ç åœ¨æ¨¡æ¿å­—ç¬¦ä¸²ä¹‹ä¸­ï¼Œæ”¾ç½®äº†ä¸€ä¸ªå¸¸è§„æ¨¡æ¿ã€‚è¯¥æ¨¡æ¿ä½¿ç”¨&lt;%â€¦%&gt;æ”¾ç½® JavaScript ä»£ç ï¼Œä½¿ç”¨&lt;%= â€¦ %&gt;è¾“å‡º JavaScript è¡¨è¾¾å¼ã€‚ æ€ä¹ˆç¼–è¯‘è¿™ä¸ªæ¨¡æ¿å­—ç¬¦ä¸²å‘¢ï¼Ÿ ä¸€ç§æ€è·¯æ˜¯å°†å…¶è½¬æ¢ä¸º JavaScript è¡¨è¾¾å¼å­—ç¬¦ä¸²ã€‚ 1234567echo('&lt;ul&gt;');for(let i=0; i &lt; data.supplies.length; i++) { echo('&lt;li&gt;'); echo(data.supplies[i]); echo('&lt;/li&gt;');};echo('&lt;/ul&gt;'); è¿™ä¸ªè½¬æ¢ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼å°±è¡Œäº†ã€‚ 12345678let evalExpr = /&lt;%=(.+?)%&gt;/g;let expr = /&lt;%([\\s\\S]+?)%&gt;/g;template = template .replace(evalExpr, '`); \\n echo( $1 ); \\n echo(`') .replace(expr, '`); \\n $1 \\n echo(`');template = 'echo(`' + template + '`);'; ç„¶åï¼Œå°†templateå°è£…åœ¨ä¸€ä¸ªå‡½æ•°é‡Œé¢è¿”å›ï¼Œå°±å¯ä»¥äº†ã€‚ 1234567891011121314let script =`(function parse(data){ let output = \"\"; function echo(html){ output += html; } ${ template } return output;})`;return script; å°†ä¸Šé¢çš„å†…å®¹æ‹¼è£…æˆä¸€ä¸ªæ¨¡æ¿ç¼–è¯‘å‡½æ•°compileã€‚ 12345678910111213141516171819202122232425function compile(template){ const evalExpr = /&lt;%=(.+?)%&gt;/g; const expr = /&lt;%([\\s\\S]+?)%&gt;/g; template = template .replace(evalExpr, '`); \\n echo( $1 ); \\n echo(`') .replace(expr, '`); \\n $1 \\n echo(`'); template = 'echo(`' + template + '`);'; let script = `(function parse(data){ let output = \"\"; function echo(html){ output += html; } ${ template } return output; })`; return script;} compileå‡½æ•°çš„ç”¨æ³•å¦‚ä¸‹ã€‚ 1234567let parse = eval(compile(template));div.innerHTML = parse({ supplies: [ \"broom\", \"mop\", \"cleaner\" ] });// &lt;ul&gt;// &lt;li&gt;broom&lt;/li&gt;// &lt;li&gt;mop&lt;/li&gt;// &lt;li&gt;cleaner&lt;/li&gt;// &lt;/ul&gt; æˆ‘çš„æ€»ç»“1 å­—ç¬¦ä¸²çš„éå†å™¨æ¥å£ for (let i of ...)é™¤äº†éå†å­—ç¬¦ä¸²ï¼Œè¿™ä¸ªéå†å™¨æœ€å¤§çš„ä¼˜ç‚¹æ˜¯å¯ä»¥è¯†åˆ«å¤§äº0xFFFFçš„ç ç‚¹ï¼Œä¼ ç»Ÿçš„forå¾ªç¯æ— æ³•è¯†åˆ«è¿™æ ·çš„ç ç‚¹ 2 JSON.stringify() çš„æ”¹é€ ","link":"/2020/05/09/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80/es6/%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E6%89%A9%E5%B1%95/"},{"title":"å˜é‡çš„è§£æ„ä¸èµ‹å€¼","text":"å®šä¹‰å¸¸é‡,å¸¸é‡å°±æ˜¯ä¸å˜çš„å€¼ï¼Œç”¨åœ¨å‡½æ•°ï¼Œå˜é‡ï¼Œæ•°ç»„ï¼ŒæŒ‡é’ˆç±»å‹è¯´æ˜å‰ï¼ˆå¦‚ï¼šconst int a=10;ï¼‰è¡¨ç¤ºçš„aå€¼æ°¸è¿œæ˜¯10.å®šä¹‰å¸¸é‡,å¸¸é‡å°±æ˜¯ä¸å˜çš„å€¼ï¼Œç”¨åœ¨å‡½æ•°ï¼Œå˜é‡ï¼Œæ•°ç»„ï¼ŒæŒ‡é’ˆç±»å‹è¯´æ˜å‰ï¼ˆå¦‚ï¼šconst int a=10;ï¼‰è¡¨ç¤ºçš„aå€¼æ°¸è¿œæ˜¯10. å®šä¹‰å¸¸é‡,å¸¸é‡å°±æ˜¯ä¸å˜çš„å€¼ï¼Œç”¨åœ¨å‡½æ•°ï¼Œå˜é‡ï¼Œæ•°ç»„ï¼ŒæŒ‡é’ˆç±»å‹è¯´æ˜å‰ï¼ˆå¦‚ï¼šconst int a=10;ï¼‰è¡¨ç¤ºçš„aå€¼æ°¸è¿œæ˜¯10.å®šä¹‰å¸¸é‡,å¸¸é‡å°±æ˜¯ä¸å˜çš„å€¼ï¼Œç”¨åœ¨å‡½æ•°ï¼Œå˜é‡ï¼Œæ•°ç»„ï¼ŒæŒ‡é’ˆç±»å‹è¯´æ˜å‰ï¼ˆå¦‚ï¼šconst int a=10;ï¼‰è¡¨ç¤ºçš„aå€¼æ°¸è¿œæ˜¯10. ä»€ä¹ˆæ˜¯constå¸¸é‡å®šä¹‰å¸¸é‡,å¸¸é‡å°±æ˜¯ä¸å˜çš„å€¼ï¼Œç”¨åœ¨å‡½æ•°ï¼Œå˜é‡ï¼Œæ•°ç»„ï¼ŒæŒ‡é’ˆç±»å‹è¯´æ˜å‰ï¼ˆå¦‚ï¼šconst int a=10;ï¼‰è¡¨ç¤ºçš„aå€¼æ°¸è¿œæ˜¯10. constè¯¦ç»†","link":"/2020/05/09/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80/es6/%E5%8F%98%E9%87%8F%E7%9A%84%E8%A7%A3%E6%9E%84%E8%B5%8B%E5%80%BC/"},{"title":"å¾ªç¯éå†","text":"å¾ªç¯æ•°ç»„åŸå§‹for12345// const fruits = {apple:'apple',banana:'banana',grape:'grape'};const fruits = ['apple','banana','grape'];for (let i=0; i &lt; fruits.length; i++){ console.log(fruits[i])} es5 forEach1234567const fruits = ['apple','banana','grape'];fruits.forEach((key,value)=&gt;{ console.log(key); console.log(value); // ä¸æ”¯æŒ break, continue}) ä¸æ”¯æŒbreak,continue es6 for-of12345678910111213const fruits = ['apple','banana','grape'];for ( let value of fruits){ console.log(value);}// apple// banana// grape for ( let value of fruits.entries()){ console.log(value); }// [0, \"apple\"]// [1, \"banana\"]// [2, \"grape\"]","link":"/2020/05/09/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80/es6/%E5%BE%AA%E7%8E%AF%E9%81%8D%E5%8E%86/"},{"title":"å˜é‡çš„è§£æ„ä¸èµ‹å€¼","text":"å˜é‡çš„è§£æ„ä¸èµ‹å€¼ ä»€ä¹ˆæ˜¯å˜é‡çš„è§£æ„ä¸èµ‹å€¼åŸºæœ¬ç”¨æ³•ES6 å…è®¸æŒ‰ç…§ä¸€å®šæ¨¡å¼ï¼Œä»æ•°ç»„å’Œå¯¹è±¡ä¸­æå–å€¼ï¼Œå¯¹å˜é‡è¿›è¡Œèµ‹å€¼ï¼Œè¿™è¢«ç§°ä¸ºè§£æ„ï¼ˆDestructuringï¼‰ã€‚ ä»¥å‰ï¼Œä¸ºå˜é‡èµ‹å€¼ï¼Œåªèƒ½ç›´æ¥æŒ‡å®šå€¼ã€‚ 123456let a = 1;let b = 2;let c = 3;// ES6 å…è®¸å†™æˆä¸‹é¢è¿™æ ·ã€‚let [a, b, c] = [1, 2, 3]; ä¸Šé¢ä»£ç è¡¨ç¤ºï¼Œå¯ä»¥ä»æ•°ç»„ä¸­æå–å€¼ï¼ŒæŒ‰ç…§å¯¹åº”ä½ç½®ï¼Œå¯¹å˜é‡èµ‹å€¼ã€‚ æœ¬è´¨ä¸Šï¼Œè¿™ç§å†™æ³•å±äºâ€œæ¨¡å¼åŒ¹é…â€ï¼Œåªè¦ç­‰å·ä¸¤è¾¹çš„æ¨¡å¼ç›¸åŒï¼Œå·¦è¾¹çš„å˜é‡å°±ä¼šè¢«èµ‹äºˆå¯¹åº”çš„å€¼ã€‚ä¸‹é¢æ˜¯ä¸€äº›ä½¿ç”¨åµŒå¥—æ•°ç»„è¿›è¡Œè§£æ„çš„ä¾‹å­ã€‚ 1234567891011121314151617181920let [foo, [[bar], baz]] = [1, [[2], 3]];foo // 1bar // 2baz // 3let [ , , third] = [\"foo\", \"bar\", \"baz\"];third // \"baz\"let [x, , y] = [1, 2, 3];x // 1y // 3let [head, ...tail] = [1, 2, 3, 4];head // 1tail // [2, 3, 4]let [x, y, ...z] = ['a'];x // \"a\"y // undefinedz // [] å¦‚æœè§£æ„ä¸æˆåŠŸï¼Œå˜é‡çš„å€¼å°±ç­‰äºundefinedã€‚ 12let [foo] = [];let [bar, foo] = [1]; ä»¥ä¸Šä¸¤ç§æƒ…å†µéƒ½å±äºè§£æ„ä¸æˆåŠŸï¼Œfooçš„å€¼éƒ½ä¼šç­‰äºundefinedã€‚ å¦ä¸€ç§æƒ…å†µæ˜¯ä¸å®Œå…¨è§£æ„ï¼Œå³ç­‰å·å·¦è¾¹çš„æ¨¡å¼ï¼ŒåªåŒ¹é…ä¸€éƒ¨åˆ†çš„ç­‰å·å³è¾¹çš„æ•°ç»„ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œè§£æ„ä¾ç„¶å¯ä»¥æˆåŠŸã€‚ 12345678let [x, y] = [1, 2, 3];x // 1y // 2let [a, [b], d] = [1, [2, 3], 4];a // 1b // 2d // 4 ä¸Šé¢ä¸¤ä¸ªä¾‹å­ï¼Œéƒ½å±äºä¸å®Œå…¨è§£æ„ï¼Œä½†æ˜¯å¯ä»¥æˆåŠŸã€‚ å¦‚æœç­‰å·çš„å³è¾¹ä¸æ˜¯æ•°ç»„ï¼ˆæˆ–è€…ä¸¥æ ¼åœ°è¯´ï¼Œä¸æ˜¯å¯éå†çš„ç»“æ„ï¼Œå‚è§ã€ŠIteratorã€‹ä¸€ç« ï¼‰ï¼Œé‚£ä¹ˆå°†ä¼šæŠ¥é”™ã€‚ 1234567// æŠ¥é”™let [foo] = 1;let [foo] = false;let [foo] = NaN;let [foo] = undefined;let [foo] = null;let [foo] = {}; ä¸Šé¢çš„è¯­å¥éƒ½ä¼šæŠ¥é”™ï¼Œå› ä¸ºç­‰å·å³è¾¹çš„å€¼ï¼Œè¦ä¹ˆè½¬ä¸ºå¯¹è±¡ä»¥åä¸å…·å¤‡ Iterator æ¥å£ï¼ˆå‰äº”ä¸ªè¡¨è¾¾å¼ï¼‰ï¼Œè¦ä¹ˆæœ¬èº«å°±ä¸å…·å¤‡ Iterator æ¥å£ï¼ˆæœ€åä¸€ä¸ªè¡¨è¾¾å¼ï¼‰ã€‚ å¯¹äº Set ç»“æ„ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æ•°ç»„çš„è§£æ„èµ‹å€¼ã€‚ 12let [x, y, z] = new Set(['a', 'b', 'c']);x // \"a\" äº‹å®ä¸Šï¼Œåªè¦æŸç§æ•°æ®ç»“æ„å…·æœ‰ Iterator æ¥å£ï¼Œéƒ½å¯ä»¥é‡‡ç”¨æ•°ç»„å½¢å¼çš„è§£æ„èµ‹å€¼ã€‚ 1234567891011function* fibs() { let a = 0; let b = 1; while (true) { yield a; [a, b] = [b, a + b]; }}let [first, second, third, fourth, fifth, sixth] = fibs();sixth // 5 ä¸Šé¢ä»£ç ä¸­ï¼Œfibsæ˜¯ä¸€ä¸ª Generator å‡½æ•°ï¼ˆå‚è§ã€ŠGenerator å‡½æ•°ã€‹ä¸€ç« ï¼‰ï¼ŒåŸç”Ÿå…·æœ‰ Iterator æ¥å£ã€‚è§£æ„èµ‹å€¼ä¼šä¾æ¬¡ä»è¿™ä¸ªæ¥å£è·å–å€¼ã€‚ é»˜è®¤å€¼è§£æ„èµ‹å€¼å…è®¸æŒ‡å®šé»˜è®¤å€¼ã€‚ 12345let [foo = true] = [];foo // truelet [x, y = 'b'] = ['a']; // x='a', y='b'let [x, y = 'b'] = ['a', undefined]; // x='a', y='b' æ³¨æ„ï¼ŒES6 å†…éƒ¨ä½¿ç”¨ä¸¥æ ¼ç›¸ç­‰è¿ç®—ç¬¦ï¼ˆ===ï¼‰ï¼Œåˆ¤æ–­ä¸€ä¸ªä½ç½®æ˜¯å¦æœ‰å€¼ã€‚æ‰€ä»¥ï¼Œåªæœ‰å½“ä¸€ä¸ªæ•°ç»„æˆå‘˜ä¸¥æ ¼ç­‰äºundefinedï¼Œé»˜è®¤å€¼æ‰ä¼šç”Ÿæ•ˆã€‚ 12345let [x = 1] = [undefined];x // 1let [x = 1] = [null];x // null ä¸Šé¢ä»£ç ä¸­ï¼Œå¦‚æœä¸€ä¸ªæ•°ç»„æˆå‘˜æ˜¯ nullï¼Œé»˜è®¤å€¼å°±ä¸ä¼šç”Ÿæ•ˆï¼Œå› ä¸ºnullä¸ä¸¥æ ¼ç­‰äºundefined[warning] åªæœ‰å½“ä¸€ä¸ªæ•°ç»„æˆå‘˜ä¸¥æ ¼ç­‰äºundefinedï¼Œé»˜è®¤å€¼æ‰ä¼šç”Ÿæ•ˆ å¦‚æœé»˜è®¤å€¼æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œé‚£ä¹ˆè¿™ä¸ªè¡¨è¾¾å¼æ˜¯æƒ°æ€§æ±‚å€¼çš„ï¼Œå³åªæœ‰åœ¨ç”¨åˆ°çš„æ—¶å€™ï¼Œæ‰ä¼šæ±‚å€¼ã€‚ 12345function f() { console.log('aaa');}let [x = f()] = [1]; ä¸Šé¢ä»£ç ä¸­ï¼Œå› ä¸º x èƒ½å–åˆ°å€¼ï¼Œæ‰€ä»¥å‡½æ•° f æ ¹æœ¬ä¸ä¼šæ‰§è¡Œã€‚ä¸Šé¢çš„ä»£ç å…¶å®ç­‰ä»·äºä¸‹é¢çš„ä»£ç ã€‚ 123456let x;if ([1][0] === undefined) { x = f();} else { x = [1][0];} é»˜è®¤å€¼å¯ä»¥å¼•ç”¨è§£æ„èµ‹å€¼çš„å…¶ä»–å˜é‡ï¼Œä½†è¯¥å˜é‡å¿…é¡»å·²ç»å£°æ˜ã€‚ 1234let [x = 1, y = x] = []; // x=1; y=1let [x = 1, y = x] = [2]; // x=2; y=2let [x = 1, y = x] = [1, 2]; // x=1; y=2let [x = y, y = 1] = []; // ReferenceError: y is not defined ä¸Šé¢æœ€åä¸€ä¸ªè¡¨è¾¾å¼ä¹‹æ‰€ä»¥ä¼šæŠ¥é”™ï¼Œæ˜¯å› ä¸ºxç”¨yåšé»˜è®¤å€¼æ—¶ï¼Œyè¿˜æ²¡æœ‰å£°æ˜ã€‚ let æš‚æ—¶æ€§æ­»åŒº å¯¹è±¡çš„è§£æ„èµ‹å€¼ç®€ä»‹è§£æ„ä¸ä»…å¯ä»¥ç”¨äºæ•°ç»„ï¼Œè¿˜å¯ä»¥ç”¨äºå¯¹è±¡ã€‚ 123let { foo, bar } = { foo: 'aaa', bar: 'bbb' };foo // \"aaa\"bar // \"bbb\" å¯¹è±¡çš„è§£æ„ä¸æ•°ç»„æœ‰ä¸€ä¸ªé‡è¦çš„ä¸åŒã€‚æ•°ç»„çš„å…ƒç´ æ˜¯æŒ‰æ¬¡åºæ’åˆ—çš„ï¼Œå˜é‡çš„å–å€¼ç”±å®ƒçš„ä½ç½®å†³å®šï¼›è€Œå¯¹è±¡çš„å±æ€§æ²¡æœ‰æ¬¡åºï¼Œå˜é‡å¿…é¡»ä¸å±æ€§åŒåï¼Œæ‰èƒ½å–åˆ°æ­£ç¡®çš„å€¼ã€‚ 123456let { bar, foo } = { foo: 'aaa', bar: 'bbb' };foo // \"aaa\"bar // \"bbb\"let { baz } = { foo: 'aaa', bar: 'bbb' };baz // undefined ä¸Šé¢ä»£ç çš„ç¬¬ä¸€ä¸ªä¾‹å­ï¼Œç­‰å·å·¦è¾¹çš„ä¸¤ä¸ªå˜é‡çš„æ¬¡åºï¼Œä¸ç­‰å·å³è¾¹ä¸¤ä¸ªåŒåå±æ€§çš„æ¬¡åºä¸ä¸€è‡´ï¼Œä½†æ˜¯å¯¹å–å€¼å®Œå…¨æ²¡æœ‰å½±å“ã€‚ç¬¬äºŒä¸ªä¾‹å­çš„å˜é‡æ²¡æœ‰å¯¹åº”çš„åŒåå±æ€§ï¼Œå¯¼è‡´å–ä¸åˆ°å€¼ï¼Œæœ€åç­‰äºundefinedã€‚ å¦‚æœè§£æ„å¤±è´¥ï¼Œå˜é‡çš„å€¼ç­‰äºundefinedã€‚ 12let {foo} = {bar: 'baz'};foo // undefined ä¸Šé¢ä»£ç ä¸­ï¼Œç­‰å·å³è¾¹çš„å¯¹è±¡æ²¡æœ‰fooå±æ€§ï¼Œæ‰€ä»¥å˜é‡fooå–ä¸åˆ°å€¼ï¼Œæ‰€ä»¥ç­‰äºundefinedã€‚ å¯¹è±¡çš„è§£æ„èµ‹å€¼ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿åœ°å°†ç°æœ‰å¯¹è±¡çš„æ–¹æ³•ï¼Œèµ‹å€¼åˆ°æŸä¸ªå˜é‡ã€‚ 123456// ä¾‹ä¸€let { log, sin, cos } = Math;// ä¾‹äºŒconst { log } = console;log('hello') // hello ä¸Šé¢ä»£ç çš„ä¾‹ä¸€å°† Math å¯¹è±¡çš„å¯¹æ•°ã€æ­£å¼¦ã€ä½™å¼¦ä¸‰ä¸ªæ–¹æ³•ï¼Œèµ‹å€¼åˆ°å¯¹åº”çš„å˜é‡ä¸Šï¼Œä½¿ç”¨èµ·æ¥å°±ä¼šæ–¹ä¾¿å¾ˆå¤šã€‚ä¾‹äºŒå°†console.logèµ‹å€¼åˆ°logå˜é‡ã€‚ å¦‚æœå˜é‡åä¸å±æ€§åä¸ä¸€è‡´ï¼Œå¿…é¡»å†™æˆä¸‹é¢è¿™æ ·ã€‚ 1234567let { foo: baz } = { foo: 'aaa', bar: 'bbb' };baz // \"aaa\"let obj = { first: 'hello', last: 'world' };let { first: f, last: l } = obj;f // 'hello'l // 'world' è¿™å®é™…ä¸Šè¯´æ˜ï¼Œå¯¹è±¡çš„è§£æ„èµ‹å€¼æ˜¯ä¸‹é¢å½¢å¼çš„ç®€å†™ï¼ˆå‚è§ã€Šå¯¹è±¡çš„æ‰©å±•ã€‹ä¸€ç« ï¼‰ã€‚ 1let { foo: foo, bar: bar } = { foo: 'aaa', bar: 'bbb' }; ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹è±¡çš„è§£æ„èµ‹å€¼çš„å†…éƒ¨æœºåˆ¶ï¼Œæ˜¯å…ˆæ‰¾åˆ°åŒåå±æ€§ï¼Œç„¶åå†èµ‹ç»™å¯¹åº”çš„å˜é‡ã€‚çœŸæ­£è¢«èµ‹å€¼çš„æ˜¯åè€…ï¼Œè€Œä¸æ˜¯å‰è€…ã€‚ 123let { foo: baz } = { foo: 'aaa', bar: 'bbb' };baz // \"aaa\"foo // error: foo is not defined ä¸Šé¢ä»£ç ä¸­ï¼Œfoo æ˜¯åŒ¹é…çš„æ¨¡å¼ï¼Œbaz æ‰æ˜¯å˜é‡ã€‚çœŸæ­£è¢«èµ‹å€¼çš„æ˜¯å˜é‡ bazï¼Œè€Œä¸æ˜¯æ¨¡å¼ fooã€‚ ä¸æ•°ç»„ä¸€æ ·ï¼Œè§£æ„ä¹Ÿå¯ä»¥ç”¨äºåµŒå¥—ç»“æ„çš„å¯¹è±¡ã€‚ 12345678910let obj = { p: [ 'Hello', { y: 'World' } ]};let { p: [x, { y }] } = obj;x // \"Hello\"y // \"World\" æ³¨æ„ï¼Œè¿™æ—¶ p æ˜¯æ¨¡å¼ï¼Œä¸æ˜¯å˜é‡ï¼Œå› æ­¤ä¸ä¼šè¢«èµ‹å€¼ã€‚å¦‚æœ p ä¹Ÿè¦ä½œä¸ºå˜é‡èµ‹å€¼ï¼Œå¯ä»¥å†™æˆä¸‹é¢è¿™æ ·ã€‚ 1234567891011let obj = { p: [ 'Hello', { y: 'World' } ]};let { p, p: [x, { y }] } = obj;x // \"Hello\"y // \"World\"p // [\"Hello\", {y: \"World\"}] ä¸‹é¢æ˜¯å¦ä¸€ä¸ªä¾‹å­ã€‚ 12345678910111213const node = { loc: { start: { line: 1, column: 5 } }};let { loc, loc: { start }, loc: { start: { line }} } = node;line // 1loc // Object {start: Object}start // Object {line: 1, column: 5} ä¸Šé¢ä»£ç æœ‰ä¸‰æ¬¡è§£æ„èµ‹å€¼ï¼Œåˆ†åˆ«æ˜¯å¯¹locã€startã€lineä¸‰ä¸ªå±æ€§çš„è§£æ„èµ‹å€¼ã€‚æ³¨æ„ï¼Œæœ€åä¸€æ¬¡å¯¹lineå±æ€§çš„è§£æ„èµ‹å€¼ä¹‹ä¸­ï¼Œåªæœ‰lineæ˜¯å˜é‡ï¼Œloc å’Œ start éƒ½æ˜¯æ¨¡å¼ï¼Œä¸æ˜¯å˜é‡ã€‚ ä¸‹é¢æ˜¯åµŒå¥—èµ‹å€¼çš„ä¾‹å­ã€‚ 1234567let obj = {};let arr = [];({ foo: obj.prop, bar: arr[0] } = { foo: 123, bar: true });obj // {prop:123}arr // [true] å¦‚æœè§£æ„æ¨¡å¼æ˜¯åµŒå¥—çš„å¯¹è±¡ï¼Œè€Œä¸”å­å¯¹è±¡æ‰€åœ¨çš„çˆ¶å±æ€§ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆå°†ä¼šæŠ¥é”™ã€‚ 12// æŠ¥é”™let {foo: {bar}} = {baz: 'baz'}; ä¸Šé¢ä»£ç ä¸­ï¼Œç­‰å·å·¦è¾¹å¯¹è±¡çš„ foo å±æ€§ï¼Œå¯¹åº”ä¸€ä¸ªå­å¯¹è±¡ã€‚è¯¥å­å¯¹è±¡çš„ bar å±æ€§ï¼Œè§£æ„æ—¶ä¼šæŠ¥é”™ã€‚åŸå› å¾ˆç®€å•ï¼Œå› ä¸º foo è¿™æ—¶ç­‰äºundefinedï¼Œå†å–å­å±æ€§å°±ä¼šæŠ¥é”™ã€‚ æ³¨æ„ï¼Œå¯¹è±¡çš„è§£æ„èµ‹å€¼å¯ä»¥å–åˆ°ç»§æ‰¿çš„å±æ€§ã€‚ 123456const obj1 = {};const obj2 = { foo: 'bar' };Object.setPrototypeOf(obj1, obj2);const { foo } = obj1;foo // \"bar\" ä¸Šé¢ä»£ç ä¸­ï¼Œå¯¹è±¡ obj1 çš„åŸå‹å¯¹è±¡æ˜¯ obj2 ã€‚foo å±æ€§ä¸æ˜¯ obj1 è‡ªèº«çš„å±æ€§ï¼Œè€Œæ˜¯ç»§æ‰¿è‡ª obj2 çš„å±æ€§ï¼Œè§£æ„èµ‹å€¼å¯ä»¥å–åˆ°è¿™ä¸ªå±æ€§ã€‚ é»˜è®¤å€¼å¯¹è±¡çš„è§£æ„ä¹Ÿå¯ä»¥æŒ‡å®šé»˜è®¤å€¼ã€‚ 123456789101112131415var {x = 3} = {};x // 3var {x, y = 5} = {x: 1};x // 1y // 5var {x: y = 3} = {};y // 3var {x: y = 3} = {x: 5};y // 5var { message: msg = 'Something went wrong' } = {};msg // \"Something went wrong\" é»˜è®¤å€¼ç”Ÿæ•ˆçš„æ¡ä»¶æ˜¯ï¼Œå¯¹è±¡çš„å±æ€§å€¼ä¸¥æ ¼ç­‰äºundefinedã€‚ 12345var {x = 3} = {x: undefined};x // 3var {x = 3} = {x: null};x // null æ³¨æ„ç‚¹ï¼ˆ1ï¼‰å¦‚æœè¦å°†ä¸€ä¸ªå·²ç»å£°æ˜çš„å˜é‡ç”¨äºè§£æ„èµ‹å€¼ï¼Œå¿…é¡»éå¸¸å°å¿ƒã€‚ 1234// é”™è¯¯çš„å†™æ³•let x;{x} = {x: 1};// SyntaxError: syntax error ä¸Šé¢ä»£ç çš„å†™æ³•ä¼šæŠ¥é”™ï¼Œå› ä¸º JavaScript å¼•æ“ä¼šå°†{x}ç†è§£æˆä¸€ä¸ªä»£ç å—ï¼Œä»è€Œå‘ç”Ÿè¯­æ³•é”™è¯¯ã€‚åªæœ‰ä¸å°†å¤§æ‹¬å·å†™åœ¨è¡Œé¦–ï¼Œé¿å… JavaScript å°†å…¶è§£é‡Šä¸ºä»£ç å—ï¼Œæ‰èƒ½è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ 123// æ­£ç¡®çš„å†™æ³•let x;({x} = {x: 1}); ä¸Šé¢ä»£ç å°†æ•´ä¸ªè§£æ„èµ‹å€¼è¯­å¥ï¼Œæ”¾åœ¨ä¸€ä¸ªåœ†æ‹¬å·é‡Œé¢ï¼Œå°±å¯ä»¥æ­£ç¡®æ‰§è¡Œã€‚å…³äºåœ†æ‹¬å·ä¸è§£æ„èµ‹å€¼çš„å…³ç³»ï¼Œå‚è§ä¸‹æ–‡ã€‚ ï¼ˆ2ï¼‰è§£æ„èµ‹å€¼å…è®¸ç­‰å·å·¦è¾¹çš„æ¨¡å¼ä¹‹ä¸­ï¼Œä¸æ”¾ç½®ä»»ä½•å˜é‡åã€‚å› æ­¤ï¼Œå¯ä»¥å†™å‡ºéå¸¸å¤æ€ªçš„èµ‹å€¼è¡¨è¾¾å¼ã€‚ 123({} = [true, false]);({} = 'abc');({} = []); ä¸Šé¢çš„è¡¨è¾¾å¼è™½ç„¶æ¯«æ— æ„ä¹‰ï¼Œä½†æ˜¯è¯­æ³•æ˜¯åˆæ³•çš„ï¼Œå¯ä»¥æ‰§è¡Œã€‚ ï¼ˆ3ï¼‰ç”±äºæ•°ç»„æœ¬è´¨æ˜¯ç‰¹æ®Šçš„å¯¹è±¡ï¼Œå› æ­¤å¯ä»¥å¯¹æ•°ç»„è¿›è¡Œå¯¹è±¡å±æ€§çš„è§£æ„ã€‚ 1234let arr = [1, 2, 3];let {0 : first, [arr.length - 1] : last} = arr;first // 1last // 3 ä¸Šé¢ä»£ç å¯¹æ•°ç»„è¿›è¡Œå¯¹è±¡è§£æ„ã€‚æ•°ç»„arrçš„0é”®å¯¹åº”çš„å€¼æ˜¯1ï¼Œ[arr.length - 1]å°±æ˜¯2é”®ï¼Œå¯¹åº”çš„å€¼æ˜¯3ã€‚æ–¹æ‹¬å·è¿™ç§å†™æ³•ï¼Œå±äºâ€œå±æ€§åè¡¨è¾¾å¼â€ï¼ˆå‚è§ã€Šå¯¹è±¡çš„æ‰©å±•ã€‹ä¸€ç« ï¼‰ã€‚ å­—ç¬¦ä¸²çš„è§£æ„èµ‹å€¼å­—ç¬¦ä¸²ä¹Ÿå¯ä»¥è§£æ„èµ‹å€¼ã€‚è¿™æ˜¯å› ä¸ºæ­¤æ—¶ï¼Œå­—ç¬¦ä¸²è¢«è½¬æ¢æˆäº†ä¸€ä¸ªç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ã€‚ 123456const [a, b, c, d, e] = 'hello';a // \"h\"b // \"e\"c // \"l\"d // \"l\"e // \"o\" ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡éƒ½æœ‰ä¸€ä¸ª length å±æ€§ï¼Œå› æ­¤è¿˜å¯ä»¥å¯¹è¿™ä¸ªå±æ€§è§£æ„èµ‹å€¼ã€‚ 12let {length : len} = 'hello';len // 5 æ•°å€¼å’Œå¸ƒå°”å€¼çš„è§£æ„èµ‹å€¼è§£æ„èµ‹å€¼æ—¶ï¼Œå¦‚æœç­‰å·å³è¾¹æ˜¯æ•°å€¼å’Œå¸ƒå°”å€¼ï¼Œåˆ™ä¼šå…ˆè½¬ä¸ºå¯¹è±¡ã€‚ 12345let {toString: s} = 123;s === Number.prototype.toString // truelet {toString: s} = true;s === Boolean.prototype.toString // true ä¸Šé¢ä»£ç ä¸­ï¼Œæ•°å€¼å’Œå¸ƒå°”å€¼çš„åŒ…è£…å¯¹è±¡éƒ½æœ‰toStringå±æ€§ï¼Œå› æ­¤å˜é‡séƒ½èƒ½å–åˆ°å€¼ã€‚ è§£æ„èµ‹å€¼çš„è§„åˆ™æ˜¯ï¼Œåªè¦ç­‰å·å³è¾¹çš„å€¼ä¸æ˜¯å¯¹è±¡æˆ–æ•°ç»„ï¼Œå°±å…ˆå°†å…¶è½¬ä¸ºå¯¹è±¡ã€‚ç”±äºundefinedå’Œnullæ— æ³•è½¬ä¸ºå¯¹è±¡ï¼Œæ‰€ä»¥å¯¹å®ƒä»¬è¿›è¡Œè§£æ„èµ‹å€¼ï¼Œéƒ½ä¼šæŠ¥é”™ã€‚ 12let { prop: x } = undefined; // TypeErrorlet { prop: y } = null; // TypeError å‡½æ•°å‚æ•°çš„è§£æ„èµ‹å€¼å‡½æ•°çš„å‚æ•°ä¹Ÿå¯ä»¥ä½¿ç”¨è§£æ„èµ‹å€¼ã€‚ 12345function add([x, y]){ return x + y;}add([1, 2]); // 3 ä¸Šé¢ä»£ç ä¸­ï¼Œå‡½æ•°addçš„å‚æ•°è¡¨é¢ä¸Šæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œä½†åœ¨ä¼ å…¥å‚æ•°çš„é‚£ä¸€åˆ»ï¼Œæ•°ç»„å‚æ•°å°±è¢«è§£æ„æˆå˜é‡xå’Œyã€‚å¯¹äºå‡½æ•°å†…éƒ¨çš„ä»£ç æ¥è¯´ï¼Œå®ƒä»¬èƒ½æ„Ÿå—åˆ°çš„å‚æ•°å°±æ˜¯xå’Œyã€‚ ä¸‹é¢æ˜¯å¦ä¸€ä¸ªä¾‹å­ã€‚ 12[[1, 2], [3, 4]].map(([a, b]) =&gt; a + b);// [ 3, 7 ] å‡½æ•°å‚æ•°çš„è§£æ„ä¹Ÿå¯ä»¥ä½¿ç”¨é»˜è®¤å€¼ã€‚ 12345678function move({x = 0, y = 0} = {}) { return [x, y];}move({x: 3, y: 8}); // [3, 8]move({x: 3}); // [3, 0]move({}); // [0, 0]move(); // [0, 0] ä¸Šé¢ä»£ç ä¸­ï¼Œå‡½æ•°moveçš„å‚æ•°æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé€šè¿‡å¯¹è¿™ä¸ªå¯¹è±¡è¿›è¡Œè§£æ„ï¼Œå¾—åˆ°å˜é‡xå’Œyçš„å€¼ã€‚å¦‚æœè§£æ„å¤±è´¥ï¼Œxå’Œyç­‰äºé»˜è®¤å€¼ã€‚ æ³¨æ„ï¼Œä¸‹é¢çš„å†™æ³•ä¼šå¾—åˆ°ä¸ä¸€æ ·çš„ç»“æœã€‚ 12345678function move({x, y} = { x: 0, y: 0 }) { return [x, y];}move({x: 3, y: 8}); // [3, 8]move({x: 3}); // [3, undefined]move({}); // [undefined, undefined]move(); // [0, 0] ä¸Šé¢ä»£ç æ˜¯ä¸ºå‡½æ•°moveçš„å‚æ•°æŒ‡å®šé»˜è®¤å€¼ï¼Œè€Œä¸æ˜¯ä¸ºå˜é‡xå’ŒyæŒ‡å®šé»˜è®¤å€¼ï¼Œæ‰€ä»¥ä¼šå¾—åˆ°ä¸å‰ä¸€ç§å†™æ³•ä¸åŒçš„ç»“æœã€‚ undefinedå°±ä¼šè§¦å‘å‡½æ•°å‚æ•°çš„é»˜è®¤å€¼ã€‚ 12[1, undefined, 3].map((x = 'yes') =&gt; x);// [ 1, 'yes', 3 ] åœ†æ‹¬å·é—®é¢˜è§£æ„èµ‹å€¼è™½ç„¶å¾ˆæ–¹ä¾¿ï¼Œä½†æ˜¯è§£æèµ·æ¥å¹¶ä¸å®¹æ˜“ã€‚å¯¹äºç¼–è¯‘å™¨æ¥è¯´ï¼Œä¸€ä¸ªå¼å­åˆ°åº•æ˜¯æ¨¡å¼ï¼Œè¿˜æ˜¯è¡¨è¾¾å¼ï¼Œæ²¡æœ‰åŠæ³•ä»ä¸€å¼€å§‹å°±çŸ¥é“ï¼Œå¿…é¡»è§£æåˆ°ï¼ˆæˆ–è§£æä¸åˆ°ï¼‰ç­‰å·æ‰èƒ½çŸ¥é“ã€‚ ç”±æ­¤å¸¦æ¥çš„é—®é¢˜æ˜¯ï¼Œå¦‚æœæ¨¡å¼ä¸­å‡ºç°åœ†æ‹¬å·æ€ä¹ˆå¤„ç†ã€‚ES6 çš„è§„åˆ™æ˜¯ï¼Œåªè¦æœ‰å¯èƒ½å¯¼è‡´è§£æ„çš„æ­§ä¹‰ï¼Œå°±ä¸å¾—ä½¿ç”¨åœ†æ‹¬å·ã€‚ ä½†æ˜¯ï¼Œè¿™æ¡è§„åˆ™å®é™…ä¸Šä¸é‚£ä¹ˆå®¹æ˜“è¾¨åˆ«ï¼Œå¤„ç†èµ·æ¥ç›¸å½“éº»çƒ¦ã€‚å› æ­¤ï¼Œå»ºè®®åªè¦æœ‰å¯èƒ½ï¼Œå°±ä¸è¦åœ¨æ¨¡å¼ä¸­æ”¾ç½®åœ†æ‹¬å·ã€‚ ä¸èƒ½ä½¿ç”¨åœ†æ‹¬å·çš„æƒ…å†µä»¥ä¸‹ä¸‰ç§è§£æ„èµ‹å€¼ä¸å¾—ä½¿ç”¨åœ†æ‹¬å·ã€‚ å˜é‡å£°æ˜è¯­å¥123456789// å…¨éƒ¨æŠ¥é”™let [(a)] = [1];let {x: (c)} = {};let ({x: c}) = {};let {(x: c)} = {};let {(x): c} = {};let { o: ({ p: p }) } = { o: { p: 2 } }; å‡½æ•°å‚æ•°å‡½æ•°å‚æ•°ä¹Ÿå±äºå˜é‡å£°æ˜ï¼Œå› æ­¤ä¸èƒ½å¸¦æœ‰åœ†æ‹¬å·ã€‚ 1234// æŠ¥é”™function f([(z)]) { return z; }// æŠ¥é”™function f([z,(x)]) { return x; } èµ‹å€¼è¯­å¥çš„æ¨¡å¼123// å…¨éƒ¨æŠ¥é”™({ p: a }) = { p: 42 };([a]) = [5]; ä¸Šé¢ä»£ç å°†æ•´ä¸ªæ¨¡å¼æ”¾åœ¨åœ†æ‹¬å·ä¹‹ä¸­ï¼Œå¯¼è‡´æŠ¥é”™ã€‚ 12// æŠ¥é”™[({ p: a }), { x: c }] = [{}, {}]; ä¸Šé¢ä»£ç å°†ä¸€éƒ¨åˆ†æ¨¡å¼æ”¾åœ¨åœ†æ‹¬å·ä¹‹ä¸­ï¼Œå¯¼è‡´æŠ¥é”™ã€‚ ä¸Šé¢ 6 ä¸ªè¯­å¥éƒ½ä¼šæŠ¥é”™ï¼Œå› ä¸ºå®ƒä»¬éƒ½æ˜¯å˜é‡å£°æ˜è¯­å¥ï¼Œæ¨¡å¼ä¸èƒ½ä½¿ç”¨åœ†æ‹¬å·ã€‚ å¯ä»¥ä½¿ç”¨åœ†æ‹¬å·çš„æƒ…å†µå¯ä»¥ä½¿ç”¨åœ†æ‹¬å·çš„æƒ…å†µåªæœ‰ä¸€ç§ï¼šèµ‹å€¼è¯­å¥çš„éæ¨¡å¼éƒ¨åˆ†ï¼Œå¯ä»¥ä½¿ç”¨åœ†æ‹¬å·ã€‚ 123[(b)] = [3]; // æ­£ç¡®({ p: (d) } = {}); // æ­£ç¡®[(parseInt.prop)] = [3]; // æ­£ç¡® ä¸Šé¢ä¸‰è¡Œè¯­å¥éƒ½å¯ä»¥æ­£ç¡®æ‰§è¡Œï¼Œå› ä¸ºé¦–å…ˆå®ƒä»¬éƒ½æ˜¯èµ‹å€¼è¯­å¥ï¼Œè€Œä¸æ˜¯å£°æ˜è¯­å¥ï¼›å…¶æ¬¡å®ƒä»¬çš„åœ†æ‹¬å·éƒ½ä¸å±äºæ¨¡å¼çš„ä¸€éƒ¨åˆ†ã€‚ç¬¬ä¸€è¡Œè¯­å¥ä¸­ï¼Œæ¨¡å¼æ˜¯å–æ•°ç»„çš„ç¬¬ä¸€ä¸ªæˆå‘˜ï¼Œè·Ÿåœ†æ‹¬å·æ— å…³ï¼›ç¬¬äºŒè¡Œè¯­å¥ä¸­ï¼Œæ¨¡å¼æ˜¯pï¼Œè€Œä¸æ˜¯dï¼›ç¬¬ä¸‰è¡Œè¯­å¥ä¸ç¬¬ä¸€è¡Œè¯­å¥çš„æ€§è´¨ä¸€è‡´ã€‚ ç”¨é€”å˜é‡çš„è§£æ„èµ‹å€¼ç”¨é€”å¾ˆå¤šã€‚ äº¤æ¢å˜é‡çš„å€¼1234let x = 1;let y = 2;[x, y] = [y, x]; ä¸Šé¢ä»£ç äº¤æ¢å˜é‡xå’Œyçš„å€¼ï¼Œè¿™æ ·çš„å†™æ³•ä¸ä»…ç®€æ´ï¼Œè€Œä¸”æ˜“è¯»ï¼Œè¯­ä¹‰éå¸¸æ¸…æ™°ã€‚ ä»å‡½æ•°è¿”å›å¤šä¸ªå€¼å‡½æ•°åªèƒ½è¿”å›ä¸€ä¸ªå€¼ï¼Œå¦‚æœè¦è¿”å›å¤šä¸ªå€¼ï¼Œåªèƒ½å°†å®ƒä»¬æ”¾åœ¨æ•°ç»„æˆ–å¯¹è±¡é‡Œè¿”å›ã€‚æœ‰äº†è§£æ„èµ‹å€¼ï¼Œå–å‡ºè¿™äº›å€¼å°±éå¸¸æ–¹ä¾¿ã€‚ 12345678910111213141516// è¿”å›ä¸€ä¸ªæ•°ç»„function example() { return [1, 2, 3];}let [a, b, c] = example();// è¿”å›ä¸€ä¸ªå¯¹è±¡function example() { return { foo: 1, bar: 2 };}let { foo, bar } = example(); å‡½æ•°å‚æ•°çš„å®šä¹‰è§£æ„èµ‹å€¼å¯ä»¥æ–¹ä¾¿åœ°å°†ä¸€ç»„å‚æ•°ä¸å˜é‡åå¯¹åº”èµ·æ¥ã€‚ 1234567// å‚æ•°æ˜¯ä¸€ç»„æœ‰æ¬¡åºçš„å€¼function f([x, y, z]) { ... }f([1, 2, 3]);// å‚æ•°æ˜¯ä¸€ç»„æ— æ¬¡åºçš„å€¼function f({x, y, z}) { ... }f({z: 3, y: 2, x: 1}); æå– JSON æ•°æ®è§£æ„èµ‹å€¼å¯¹æå– JSON å¯¹è±¡ä¸­çš„æ•°æ®ï¼Œå°¤å…¶æœ‰ç”¨ã€‚ 12345678910let jsonData = { id: 42, status: \"OK\", data: [867, 5309]};let { id, status, data: number } = jsonData;console.log(id, status, number);// 42, \"OK\", [867, 5309] ä¸Šé¢ä»£ç å¯ä»¥å¿«é€Ÿæå– JSON æ•°æ®çš„å€¼ã€‚ å‡½æ•°å‚æ•°çš„é»˜è®¤å€¼1234567891011jQuery.ajax = function (url, { async = true, beforeSend = function () {}, cache = true, complete = function () {}, crossDomain = false, global = true, // ... more config} = {}) { // ... do stuff}; æŒ‡å®šå‚æ•°çš„é»˜è®¤å€¼ï¼Œå°±é¿å…äº†åœ¨å‡½æ•°ä½“å†…éƒ¨å†å†™var foo = config.foo || 'default foo';è¿™æ ·çš„è¯­å¥ã€‚ éå† Map ç»“æ„ä»»ä½•éƒ¨ç½²äº† Iterator æ¥å£çš„å¯¹è±¡ï¼Œéƒ½å¯ä»¥ç”¨forâ€¦ofå¾ªç¯éå†ã€‚Map ç»“æ„åŸç”Ÿæ”¯æŒ Iterator æ¥å£ï¼Œé…åˆå˜é‡çš„è§£æ„èµ‹å€¼ï¼Œè·å–é”®åå’Œé”®å€¼å°±éå¸¸æ–¹ä¾¿ã€‚ 123456789const map = new Map();map.set('first', 'hello');map.set('second', 'world');for (let [key, value] of map) { console.log(key + \" is \" + value);}// first is hello// second is world å¦‚æœåªæƒ³è·å–é”®åï¼Œæˆ–è€…åªæƒ³è·å–é”®å€¼ï¼Œå¯ä»¥å†™æˆä¸‹é¢è¿™æ ·ã€‚ 123456789// è·å–é”®åfor (let [key] of map) { // ...}// è·å–é”®å€¼for (let [,value] of map) { // ...} è¾“å…¥æ¨¡å—çš„æŒ‡å®šæ–¹æ³•åŠ è½½æ¨¡å—æ—¶ï¼Œå¾€å¾€éœ€è¦æŒ‡å®šè¾“å…¥å“ªäº›æ–¹æ³•ã€‚è§£æ„èµ‹å€¼ä½¿å¾—è¾“å…¥è¯­å¥éå¸¸æ¸…æ™°ã€‚ 1const { SourceMapConsumer, SourceNode } = require(\"source-map\"); æˆ‘çš„æ€»ç»“1 æ•°ç»„çš„è§£æ„èµ‹å€¼ â€œæ¨¡å¼åŒ¹é…â€ï¼Œåªè¦ç­‰å·ä¸¤è¾¹çš„æ¨¡å¼ç›¸åŒï¼Œå·¦è¾¹çš„å˜é‡å°±ä¼šè¢«èµ‹äºˆå¯¹åº”çš„å€¼ ä¸å®Œå…¨è§£æ„ å³ç­‰å·å·¦è¾¹çš„æ¨¡å¼ï¼ŒåªåŒ¹é…ä¸€éƒ¨åˆ†çš„ç­‰å·å³è¾¹çš„æ•°ç»„ å¦‚æœç­‰å·çš„å³è¾¹ä¸æ˜¯æ•°ç»„ï¼ˆæˆ–è€…ä¸¥æ ¼åœ°è¯´ï¼Œä¸æ˜¯å¯éå†çš„ç»“æ„ï¼‰å°±ä¼šæŠ¥é”™ åªæœ‰å½“ä¸€ä¸ªæ•°ç»„æˆå‘˜ä¸¥æ ¼ç­‰äºundefinedï¼Œé»˜è®¤å€¼æ‰ä¼šç”Ÿæ•ˆï¼ˆES6 å†…éƒ¨ä½¿ç”¨ä¸¥æ ¼ç›¸ç­‰è¿ç®—ç¬¦ï¼ˆ===ï¼‰ï¼Œåˆ¤æ–­ä¸€ä¸ªä½ç½®æ˜¯å¦æœ‰å€¼ï¼‰ é»˜è®¤å€¼å¯ä»¥å¼•ç”¨è§£æ„èµ‹å€¼çš„å…¶ä»–å˜é‡ï¼Œä½†è¯¥å˜é‡å¿…é¡»å·²ç»å£°æ˜ã€‚ 2 å¯¹è±¡çš„è§£æ„èµ‹å€¼ å¯¹è±¡çš„è§£æ„ä¸æ•°ç»„æœ‰ä¸€ä¸ªé‡è¦çš„ä¸åŒã€‚æ•°ç»„çš„å…ƒç´ æ˜¯æŒ‰æ¬¡åºæ’åˆ—çš„ï¼Œå˜é‡çš„å–å€¼ç”±å®ƒçš„ä½ç½®å†³å®šï¼›è€Œå¯¹è±¡çš„å±æ€§æ²¡æœ‰æ¬¡åºï¼Œå˜é‡å¿…é¡»ä¸å±æ€§åŒåï¼Œæ‰èƒ½å–åˆ°æ­£ç¡®çš„å€¼ã€‚å¦åˆ™å˜é‡ä¸ºundefined ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹è±¡çš„è§£æ„èµ‹å€¼çš„å†…éƒ¨æœºåˆ¶ï¼Œæ˜¯å…ˆæ‰¾åˆ°åŒåå±æ€§ï¼Œç„¶åå†èµ‹ç»™å¯¹åº”çš„å˜é‡ã€‚çœŸæ­£è¢«èµ‹å€¼çš„æ˜¯åè€…ï¼Œè€Œä¸æ˜¯å‰è€…ã€‚ å¦‚æœè§£æ„æ¨¡å¼æ˜¯åµŒå¥—çš„å¯¹è±¡ï¼Œè€Œä¸”å­å¯¹è±¡æ‰€åœ¨çš„çˆ¶å±æ€§ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆå°†ä¼šæŠ¥é”™ã€‚ å¯¹è±¡çš„è§£æ„èµ‹å€¼å¯ä»¥å–åˆ°ç»§æ‰¿çš„å±æ€§ã€‚ 3 å­—ç¬¦ä¸²çš„è§£æ„èµ‹å€¼ 4 å­—ç¬¦ä¸²çš„è§£æ„èµ‹å€¼ å­—ç¬¦ä¸²è¢«è½¬æ¢æˆäº†ä¸€ä¸ªç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ã€‚ 5 æ•°å€¼å’Œå¸ƒå°”å€¼çš„è§£æ„èµ‹å€¼ è§£æ„èµ‹å€¼çš„è§„åˆ™æ˜¯ï¼Œåªè¦ç­‰å·å³è¾¹çš„å€¼ä¸æ˜¯å¯¹è±¡æˆ–æ•°ç»„ï¼Œå°±å…ˆå°†å…¶è½¬ä¸ºå¯¹è±¡ã€‚ç”±äºundefinedå’Œnullæ— æ³•è½¬ä¸ºå¯¹è±¡ï¼Œæ‰€ä»¥å¯¹å®ƒä»¬è¿›è¡Œè§£æ„èµ‹å€¼ï¼Œéƒ½ä¼šæŠ¥é”™ã€‚ 6.ç”¨é€” äº¤æ¢å˜é‡çš„å€¼ ä»å‡½æ•°è¿”å›å¤šä¸ªå€¼ å‡½æ•°å‚æ•°çš„å®šä¹‰ æå– JSON æ•°æ® å‡½æ•°å‚æ•°çš„é»˜è®¤å€¼ éå† Map ç»“æ„ è¾“å…¥æ¨¡å—çš„æŒ‡å®šæ–¹æ³•","link":"/2020/05/09/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80/es6/%E5%8F%98%E9%87%8F%E7%9A%84%E8%A7%A3%E6%9E%84%E4%B8%8E%E8%B5%8B%E5%80%BC/"},{"title":"è®¡ç®—æœºç½‘ç»œåè®®","text":"ç”±æ¥ï¼š æ˜¯ä»€ä¹ˆï¼š","link":"/2020/05/09/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE/"},{"title":"å­—ç¬¦ä¸²å‡½æ•°å¤§å…¨","text":"å­—ç¬¦ä¸²å±æ€§ [waring] æ‰€æœ‰ String çš„å®ä¾‹éƒ½ç»§æ‰¿è‡ª String.prototype. ä»»ä½•String.prototypeä¸Šçš„æ”¹å˜éƒ½ä¼šå½±å“åˆ°æ‰€æœ‰çš„ String å®ä¾‹ã€‚ å­—ç¬¦ä¸²æ–¹æ³•è¿”å›ç‰¹å®šä½ç½®çš„å­—ç¬¦(charAt)String.prototype.charAt() 12let str = 'garmin';str.charAt(2); // r è¿”å›è¡¨ç¤ºç»™å®šç´¢å¼•çš„å­—ç¬¦çš„Unicodeçš„å€¼String.prototype.charCodeAt() 12let str = 'garmin';str.charCodeAt(2); // 114 è¿”å›ä½¿ç”¨UTF-16ç¼–ç çš„ç»™å®šä½ç½®çš„å€¼çš„éè´Ÿæ•´æ•°String.prototype.codePointAt() 12let str = 'garmin';str.codePointAt(2); // 114 è¿æ¥ä¸¤ä¸ªå­—ç¬¦ä¸²æ–‡æœ¬ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²String.prototype.concat() 1234let str1 = 'garmin';let str2 = ' javascript';str1.concat(str2); // garmin javascript åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸²é‡Œæ˜¯å¦åŒ…å«å…¶ä»–å­—ç¬¦ä¸²String.prototype.includes() 12let str = 'garmin';str.includes('g'); // true åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸²çš„æ˜¯å¦ä»¥ç»™å®šå­—ç¬¦ä¸²ç»“å°¾ï¼Œç»“æœè¿”å›å¸ƒå°”å€¼String.prototype.endsWith() 12let str = 'garmin';str.endsWith('n'); // true ä»å­—ç¬¦ä¸²å¯¹è±¡ä¸­è¿”å›é¦–ä¸ªè¢«å‘ç°çš„ç»™å®šå€¼çš„ç´¢å¼•å€¼ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°åˆ™è¿”å›-1String.prototype.indexOf() 12let str = 'garmin';str.indexOf('g'); // 0 lastIndexOf è¿”å›ä¸€ä¸ªæ•°å­—è¡¨ç¤ºæ˜¯å¦å¼•ç”¨å­—ç¬¦ä¸²åœ¨æ’åºä¸­ä½äºæ¯”è¾ƒå­—ç¬¦ä¸²çš„å‰é¢ï¼Œåé¢ï¼Œæˆ–è€…äºŒè€…ç›¸åŒString.prototype.localeCompare() 123let str = 'garmin';str.localeCompare('g'); // 1str.localeCompare(','); // 1 ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ä¸å­—ç¬¦ä¸²ç›¸æ¯”è¾ƒã€‚String.prototype.match() 12let str = 'What is garmin';str.match('garmin'); // ['garmin'] è¿”å›è°ƒç”¨å­—ç¬¦ä¸²å€¼çš„Unicodeæ ‡å‡†åŒ–å½¢å¼String.prototype.normalize() 12let str = 'What is garmin';str.normalize(); // ** å­—ç¬¦ä¸²è¡¥å…¨padEnd / padStart 12let str = 'What is garmin';str.padEnd(20, '0'); // \"What is garmin000000\" æˆ‘çš„æ€»ç»“","link":"/2020/05/24/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80/es6/%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%87%BD%E6%95%B0%E5%A4%A7%E5%85%A8/"},{"title":"å‰ç«¯åŸºç¡€/es6/unicode/unicodeåŠå…¶å®ƒè½¬ç ","text":"","link":"/2020/05/13/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80/es6/unicode/unicode%E5%8F%8A%E5%85%B6%E5%AE%83%E8%BD%AC%E7%A0%81/"},{"title":"é¡¹ç›®åŸºç¡€éƒ¨ç½²","text":"è®°å½•laravelåŸºç¡€çš„é…ç½®éƒ¨ç½² å®‰è£…ä¸¤ç§å®‰è£…laravelé¡¹ç›®æ–¹å¼ï¼š laravelå®‰è£…å™¨1234composer global require &quot;laravel/installer&quot;// åˆ›å»ºé¡¹ç›®laravel new garmin é€šè¿‡composeræ‹‰å–laravelåŒ…1composer create-project --prefer-dist laravel/laravel garmin &quot;5.5.*&quot; é…ç½®æ–°åˆ›å»ºçš„é¡¹ç›®éœ€è¦è¿›è¡Œé…ç½®ï¼Œ é…ç½®æ–‡ä»¶envåœ¨laravelç¨‹åºè·å–é…ç½®æ—¶ä¼šå…ˆè¿›è¡Œå¯¹.env æ–‡ä»¶è®¿é—®ï¼Œè·å–ç›¸åº”é…ç½®ï¼Œ.envåœ¨å›¢é˜Ÿå¼€å‘æ—¶å¯ä»¥æœ‰æ•ˆçš„ä½¿æˆå‘˜ç†Ÿæ‚‰é…ç½®ï¼Œå’Œé¿å…æ•æ„Ÿä¿¡æ¯æäº¤åˆ°githubç­‰å¼€æºåº“æœ‰ä¸ªenvæ¨¡æ¿.env.exampleå°†å®ƒå¤åˆ¶é‡å‘½åå†é…ç½®é¡¹ç›® 1cp -a .env.example .env ç”ŸæˆAppKeylaravel å°†å¯†é’¥ç”¨äºæ‰€æœ‰åŠ å¯†çš„ cookie (åŒ…æ‹¬ä¼šè¯ cookie)ï¼Œç„¶åå†å°†å…¶äº¤ç»™ç”¨æˆ·æµè§ˆå™¨ï¼Œå¹¶ä½¿ç”¨å®ƒè§£å¯†ä»æµè§ˆå™¨è¯»å–çš„ cookieã€‚è¿™æ ·å¯ä»¥é˜²æ­¢å®¢æˆ·ç«¯æ›´æ”¹å…¶ cookie å¹¶ä¸ºå…¶æˆäºˆç®¡ç†å‘˜ç‰¹æƒæˆ–æ¨¡æ‹Ÿåº”ç”¨ç¨‹åºä¸­çš„å…¶ä»–ç”¨æˆ·ã€‚åŠ å¯†çš„ cookie æ˜¯ Laravel ä¸­çš„é‡è¦å®‰å…¨ç‰¹æ€§ã€‚ç”Ÿäº§key 1php artisan key:generate åˆ°æ­¤é¡¹ç›®å°±å¯ä»¥è¿è¡Œèµ·æ¥äº†ï¼ï¼ï¼ æ·»åŠ è‡ªå®šä¹‰å…¬å…±å‡½æ•° åˆ›å»ºè‡ªå®šä¹‰çš„å…¬å…±å‡½æ•° 1touch boostrap/heplers.php æŠŠè‡ªå®šä¹‰æ–‡ä»¶æ·»åŠ åˆ°è‡ªåŠ¨åŠ è½½ä¸­åœ¨æ ¹ç›®å½•ä¸‹çš„composer.jsonæ–‡ä»¶ä¸‹çš„autoload æ·»åŠ é…ç½® 1&quot;files&quot;: [ &quot;app/helpers.php&quot; ]; ä¿®æ”¹ä¿å­˜åè¿è¡Œä»¥ä¸‹å‘½ä»¤è¿›è¡Œé‡æ–°åŠ è½½æ–‡ä»¶å³å¯ï¼š 1composer dump-autoload","link":"/2020/05/14/php/laravel/%E5%9F%BA%E7%A1%80/%E9%A1%B9%E7%9B%AE%E5%9F%BA%E7%A1%80%E9%83%A8%E7%BD%B2/"},{"title":"é¡µé¢è°ƒä¼˜ Debugbar","text":"è®°å½•laravelåŸºç¡€çš„é…ç½®éƒ¨ç½² ä½œç”¨&amp;åŠŸèƒ½ä½¿ç”¨ Intervention/image æ‰©å±•åŒ…æ¥å¤„ç†å›¾ç‰‡è£åˆ‡çš„é€»è¾‘ å®‰è£…Composer å®‰è£…1composer require &quot;barryvdh/laravel-debugbar:~3.1&quot; --dev é…ç½®ç”Ÿæˆé…ç½®æ–‡ä»¶ï¼Œå­˜æ”¾ä½ç½® config/debugbar.phpï¼š 1php artisan vendor:publish --provider=&quot;Barryvdh\\Debugbar\\ServiceProvider&quot; æ‰“å¼€ config/debugbar.phpï¼Œå°† enabled çš„å€¼è®¾ç½®ä¸ºï¼š 1'enabled' =&gt; env('APP_DEBUG', false), ä½¿ç”¨] 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566&lt;?phpnamespace App\\Handlers;use Image;class ImageUploadHandler{ protected $allowed_ext = [\"png\", \"jpg\", \"gif\", 'jpeg']; public function save($file, $folder, $file_prefix, $max_width = false) { // æ„å»ºå­˜å‚¨çš„æ–‡ä»¶å¤¹è§„åˆ™ï¼Œå€¼å¦‚ï¼šuploads/images/avatars/201709/21/ // æ–‡ä»¶å¤¹åˆ‡å‰²èƒ½è®©æŸ¥æ‰¾æ•ˆç‡æ›´é«˜ã€‚ $folder_name = \"uploads/images/$folder/\" . date(\"Ym/d\", time()); // æ–‡ä»¶å…·ä½“å­˜å‚¨çš„ç‰©ç†è·¯å¾„ï¼Œ`public_path()` è·å–çš„æ˜¯ `public` æ–‡ä»¶å¤¹çš„ç‰©ç†è·¯å¾„ã€‚ // å€¼å¦‚ï¼š/home/vagrant/Code/larabbs/public/uploads/images/avatars/201709/21/ $upload_path = public_path() . '/' . $folder_name; // è·å–æ–‡ä»¶çš„åç¼€åï¼Œå› å›¾ç‰‡ä»å‰ªè´´æ¿é‡Œé»è´´æ—¶åç¼€åä¸ºç©ºï¼Œæ‰€ä»¥æ­¤å¤„ç¡®ä¿åç¼€ä¸€ç›´å­˜åœ¨ $extension = strtolower($file-&gt;getClientOriginalExtension()) ?: 'png'; // æ‹¼æ¥æ–‡ä»¶åï¼ŒåŠ å‰ç¼€æ˜¯ä¸ºäº†å¢åŠ è¾¨æåº¦ï¼Œå‰ç¼€å¯ä»¥æ˜¯ç›¸å…³æ•°æ®æ¨¡å‹çš„ ID // å€¼å¦‚ï¼š1_1493521050_7BVc9v9ujP.png $filename = $file_prefix . '_' . time() . '_' . str_random(10) . '.' . $extension; // å¦‚æœä¸Šä¼ çš„ä¸æ˜¯å›¾ç‰‡å°†ç»ˆæ­¢æ“ä½œ if ( ! in_array($extension, $this-&gt;allowed_ext)) { return false; } // å°†å›¾ç‰‡ç§»åŠ¨åˆ°æˆ‘ä»¬çš„ç›®æ ‡å­˜å‚¨è·¯å¾„ä¸­ $file-&gt;move($upload_path, $filename); // å¦‚æœé™åˆ¶äº†å›¾ç‰‡å®½åº¦ï¼Œå°±è¿›è¡Œè£å‰ª if ($max_width &amp;&amp; $extension != 'gif') { // æ­¤ç±»ä¸­å°è£…çš„å‡½æ•°ï¼Œç”¨äºè£å‰ªå›¾ç‰‡ $this-&gt;reduceSize($upload_path . '/' . $filename, $max_width); } return [ 'path' =&gt; config('app.url') . \"/$folder_name/$filename\" ]; } public function reduceSize($file_path, $max_width) { // å…ˆå®ä¾‹åŒ–ï¼Œä¼ å‚æ˜¯æ–‡ä»¶çš„ç£ç›˜ç‰©ç†è·¯å¾„ $image = Image::make($file_path); // è¿›è¡Œå¤§å°è°ƒæ•´çš„æ“ä½œ $image-&gt;resize($max_width, null, function ($constraint) { // è®¾å®šå®½åº¦æ˜¯ $max_widthï¼Œé«˜åº¦ç­‰æ¯”ä¾‹åŒæ–¹ç¼©æ”¾ $constraint-&gt;aspectRatio(); // é˜²æ­¢è£å›¾æ—¶å›¾ç‰‡å°ºå¯¸å˜å¤§ $constraint-&gt;upsize(); }); // å¯¹å›¾ç‰‡ä¿®æ”¹åè¿›è¡Œä¿å­˜ $image-&gt;save(); }} æ‹“å±•","link":"/2020/05/17/php/laravel/%E6%89%A9%E5%B1%95%E5%8C%85/Debugbar/"},{"title":"Httpè¯·æ±‚-Guzzle","text":"Guzzle åº“æ˜¯ä¸€å¥—å¼ºå¤§çš„ PHP HTTP è¯·æ±‚å¥—ä»¶ï¼Œæˆ‘ä»¬ä½¿ç”¨ Guzzle çš„ HTTP å®¢æˆ·ç«¯æ¥è¯·æ±‚æ¥å£ã€‚ ä½œç”¨&amp;åŠŸèƒ½Guzzle åº“æ˜¯ä¸€å¥—å¼ºå¤§çš„ PHP HTTP è¯·æ±‚å¥—ä»¶ï¼Œæˆ‘ä»¬ä½¿ç”¨ Guzzle çš„ HTTP å®¢æˆ·ç«¯æ¥è¯·æ±‚æ¥å£ã€‚ å®‰è£…Composer å®‰è£…1composer require &quot;guzzlehttp/guzzle:~6.3&quot; é…ç½®ç”Ÿæˆé…ç½®æ–‡ä»¶ï¼Œå­˜æ”¾ä½ç½® config/debugbar.phpï¼š 1php artisan vendor:publish --provider=&quot;Mews\\Purifier\\PurifierServiceProvider&quot; è¯·å°†é…ç½®ä¿¡æ¯æ›¿æ¢ä¸ºä»¥ä¸‹: config/purifier.php 123456789101112131415161718&lt;?phpreturn [ 'encoding' =&gt; 'UTF-8', 'finalize' =&gt; true, 'cachePath' =&gt; storage_path('app/purifier'), 'cacheFileMode' =&gt; 0755, 'settings' =&gt; [ 'user_topic_body' =&gt; [ 'HTML.Doctype' =&gt; 'XHTML 1.0 Transitional', 'HTML.Allowed' =&gt; 'div,b,strong,i,em,a[href|title],ul,ol,ol[start],li,p[style],br,span[style],img[width|height|alt|src],*[style|class],pre,hr,code,h2,h3,h4,h5,h6,blockquote,del,table,thead,tbody,tr,th,td', 'CSS.AllowedProperties' =&gt; 'font,font-size,font-weight,font-style,margin,width,height,font-family,text-decoration,padding-left,color,background-color,text-align', 'AutoFormat.AutoParagraph' =&gt; true, 'AutoFormat.RemoveEmpty' =&gt; true, ], ],]; ä½¿ç”¨é…ç½®é‡Œçš„ user_topic_body æ˜¯æˆ‘ä»¬ä¸ºè¯é¢˜å†…å®¹å®šåˆ¶çš„ï¼Œé…åˆ clean() æ–¹æ³•ä½¿ç”¨ï¼š 1$topic-&gt;body = clean($topic-&gt;body, 'user_topic_body'); user_topic_bodyæ˜¯configé…ç½®é‡Œçš„ 123456789101112131415return [ 'encoding' =&gt; 'UTF-8', 'finalize' =&gt; true, 'cachePath' =&gt; storage_path('app/purifier'), 'cacheFileMode' =&gt; 0755, 'settings' =&gt; [ 'user_topic_body' =&gt; [ 'HTML.Doctype' =&gt; 'XHTML 1.0 Transitional', 'HTML.Allowed' =&gt; 'div,b,strong,i,em,a[href|title],ul,ol,ol[start],li,p[style],br,span[style],img[width|height|alt|src],*[style|class],pre,hr,code,h2,h3,h4,h5,h6,blockquote,del,table,thead,tbody,tr,th,td', 'CSS.AllowedProperties' =&gt; 'font,font-size,font-weight,font-style,margin,width,height,font-family,text-decoration,padding-left,color,background-color,text-align', 'AutoFormat.AutoParagraph' =&gt; true, 'AutoFormat.RemoveEmpty' =&gt; true, ], ],]; æ‹“å±•","link":"/2020/05/19/php/laravel/%E6%89%A9%E5%B1%95%E5%8C%85/Http%E8%AF%B7%E6%B1%82-Guzzle/"},{"title":"ä¸­æ–‡è½¬è‹±æ–‡-PinYin","text":"PinYin æ˜¯ å®‰æ­£è¶… å¼€å‘çš„ï¼ŒåŸºäº CC-CEDICT è¯å…¸çš„ä¸­æ–‡è½¬æ‹¼éŸ³å·¥å…·ï¼Œæ˜¯ä¸€å¥—ä¼˜è´¨çš„æ±‰å­—è½¬æ‹¼éŸ³è§£å†³æ–¹æ¡ˆã€‚æˆ‘ä»¬ä½¿ç”¨ PinYin æ¥ä½œä¸ºç¿»è¯‘çš„åå¤‡è®¡åˆ’ï¼Œå½“ç™¾åº¦ç¿»è¯‘ API ä¸å¯ç”¨æ—¶ï¼Œç¨‹åºä¼šè‡ªåŠ¨ä½¿ç”¨ PinYin æ±‰å­—è½¬æ‹¼éŸ³æ–¹æ¡ˆæ¥ç”Ÿæˆ Slugã€‚ ä½œç”¨&amp;åŠŸèƒ½PinYin æ˜¯ å®‰æ­£è¶… å¼€å‘çš„ï¼ŒåŸºäº CC-CEDICT è¯å…¸çš„ä¸­æ–‡è½¬æ‹¼éŸ³å·¥å…·ï¼Œæ˜¯ä¸€å¥—ä¼˜è´¨çš„æ±‰å­—è½¬æ‹¼éŸ³è§£å†³æ–¹æ¡ˆã€‚æˆ‘ä»¬ä½¿ç”¨ PinYin æ¥ä½œä¸ºç¿»è¯‘çš„åå¤‡è®¡åˆ’ï¼Œå½“ç™¾åº¦ç¿»è¯‘ API ä¸å¯ç”¨æ—¶ï¼Œç¨‹åºä¼šè‡ªåŠ¨ä½¿ç”¨ PinYin æ±‰å­—è½¬æ‹¼éŸ³æ–¹æ¡ˆæ¥ç”Ÿæˆ Slugã€‚ å®‰è£…Composer å®‰è£…1composer require &quot;overtrue/pinyin:~3.0&quot; é…ç½®ä½¿ç”¨æ‹“å±•","link":"/2020/05/20/php/laravel/%E6%89%A9%E5%B1%95%E5%8C%85/%E4%B8%AD%E6%96%87%E8%BD%AC%E8%8B%B1%E6%96%87-PinYin/"},{"title":"æƒé™ç®¡ç†-laravel-permission","text":"Laravel-permission ä½œç”¨&amp;åŠŸèƒ½ Laravel-permission å®‰è£…Composer å®‰è£…1composer require &quot;spatie/laravel-permission:~2.7&quot; ç”Ÿæˆæ•°æ®åº“è¿ç§»æ–‡ä»¶ï¼š 1php artisan vendor:publish --provider=&quot;Spatie\\Permission\\PermissionServiceProvider&quot; --tag=&quot;migrations&quot; é…ç½® ä¸‹å›¾æ˜¯ laravel-permission çš„æ•°æ®åº“è¡¨ç»“æ„ï¼š æ•°æ®è¡¨å„è‡ªçš„ä½œç”¨ï¼š roles â€”â€” è§’è‰²çš„æ¨¡å‹è¡¨ï¼› permissions â€”â€” æƒé™çš„æ¨¡å‹è¡¨ï¼› model_has_roles â€”â€” æ¨¡å‹ä¸è§’è‰²çš„å…³è”è¡¨ï¼Œç”¨æˆ·æ‹¥æœ‰ä»€ä¹ˆè§’è‰²åœ¨æ­¤è¡¨ä¸­å®šä¹‰ï¼Œä¸€ä¸ªç”¨æˆ·èƒ½æ‹¥æœ‰å¤šä¸ªè§’è‰²ï¼› role_has_permissions â€”â€” è§’è‰²æ‹¥æœ‰çš„æƒé™å…³è”è¡¨ï¼Œå¦‚ç®¡ç†å‘˜æ‹¥æœ‰æŸ¥çœ‹åå°çš„æƒé™éƒ½æ˜¯åœ¨æ­¤è¡¨å®šä¹‰ï¼Œä¸€ä¸ªè§’è‰²èƒ½æ‹¥æœ‰å¤šä¸ªæƒé™ï¼› model_has_permissions â€”â€” æ¨¡å‹ä¸æƒé™å…³è”è¡¨ï¼Œä¸€ä¸ªæ¨¡å‹èƒ½æ‹¥æœ‰å¤šä¸ªæƒé™ã€‚ ä½¿ç”¨1php artisan migrate ç”Ÿæˆé…ç½®ä¿¡æ¯ï¼š 1php artisan vendor:publish --provider=&quot;Spatie\\Permission\\PermissionServiceProvider&quot; --tag=&quot;config&quot; é…ç½®ä¿¡æ¯å­˜æ”¾äº config/permission.php ï¼Œå¯ä»¥æ‰“å¼€æ­¤æ–‡ä»¶ç§ä¸€ç§ï¼Œç›®å‰æˆ‘ä»¬ä¸éœ€è¦åšä»»ä½•ä¿®æ”¹ã€‚ åŠ è½½ HasRoles æˆ‘ä»¬è¿˜éœ€åœ¨ User ä¸­ä½¿ç”¨ laravel-permission æä¾›çš„ Trait â€”â€” HasRolesï¼Œæ­¤ä¸¾èƒ½è®©æˆ‘ä»¬è·å–åˆ°æ‰©å±•åŒ…æä¾›çš„æ‰€æœ‰æƒé™å’Œè§’è‰²çš„æ“ä½œæ–¹æ³•ã€‚ app/Models/User.php 123456789use Spatie\\Permission\\Traits\\HasRoles;class User extends Authenticatable{ use HasRoles; . . .} åˆå§‹åŒ–è§’è‰²å’Œæƒé™æ‹“å±•","link":"/2020/05/24/php/laravel/%E6%89%A9%E5%B1%95%E5%8C%85/%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86-laravel-permission/"},{"title":"å›¾ç‰‡å¤„ç† intervention/image","text":"è®°å½•laravelåŸºç¡€çš„é…ç½®éƒ¨ç½² ä½œç”¨&amp;åŠŸèƒ½ä½¿ç”¨ Intervention/image æ‰©å±•åŒ…æ¥å¤„ç†å›¾ç‰‡è£åˆ‡çš„é€»è¾‘ å®‰è£…Composer å®‰è£…1composer require intervention/image é…ç½®1php artisan vendor:publish --provider=&quot;Intervention\\Image\\ImageServiceProviderLaravel5&quot; æ‰“å¼€ config/image.php æ–‡ä»¶å¯ä»¥çœ‹åˆ°åªæœ‰ä¸€ä¸ªé©±åŠ¨å™¨çš„é€‰é¡¹ï¼Œæ”¯æŒçš„å€¼æœ‰ GD åº“ å’Œ ImageMagicï¼š ä½¿ç”¨] 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566&lt;?phpnamespace App\\Handlers;use Image;class ImageUploadHandler{ protected $allowed_ext = [\"png\", \"jpg\", \"gif\", 'jpeg']; public function save($file, $folder, $file_prefix, $max_width = false) { // æ„å»ºå­˜å‚¨çš„æ–‡ä»¶å¤¹è§„åˆ™ï¼Œå€¼å¦‚ï¼šuploads/images/avatars/201709/21/ // æ–‡ä»¶å¤¹åˆ‡å‰²èƒ½è®©æŸ¥æ‰¾æ•ˆç‡æ›´é«˜ã€‚ $folder_name = \"uploads/images/$folder/\" . date(\"Ym/d\", time()); // æ–‡ä»¶å…·ä½“å­˜å‚¨çš„ç‰©ç†è·¯å¾„ï¼Œ`public_path()` è·å–çš„æ˜¯ `public` æ–‡ä»¶å¤¹çš„ç‰©ç†è·¯å¾„ã€‚ // å€¼å¦‚ï¼š/home/vagrant/Code/larabbs/public/uploads/images/avatars/201709/21/ $upload_path = public_path() . '/' . $folder_name; // è·å–æ–‡ä»¶çš„åç¼€åï¼Œå› å›¾ç‰‡ä»å‰ªè´´æ¿é‡Œé»è´´æ—¶åç¼€åä¸ºç©ºï¼Œæ‰€ä»¥æ­¤å¤„ç¡®ä¿åç¼€ä¸€ç›´å­˜åœ¨ $extension = strtolower($file-&gt;getClientOriginalExtension()) ?: 'png'; // æ‹¼æ¥æ–‡ä»¶åï¼ŒåŠ å‰ç¼€æ˜¯ä¸ºäº†å¢åŠ è¾¨æåº¦ï¼Œå‰ç¼€å¯ä»¥æ˜¯ç›¸å…³æ•°æ®æ¨¡å‹çš„ ID // å€¼å¦‚ï¼š1_1493521050_7BVc9v9ujP.png $filename = $file_prefix . '_' . time() . '_' . str_random(10) . '.' . $extension; // å¦‚æœä¸Šä¼ çš„ä¸æ˜¯å›¾ç‰‡å°†ç»ˆæ­¢æ“ä½œ if ( ! in_array($extension, $this-&gt;allowed_ext)) { return false; } // å°†å›¾ç‰‡ç§»åŠ¨åˆ°æˆ‘ä»¬çš„ç›®æ ‡å­˜å‚¨è·¯å¾„ä¸­ $file-&gt;move($upload_path, $filename); // å¦‚æœé™åˆ¶äº†å›¾ç‰‡å®½åº¦ï¼Œå°±è¿›è¡Œè£å‰ª if ($max_width &amp;&amp; $extension != 'gif') { // æ­¤ç±»ä¸­å°è£…çš„å‡½æ•°ï¼Œç”¨äºè£å‰ªå›¾ç‰‡ $this-&gt;reduceSize($upload_path . '/' . $filename, $max_width); } return [ 'path' =&gt; config('app.url') . \"/$folder_name/$filename\" ]; } public function reduceSize($file_path, $max_width) { // å…ˆå®ä¾‹åŒ–ï¼Œä¼ å‚æ˜¯æ–‡ä»¶çš„ç£ç›˜ç‰©ç†è·¯å¾„ $image = Image::make($file_path); // è¿›è¡Œå¤§å°è°ƒæ•´çš„æ“ä½œ $image-&gt;resize($max_width, null, function ($constraint) { // è®¾å®šå®½åº¦æ˜¯ $max_widthï¼Œé«˜åº¦ç­‰æ¯”ä¾‹åŒæ–¹ç¼©æ”¾ $constraint-&gt;aspectRatio(); // é˜²æ­¢è£å›¾æ—¶å›¾ç‰‡å°ºå¯¸å˜å¤§ $constraint-&gt;upsize(); }); // å¯¹å›¾ç‰‡ä¿®æ”¹åè¿›è¡Œä¿å­˜ $image-&gt;save(); }} æ‹“å±•","link":"/2020/05/16/php/laravel/%E6%89%A9%E5%B1%95%E5%8C%85/%E9%A1%B9%E7%9B%AE%E5%9F%BA%E7%A1%80%E9%83%A8%E7%BD%B2/"},{"title":"é˜²æ­¢xssæ”»å‡»HTMLPurifier","text":"è®°å½•laravelåŸºç¡€çš„é…ç½®éƒ¨ç½² ä½œç”¨&amp;åŠŸèƒ½ä½¿ç”¨ Intervention/image æ‰©å±•åŒ…æ¥å¤„ç†å›¾ç‰‡è£åˆ‡çš„é€»è¾‘ å®‰è£…Composer å®‰è£…1composer require &quot;mews/purifier:~2.0&quot; é…ç½®ç”Ÿæˆé…ç½®æ–‡ä»¶ï¼Œå­˜æ”¾ä½ç½® config/debugbar.phpï¼š 1php artisan vendor:publish --provider=&quot;Mews\\Purifier\\PurifierServiceProvider&quot; è¯·å°†é…ç½®ä¿¡æ¯æ›¿æ¢ä¸ºä»¥ä¸‹: config/purifier.php 123456789101112131415161718&lt;?phpreturn [ 'encoding' =&gt; 'UTF-8', 'finalize' =&gt; true, 'cachePath' =&gt; storage_path('app/purifier'), 'cacheFileMode' =&gt; 0755, 'settings' =&gt; [ 'user_topic_body' =&gt; [ 'HTML.Doctype' =&gt; 'XHTML 1.0 Transitional', 'HTML.Allowed' =&gt; 'div,b,strong,i,em,a[href|title],ul,ol,ol[start],li,p[style],br,span[style],img[width|height|alt|src],*[style|class],pre,hr,code,h2,h3,h4,h5,h6,blockquote,del,table,thead,tbody,tr,th,td', 'CSS.AllowedProperties' =&gt; 'font,font-size,font-weight,font-style,margin,width,height,font-family,text-decoration,padding-left,color,background-color,text-align', 'AutoFormat.AutoParagraph' =&gt; true, 'AutoFormat.RemoveEmpty' =&gt; true, ], ],]; ä½¿ç”¨é…ç½®é‡Œçš„ user_topic_body æ˜¯æˆ‘ä»¬ä¸ºè¯é¢˜å†…å®¹å®šåˆ¶çš„ï¼Œé…åˆ clean() æ–¹æ³•ä½¿ç”¨ï¼š 1$topic-&gt;body = clean($topic-&gt;body, 'user_topic_body'); user_topic_bodyæ˜¯configé…ç½®é‡Œçš„ 123456789101112131415return [ 'encoding' =&gt; 'UTF-8', 'finalize' =&gt; true, 'cachePath' =&gt; storage_path('app/purifier'), 'cacheFileMode' =&gt; 0755, 'settings' =&gt; [ 'user_topic_body' =&gt; [ 'HTML.Doctype' =&gt; 'XHTML 1.0 Transitional', 'HTML.Allowed' =&gt; 'div,b,strong,i,em,a[href|title],ul,ol,ol[start],li,p[style],br,span[style],img[width|height|alt|src],*[style|class],pre,hr,code,h2,h3,h4,h5,h6,blockquote,del,table,thead,tbody,tr,th,td', 'CSS.AllowedProperties' =&gt; 'font,font-size,font-weight,font-style,margin,width,height,font-family,text-decoration,padding-left,color,background-color,text-align', 'AutoFormat.AutoParagraph' =&gt; true, 'AutoFormat.RemoveEmpty' =&gt; true, ], ],]; æ‹“å±•","link":"/2020/05/19/php/laravel/%E6%89%A9%E5%B1%95%E5%8C%85/%E9%98%B2%E6%AD%A2xss%E6%94%BB%E5%87%BBHTMLPurifier/"},{"title":"é˜Ÿåˆ—-predis","text":"é˜Ÿåˆ—å…è®¸ä½ å¼‚æ­¥æ‰§è¡Œæ¶ˆè€—æ—¶é—´çš„ä»»åŠ¡ï¼Œæ¯”å¦‚è¯·æ±‚ä¸€ä¸ª API å¹¶ç­‰å¾…è¿”å›çš„ç»“æœã€‚è¿™æ ·å¯ä»¥æœ‰æ•ˆçš„é™ä½è¯·æ±‚å“åº”çš„æ—¶é—´ã€‚ ä½œç”¨&amp;åŠŸèƒ½é˜Ÿåˆ—å…è®¸ä½ å¼‚æ­¥æ‰§è¡Œæ¶ˆè€—æ—¶é—´çš„ä»»åŠ¡ï¼Œæ¯”å¦‚è¯·æ±‚ä¸€ä¸ª API å¹¶ç­‰å¾…è¿”å›çš„ç»“æœã€‚è¿™æ ·å¯ä»¥æœ‰æ•ˆçš„é™ä½è¯·æ±‚å“åº”çš„æ—¶é—´ã€‚ å®‰è£…Composer å®‰è£…1composer require &quot;predis/predis:~1.0&quot; é…ç½® æ¥ä¸‹æ¥æˆ‘ä»¬è¿˜éœ€è¦ä¿®æ”¹ç¯å¢ƒå˜é‡ QUEUE_DRIVER çš„å€¼ä¸º redisï¼š .env 1QUEUE_DRIVER=redis ä½¿ç”¨æ‹“å±•æœ‰æ—¶å€™é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ä¼šå¤±è´¥ã€‚Laravel å†…ç½®äº†ä¸€ä¸ªæ–¹ä¾¿çš„æ–¹å¼æ¥æŒ‡å®šä»»åŠ¡é‡è¯•çš„æœ€å¤§æ¬¡æ•°ã€‚å½“ä»»åŠ¡è¶…å‡ºè¿™ä¸ªé‡è¯•æ¬¡æ•°åï¼Œå®ƒå°±ä¼šè¢«æ’å…¥åˆ° failed_jobs æ•°æ®è¡¨é‡Œé¢ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ queue:failed-table å‘½ä»¤æ¥åˆ›å»º failed_jobsè¡¨çš„è¿ç§»æ–‡ä»¶ï¼š 1php artisan queue:failed-table æ¥ç€ä½¿ç”¨ migrate Artisan å‘½ä»¤ç”Ÿæˆ failed_jobs è¡¨ï¼š 1php artisan migrate ç”Ÿæˆä»»åŠ¡ç±»ä½¿ç”¨ä»¥ä¸‹ Artisan å‘½ä»¤æ¥ç”Ÿæˆä¸€ä¸ªæ–°çš„é˜Ÿåˆ—ä»»åŠ¡ï¼š 1php artisan make:job TranslateSlug è¯¥å‘½ä»¤ä¼šåœ¨ app/Jobs ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ªæ–°çš„ç±»ï¼š 123456789101112131415161718192021222324252627282930313233343536app/Jobs/TranslateSlug.php&lt;?phpnamespace App\\Jobs;use Illuminate\\Bus\\Queueable;use Illuminate\\Queue\\SerializesModels;use Illuminate\\Queue\\InteractsWithQueue;use Illuminate\\Contracts\\Queue\\ShouldQueue;use Illuminate\\Foundation\\Bus\\Dispatchable;use App\\Models\\Topic;use App\\Handlers\\SlugTranslateHandler;class TranslateSlug implements ShouldQueue{ use Dispatchable, InteractsWithQueue, Queueable, SerializesModels; protected $topic; public function __construct(Topic $topic) { // é˜Ÿåˆ—ä»»åŠ¡æ„é€ å™¨ä¸­æ¥æ”¶äº† Eloquent æ¨¡å‹ï¼Œå°†ä¼šåªåºåˆ—åŒ–æ¨¡å‹çš„ ID $this-&gt;topic = $topic; } public function handle() { // è¯·æ±‚ç™¾åº¦ API æ¥å£è¿›è¡Œç¿»è¯‘ $slug = app(SlugTranslateHandler::class)-&gt;translate($this-&gt;topic-&gt;title); // ä¸ºäº†é¿å…æ¨¡å‹ç›‘æ§å™¨æ­»å¾ªç¯è°ƒç”¨ï¼Œæˆ‘ä»¬ä½¿ç”¨ DB ç±»ç›´æ¥å¯¹æ•°æ®åº“è¿›è¡Œæ“ä½œ \\DB::table('topics')-&gt;where('id', $this-&gt;topic-&gt;id)-&gt;update(['slug' =&gt; $slug]); }} è¯¥ç±»å®ç°äº† Illuminate\\Contracts\\Queue\\ShouldQueue æ¥å£ï¼Œè¯¥æ¥å£è¡¨æ˜ Laravel åº”è¯¥å°†è¯¥ä»»åŠ¡æ·»åŠ åˆ°åå°çš„ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œè€Œä¸æ˜¯åŒæ­¥æ‰§è¡Œã€‚ å¼•å…¥äº† SerializesModels traitï¼ŒEloquent æ¨¡å‹ä¼šè¢«ä¼˜é›…çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚é˜Ÿåˆ—ä»»åŠ¡æ„é€ å™¨ä¸­æ¥æ”¶äº† Eloquent æ¨¡å‹ï¼Œå°†ä¼šåªåºåˆ—åŒ–æ¨¡å‹çš„ IDã€‚è¿™æ ·å­åœ¨ä»»åŠ¡æ‰§è¡Œæ—¶ï¼Œé˜Ÿåˆ—ç³»ç»Ÿä¼šä»æ•°æ®åº“ä¸­è‡ªåŠ¨çš„æ ¹æ® ID æ£€ç´¢å‡ºæ¨¡å‹å®ä¾‹ã€‚è¿™æ ·å¯ä»¥é¿å…åºåˆ—åŒ–å®Œæ•´çš„æ¨¡å‹å¯èƒ½åœ¨é˜Ÿåˆ—ä¸­å‡ºç°çš„é—®é¢˜ã€‚ handle æ–¹æ³•ä¼šåœ¨é˜Ÿåˆ—ä»»åŠ¡æ‰§è¡Œæ—¶è¢«è°ƒç”¨ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä»»åŠ¡çš„ handle æ–¹æ³•ä¸­å¯ä»¥ä½¿ç”¨ç±»å‹æç¤ºæ¥è¿›è¡Œä¾èµ–çš„æ³¨å…¥ã€‚Laravel çš„æœåŠ¡å®¹å™¨ä¼šè‡ªåŠ¨çš„å°†è¿™äº›ä¾èµ–æ³¨å…¥è¿›å»ï¼Œä¸æ§åˆ¶å™¨æ–¹æ³•ç±»ä¼¼ã€‚ è¿˜æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œæˆ‘ä»¬å°†ä¼šåœ¨æ¨¡å‹ç›‘æ§å™¨ä¸­åˆ†å‘ä»»åŠ¡ï¼Œä»»åŠ¡ä¸­è¦é¿å…ä½¿ç”¨ Eloquent æ¨¡å‹æ¥å£è°ƒç”¨ï¼Œå¦‚ï¼šcreate(), update(), save() ç­‰æ“ä½œã€‚å¦åˆ™ä¼šé™·å…¥è°ƒç”¨æ­»å¾ªç¯ â€”â€” æ¨¡å‹ç›‘æ§å™¨åˆ†å‘ä»»åŠ¡ï¼Œä»»åŠ¡è§¦å‘æ¨¡å‹ç›‘æ§å™¨ï¼Œæ¨¡å‹ç›‘æ§å™¨å†æ¬¡åˆ†å‘ä»»åŠ¡ï¼Œä»»åŠ¡å†æ¬¡è§¦å‘æ¨¡å‹ç›‘æ§å™¨â€¦. æ­»å¾ªç¯ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½¿ç”¨ DB ç±»ç›´æ¥å¯¹æ•°æ®åº“è¿›è¡Œæ“ä½œå³å¯ã€‚ ä»»åŠ¡åˆ†å‘æ¥ä¸‹æ¥æˆ‘ä»¬è¦ä¿®æ”¹ Topic æ¨¡å‹ç›‘æ§å™¨ï¼Œå°† Slug ç¿»è¯‘çš„è°ƒç”¨ä¿®æ”¹ä¸ºé˜Ÿåˆ—æ‰§è¡Œçš„æ–¹å¼ï¼š 123456789101112131415161718192021222324252627282930app/Observers/TopicObserver.php&lt;?phpnamespace App\\Observers;use App\\Models\\Topic;use App\\Jobs\\TranslateSlug;// creating, created, updating, updated, saving,// saved, deleting, deleted, restoring, restoredclass TopicObserver{ public function saving(Topic $topic) { // XSS è¿‡æ»¤ $topic-&gt;body = clean($topic-&gt;body, 'user_topic_body'); // ç”Ÿæˆè¯é¢˜æ‘˜å½• $topic-&gt;excerpt = make_excerpt($topic-&gt;body); // å¦‚ slug å­—æ®µæ— å†…å®¹ï¼Œå³ä½¿ç”¨ç¿»è¯‘å™¨å¯¹ title è¿›è¡Œç¿»è¯‘ if ( ! $topic-&gt;slug) { // æ¨é€ä»»åŠ¡åˆ°é˜Ÿåˆ— dispatch(new TranslateSlug($topic)); } }} å¼€å§‹æµ‹è¯•å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦åœ¨å‘½ä»¤è¡Œå¯åŠ¨é˜Ÿåˆ—ç³»ç»Ÿï¼Œé˜Ÿåˆ—åœ¨å¯åŠ¨å®Œæˆåä¼šè¿›å…¥ç›‘å¬çŠ¶æ€ï¼š 1php artisan queue:listen","link":"/2020/05/20/php/laravel/%E6%89%A9%E5%B1%95%E5%8C%85/%E9%98%9F%E5%88%97-predis/"},{"title":"é˜Ÿåˆ—ç›‘æ§å™¨-Horizon","text":"Horizon æ˜¯ Laravel ç”Ÿæ€åœˆé‡Œçš„ä¸€å‘˜ï¼Œä¸º Laravel Redis é˜Ÿåˆ—æä¾›äº†ä¸€ä¸ªæ¼‚äº®çš„ä»ªè¡¨æ¿ï¼Œå…è®¸æˆ‘ä»¬å¾ˆæ–¹ä¾¿åœ°æŸ¥çœ‹å’Œç®¡ç† Redis é˜Ÿåˆ—ä»»åŠ¡æ‰§è¡Œçš„æƒ…å†µã€‚ ä½œç”¨&amp;åŠŸèƒ½Horizon æ˜¯ Laravel ç”Ÿæ€åœˆé‡Œçš„ä¸€å‘˜ï¼Œä¸º Laravel Redis é˜Ÿåˆ—æä¾›äº†ä¸€ä¸ªæ¼‚äº®çš„ä»ªè¡¨æ¿ï¼Œå…è®¸æˆ‘ä»¬å¾ˆæ–¹ä¾¿åœ°æŸ¥çœ‹å’Œç®¡ç† Redis é˜Ÿåˆ—ä»»åŠ¡æ‰§è¡Œçš„æƒ…å†µã€‚ å®‰è£…Composer å®‰è£…1composer require &quot;laravel/horizon:~1.0&quot; é…ç½®å®‰è£…å®Œæˆåï¼Œä½¿ç”¨ vendor:publish Artisan å‘½ä»¤å‘å¸ƒç›¸å…³æ–‡ä»¶ï¼š 1php artisan vendor:publish --provider=&quot;Laravel\\Horizon\\HorizonServiceProvider&quot; ä½¿ç”¨Horizon æ˜¯ä¸€ä¸ªç›‘æ§ç¨‹åºï¼Œéœ€è¦å¸¸é©»è¿è¡Œï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤å¯åŠ¨ï¼š 1php artisan horizon å®‰è£…äº† Horizon ä»¥åï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ horizon å‘½ä»¤æ¥å¯åŠ¨é˜Ÿåˆ—ç³»ç»Ÿå’Œä»»åŠ¡ç›‘æ§ï¼Œæ— éœ€ä½¿ç”¨ queue:listenã€‚ çº¿ä¸Šéƒ¨ç½²é¡»çŸ¥åœ¨å¼€å‘ç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬ä¸ºäº†æµ‹è¯•æ–¹ä¾¿ï¼Œç›´æ¥åœ¨å‘½ä»¤è¡Œé‡Œè°ƒç”¨ artisan horizon è¿›è¡Œé˜Ÿåˆ—ç›‘æ§ã€‚ç„¶è€Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬éœ€è¦é…ç½®ä¸€ä¸ªè¿›ç¨‹ç®¡ç†å·¥å…·æ¥ç›‘æ§ artisan horizon å‘½ä»¤çš„æ‰§è¡Œï¼Œä»¥ä¾¿åœ¨å…¶æ„å¤–é€€å‡ºæ—¶è‡ªåŠ¨é‡å¯ã€‚å½“æœåŠ¡å™¨éƒ¨ç½²æ–°ä»£ç æ—¶ï¼Œéœ€è¦ç»ˆæ­¢å½“å‰ Horizon ä¸»è¿›ç¨‹ï¼Œç„¶åé€šè¿‡è¿›ç¨‹ç®¡ç†å·¥å…·æ¥é‡å¯ï¼Œä»è€Œä½¿ç”¨æœ€æ–°çš„ä»£ç ã€‚ ç®€è€Œè¨€ä¹‹ï¼Œç”Ÿäº§ç¯å¢ƒä¸‹ä½¿ç”¨é˜Ÿåˆ—éœ€è¦æ³¨æ„ä»¥ä¸‹ä¸¤ä¸ªé—®é¢˜ï¼š ä½¿ç”¨ Supervisor è¿›ç¨‹å·¥å…·è¿›è¡Œç®¡ç†ï¼Œé…ç½®å’Œä½¿ç”¨è¯·å‚ç…§ æ–‡æ¡£ è¿›è¡Œé…ç½®ï¼›æ¯ä¸€æ¬¡éƒ¨ç½²ä»£ç æ—¶ï¼Œéœ€ artisan horizon:terminate ç„¶åå† artisan horizon é‡æ–°åŠ è½½ä»£ç ã€‚çº¿ä¸Šéƒ¨ç½²çš„è¯ï¼Œè¿˜è¦æ³¨æ„ä¸€ä¸ªæƒé™æ§åˆ¶çš„é—®é¢˜ï¼Œæˆ‘ä»¬å°†åœ¨åé¢ç« èŠ‚ä¸­è®²åˆ°ã€‚ æ‹“å±•","link":"/2020/05/20/php/laravel/%E6%89%A9%E5%B1%95%E5%8C%85/%E9%98%9F%E5%88%97%E7%9B%91%E6%8E%A7%E5%99%A8-Horizon/"},{"title":"Jwt-Authå®ç°APIç”¨æˆ·è®¤è¯ã€åˆ·æ–°ä»¤ç‰Œ","text":"æ¦‚è¿°ï¼šJWTï¼š JWTï¼ˆJSON Web Tokenï¼‰æ˜¯ä¸€ä¸ªéå¸¸è½»å·§çš„è§„èŒƒã€‚è¿™ä¸ªè§„èŒƒå…è®¸æˆ‘ä»¬ä½¿ç”¨JWTåœ¨ç”¨æˆ·å’ŒæœåŠ¡å™¨ä¹‹é—´ä¼ é€’å®‰å…¨å¯é çš„ä¿¡æ¯ã€‚ä¸€ä¸ªJWTå®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå®ƒç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼Œå¤´éƒ¨ã€è½½è·ä¸ç­¾åã€‚æ›´è¯¦ç»†è®²è§£åœ°å€ï¼šhttps://laravelacademy.org/post/3640.html åº”ç”¨åœºæ™¯ï¼šå‰åç«¯åˆ†ç¦»çš„é¡¹ç›®åŸç†ï¼šhttpåè®®æ˜¯æ— çŠ¶æ€çš„ï¼Œå½“é¡¹ç›®éœ€è¦ç”¨æˆ·ä¿å­˜åœ¨çº¿æ—¶å°±éœ€è¦ä¸€ç§ä»‹è´¨æ¥ä¿æŒ ä½¿ç”¨è‡ªå®šä¹‰è®¤è¯ä¸­é—´ä»¶å®ç°æ•ˆæœï¼šæä¾›è´¦å·å¯†ç å‰æ¥ç™»å½•ã€‚å¦‚æœç™»å½•æˆåŠŸï¼Œé‚£ä¹ˆæˆ‘ä¼šç»™å‰ç«¯é¢å‘ä¸€ä¸ª access_token ï¼Œè®¾ç½®åœ¨ header ä¸­ä»¥è¯·æ±‚éœ€è¦ç”¨æˆ·è®¤è¯çš„è·¯ç”±ã€‚å¦‚æœç”¨æˆ·çš„ä»¤ç‰Œå¦‚æœè¿‡æœŸäº†ï¼Œå¯ä»¥æš‚æ—¶é€šè¿‡æ­¤æ¬¡è¯·æ±‚ï¼Œå¹¶åœ¨æ­¤æ¬¡è¯·æ±‚ä¸­åˆ·æ–°è¯¥ç”¨æˆ·çš„ access_tokenï¼Œæœ€ååœ¨å“åº”å¤´ä¸­å°†æ–°çš„ access_token è¿”å›ç»™å‰ç«¯ï¼Œè¿™æ ·å­å¯ä»¥æ— ç—›çš„åˆ·æ–° access_tokenï¼Œç”¨æˆ·å¯ä»¥è·å¾—ä¸€ä¸ªå¾ˆè‰¯å¥½çš„ä½“éªŒï¼Œæ‰€ä»¥å¼€å§‹åŠ¨æ‰‹å†™ä»£ç ã€‚ æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ä»¥æ–°å»ºä¸€ä¸ªä¸­é—´ä»¶ï¼š 1php artisan make:middleware RefreshToken ä¸­é—´ä»¶app\\Http\\Middleware\\RefreshToken.phpä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849&lt;?phpnamespace App\\Http\\Middleware;use Auth;use Closure;use Tymon\\JWTAuth\\Exceptions\\JWTException;use Tymon\\JWTAuth\\Http\\Middleware\\BaseMiddleware;use Tymon\\JWTAuth\\Exceptions\\TokenExpiredException;use Symfony\\Component\\HttpKernel\\Exception\\UnauthorizedHttpException;// æ³¨æ„ï¼Œæˆ‘ä»¬è¦ç»§æ‰¿çš„æ˜¯ jwt çš„ BaseMiddlewareclass RefreshToken extends BaseMiddleware{ /** * @param $request * @param Closure $next * @return \\Illuminate\\Http\\JsonResponse|\\Illuminate\\Http\\Response|mixed * @throws JWTException */ public function handle($request, Closure $next) { // æ£€æŸ¥æ­¤æ¬¡è¯·æ±‚ä¸­æ˜¯å¦å¸¦æœ‰ tokenï¼Œå¦‚æœæ²¡æœ‰åˆ™æŠ›å‡ºå¼‚å¸¸ã€‚ $this-&gt;checkForToken($request); // ä½¿ç”¨ try åŒ…è£¹ï¼Œä»¥æ•æ‰ token è¿‡æœŸæ‰€æŠ›å‡ºçš„ TokenExpiredException å¼‚å¸¸ try { // æ£€æµ‹ç”¨æˆ·çš„ç™»å½•çŠ¶æ€ï¼Œå¦‚æœæ­£å¸¸åˆ™é€šè¿‡ if ($this-&gt;auth-&gt;parseToken()-&gt;authenticate()) { return $next($request); } throw new UnauthorizedHttpException('jwt-auth', 'æœªç™»å½•'); } catch (TokenExpiredException $exception) { // æ­¤å¤„æ•è·åˆ°äº† token è¿‡æœŸæ‰€æŠ›å‡ºçš„ TokenExpiredException å¼‚å¸¸ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œéœ€è¦åšçš„æ˜¯åˆ·æ–°è¯¥ç”¨æˆ·çš„ token å¹¶å°†å®ƒæ·»åŠ åˆ°å“åº”å¤´ä¸­ try { // åˆ·æ–°ç”¨æˆ·çš„ token $token = $this-&gt;auth-&gt;refresh(); // ä½¿ç”¨ä¸€æ¬¡æ€§ç™»å½•ä»¥ä¿è¯æ­¤æ¬¡è¯·æ±‚çš„æˆåŠŸ Auth::guard('api')-&gt;onceUsingId($this-&gt;auth-&gt;manager()-&gt;getPayloadFactory()-&gt;buildClaimsCollection()-&gt;toPlainArray()['sub']); } catch (JWTException $exception) { // å¦‚æœæ•è·åˆ°æ­¤å¼‚å¸¸ï¼Œå³ä»£è¡¨ refresh ä¹Ÿè¿‡æœŸäº†ï¼Œç”¨æˆ·æ— æ³•åˆ·æ–°ä»¤ç‰Œï¼Œéœ€è¦é‡æ–°ç™»å½•ã€‚ throw new UnauthorizedHttpException('jwt-auth', $exception-&gt;getMessage()); } } // åœ¨å“åº”å¤´ä¸­è¿”å›æ–°çš„ token return $this-&gt;setAuthenticationHeader($next($request), $token); }} ç„¶åæˆ‘ä»¬æ³¨å†Œä¸€ä¸‹ä¸­é—´ä»¶ï¼Œæ–‡ä»¶ä½ç½®app\\Http\\Kernel.phpåœ¨è·¯ç”±å¤„ä¼šä½¿ç”¨ 123protected $routeMiddleware = [ 'refresh' =&gt; \\App\\Http\\Middleware\\RefreshToken::class,] æ›´æ–°å¼‚å¸¸å¤„ç†çš„ Handler ç”±äºæˆ‘ä»¬æ„å»ºçš„æ˜¯ api æœåŠ¡ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æ›´æ–°ä¸€ä¸‹ app/Exceptions/Handler.php ä¸­çš„ renderæ–¹æ³•ï¼Œè‡ªå®šä¹‰å¤„ç†ä¸€äº›å¼‚å¸¸ã€‚ 12345678910111213141516171819202122232425262728293031323334&lt;?phpnamespace App\\Exceptions;use Exception;use Illuminate\\Foundation\\Exceptions\\Handler as ExceptionHandler;use Illuminate\\Validation\\ValidationException;use Symfony\\Component\\HttpKernel\\Exception\\UnauthorizedHttpException;class Handler extends ExceptionHandler{ ... /** * Render an exception into an HTTP response. * * @param \\Illuminate\\Http\\Request $request * @param \\Exception $exception * @return \\Illuminate\\Http\\Response */ public function render($request, Exception $exception) { // å‚æ•°éªŒè¯é”™è¯¯çš„å¼‚å¸¸ï¼Œæˆ‘ä»¬éœ€è¦è¿”å› 400 çš„ http code å’Œä¸€å¥é”™è¯¯ä¿¡æ¯ if ($exception instanceof ValidationException) { return response(['error' =&gt; array_first(array_collapse($exception-&gt;errors()))], 400); } // ç”¨æˆ·è®¤è¯çš„å¼‚å¸¸ï¼Œæˆ‘ä»¬éœ€è¦è¿”å› 401 çš„ http code å’Œé”™è¯¯ä¿¡æ¯ if ($exception instanceof UnauthorizedHttpException) { return response($exception-&gt;getMessage(), 401); } return parent::render($request, $exception); }}","link":"/2020/05/05/php/laravel/%E6%9D%83%E9%99%90/%E4%BD%BF%E7%94%A8%20Jwt-Auth%20%E5%AE%9E%E7%8E%B0%20API%20%E7%94%A8%E6%88%B7%E8%AE%A4%E8%AF%81%E3%80%81%E5%88%B7%E6%96%B0%E4%BB%A4%E7%89%8C/"},{"title":"æƒé™éªŒè¯æ–¹æ³•é›†åˆ","text":"æƒé™éªŒè¯æ–¹æ³•é›†åˆ ä¸­é—´ä»¶Middlewareç­–ç•¥Policy","link":"/2020/05/17/php/laravel/%E6%9D%83%E9%99%90/%E6%9D%83%E9%99%90%E9%AA%8C%E8%AF%81%E7%9A%84%E6%96%B9%E6%B3%95%E9%9B%86%E5%90%88/"},{"title":"è´­ç‰©è½¦å®ç°æµç¨‹","text":"è´­ç‰©è½¦å®ç°æµç¨‹ è´­ç‰©è½¦æµç¨‹ åˆ¤æ–­ç”¨æˆ·æ˜¯å¦ç™»å½• å°ç¨‹åºåˆå§‹çš„æ—¶å€™è¯·æ±‚è·å–è´­ç‰©è½¦å•†å“æ¥å£å¹¶ä¿å­˜æ•°æ®åˆ°æœ¬åœ°ç¼“å­˜localstorage æ·»åŠ å•†å“åˆ°è´­ç‰©è½¦ï¼Œæ›´æ–°æœ¬åœ°ç¼“å­˜çš„æ•°æ®ï¼Œå®æ—¶æäº¤åˆ°æ•°æ®åº“ æ‰“å¼€è´­ç‰©è½¦é¡µé¢æäº¤è´­ç‰©è½¦å•†å“æœ¬åœ°ç¼“å­˜åˆ°æœåŠ¡å™¨ï¼Œåˆ¤æ–­æ˜¯å¦éœ€è¦æ›´æ–°æ•°æ®åº“æ•°æ® è´­ç‰©è½¦é¡µé¢ä¿®æ”¹å•†å“ä¿¡æ¯ï¼Œ åˆ¤æ–­ç”¨æˆ·æ˜¯å¦ç™»å½•åŠ è½½è´­ç‰©è½¦å•†å“ä¿¡æ¯åˆ°æœ¬åœ°ç¼“å­˜æ·»åŠ å•†å“åˆ°è´­ç‰©è½¦è´­ç‰©è½¦é¡µé¢æ›´æ”¹å•†å“ä¿¡æ¯æ€»ç»“","link":"/2020/05/24/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80/%E5%AE%9E%E4%BE%8B/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%95%86%E5%9F%8E/%E8%B4%AD%E7%89%A9%E8%BD%A6%E6%B5%81%E7%A8%8B/"},{"title":"æ­£åˆ™","text":"\\1 \\2 \\3åŒ¹é…è¿™ç§å†™æ³•éœ€è¦æ­é…æ‹¬å·()! \\1 æ˜¯åœ¨å½“å‰ä½ç½®é‡å¤åŒ¹é…ç¬¬ä¸€ä¸ªæ‹¬å·()é‡Œçš„è¡¨è¾¾å¼çš„å€¼ï¼Œ\\2 \\3ä»¥æ­¤ç±»æ¨ï¼ï¼ï¼ 123var str = 'a1a123';str.match(/(\\w)(.)\\1/g); // [\"a1a\"]str.match(/(\\w)(.)\\1\\2/g); // [\"a1a1\"] åº”ç”¨åœºæ™¯ å¯ä»¥ç”¨æ¥åŒ¹é…é‡å¤çš„å­—ç¬¦ä¸²","link":"/2020/06/02/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80/es6/%E6%AD%A3%E5%88%99/%E6%AD%A3%E5%88%99/"},{"title":"es6çŸ¥è¯†ç‚¹","text":"å­—ç¬¦ä¸² anchoråˆ›å»ºä¸€ä¸ªé”šç‚¹ 12345var txt=\"Hello Garmin!\"document.write(txt.anchor(\"garmin\"))// html// &lt;a name=\"garmin\"&gt;Hello Garmin!&lt;/a&gt; ä¸Šé¢åˆ›å»ºäº†ä¸€ä¸ªåç§°ä¸º garmin çš„é”šç‚¹ big123var txt=\"Hello Garmin!\"txt.big();// \"&lt;big&gt;Hello Garmin!&lt;/big&gt;\" blink123var txt=\"Hello Garmin!\"txt.big();// \"&lt;blink&gt;Hello Garmin!&lt;/blink&gt;\" bold123var txt=\"Hello Garmin!\"txt.blod();// \"&lt;b&gt;garmin&lt;/b&gt;\" fixed1234var txt=\"Hello Garmin!\";txt.fixed() // \"&lt;tt&gt;Hello Garmin!&lt;/tt&gt;\" fontcolor1234var txt=\"Hello Garmin!\";txt.fontcolor('red') \"&lt;font color='red'&gt;Hello Garmin!&lt;/font&gt;\" fontsize1234var txt=\"Hello Garmin!\";txt.fontsize(20) \"&lt;font size='20'&gt;Hello Garmin!&lt;/font&gt;\" italics123var txt=\"Hello Garmin!\";txt.italics() \"&lt;i&gt;Hello Garmin!&lt;/i&gt;\" link123var txt=\"Hello Garmin!\";txt.link('baidu.com') \"&lt;a href='baidu.com'&gt;Hello Garmin!&lt;/a&gt;\" ä»¥ä¸Šçš„æ–¹æ³•å¥½é¸¡è‚‹å•Šï¼ï¼ï¼ charAtæ ¹æ®æŒ‡å®šä½ç½®ï¼ˆpositionï¼‰æŸ¥æ‰¾å­—ç¬¦ï¼Œè¿”å›å€¼ä¸ºå½“å‰æŒ‡å®šä½ç½®çš„å­—ç¬¦ 1234var txt=\"Hello Garmin!\";txt.charAt(6);\"G\" charCodeAt / codePointAtæ–¹æ³•å¯è¿”å›æŒ‡å®šä½ç½®çš„å­—ç¬¦çš„ Unicode ç¼–ç  1234var txt=\"Hello Garmin!\";txt.charCodeAt(0);\"72\" concatå­—ç¬¦ä¸²è¿æ¥ 123var txt=\"Hello Garmin!\";txt.concat(' my name is bobo');// Hello Garmin! my name is bobo å’Œè¿æ¥ç¬¦+æœ‰å·®å¼‚ï¼Ÿ constructoræ„é€ æ–¹æ³• 1234var txt=\"Hello Garmin!\";txt.constructor === Stringtrue å¯ä»¥ç”¨æ¥åˆ¤æ–­å˜é‡çš„ç±»å‹ è¿˜ä¸é”™ï¼ endsWith / startsWithendsWith åˆ¤æ–­ç»“æŸå­—ç¬¦ï¼Œå‚æ•°åŒ¹é…å­—ç¬¦ï¼Œæ”¾å›å¸ƒå°”å€¼ã€‚ startsWith ç›¸å 1234var txt=\"Hello Garmin!\";txt.endsWith('!') // truetxt.endsWith('?') // false includesæŸ¥æ‰¾æŒ‡å®šå­—ç¬¦ä¸²æ˜¯å¦å­˜åœ¨è¯¥å­—ç¬¦ä¸²searchvalueï¼š å¿…éœ€ï¼Œè¦æŸ¥æ‰¾çš„å­—ç¬¦ä¸²ã€‚startï¼šå¯é€‰ï¼Œè®¾ç½®ä»å“ªä¸ªä½ç½®å¼€å§‹æŸ¥æ‰¾ï¼Œé»˜è®¤ä¸º 0ã€‚è¿”å›å¸ƒå°”å‹ 123var txt=\"Hello Garmin!\";txt.includes('Garmin') // truetxt.includes('Garmin', 7) // false indexOf / lastIndexOfæŸ¥æ‰¾å­—ç¬¦å‡ºç°çš„ä½ç½®searchvalue:å¿…éœ€ã€‚è§„å®šéœ€æ£€ç´¢çš„å­—ç¬¦ä¸²å€¼ã€‚fromindex: å¯é€‰ï¼Œè®¾ç½®ä»å“ªä¸ªä½ç½®å¼€å§‹æŸ¥æ‰¾ï¼Œé»˜è®¤ä¸º 0ã€‚ 123var txt=\"Hello Garmin!\";txt.indexOf('G') // 6txt.indexOf('G', 7) // -1 lengthæ— éœ€å¤šè¨€ è¿”å›å­—ç¬¦ä¸²é•¿åº¦ localeCompare1234var txt=\"Hello Garmin!\";txt.localeCompare('Hello Garmin!') // 0txt.indexOf('xyz') // -1txt.indexOf('abc') // 1 0 : å­—ç¬¦ä¸²åŒ¹é…100% 1 : ä¸åŒ¹é…ï¼Œå‚æ•°å€¼æ¥è‡ªäºè¯­è¨€ç¯å¢ƒçš„æ’åºé¡ºåºå­—ç¬¦ä¸²å¯¹è±¡çš„å€¼ä¹‹å‰ -1 : ä¸åŒ¹é…ï¼Œå‚æ•°å€¼æ¥è‡ªäºè¯­è¨€ç¯å¢ƒçš„æ’åºé¡ºåºå­—ç¬¦ä¸²å¯¹è±¡çš„å€¼ä¹‹å matchæŸ¥æ‰¾å­—ç¬¦searchvalue å¿…éœ€ã€‚è§„å®šè¦æ£€ç´¢çš„å­—ç¬¦ä¸²å€¼ã€‚è¿”å›å­—ç¬¦ä½ç½®æˆ–è€… regexp å¿…éœ€ã€‚è§„å®šè¦åŒ¹é…çš„æ¨¡å¼çš„ RegExp å¯¹è±¡ã€‚å¦‚æœè¯¥å‚æ•°ä¸æ˜¯ RegExp å¯¹è±¡ï¼Œåˆ™éœ€è¦é¦–å…ˆæŠŠå®ƒä¼ é€’ç»™ RegExp æ„é€ å‡½æ•°ï¼Œå°†å…¶è½¬æ¢ä¸º RegExp å¯¹è±¡ã€‚ 123var txt=\"Hello Garmin!\";txt.match('n') // 11txt.match(/\\w/g) // [\"H\", \"e\", \"l\", \"l\", \"o\", \"G\", \"a\", \"r\", \"m\", \"i\", \"n\"] normalize12let txt = \"\\u4F60\\u597D \\u4F73\\u660E\\uFF01\";console.log(txt.normalize('NFC')) // ä½ å¥½ä½³æ˜ padEnd / padStartå¡«å……å­—ç¬¦åˆ°æŒ‡å®šé•¿åº¦, padEndåé¢è¿½åŠ ï¼ŒpadStart`ç›¸å 123let txt = \"Hello Garmin!\";console.log(txt.padEnd(20, '&amp;&amp;--'))//Hello Garmin!&amp;&amp;--&amp;&amp;-","link":"/2020/05/13/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80/es6/%E5%AD%97%E7%AC%A6%E4%B8%B2/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%96%B9%E6%B3%95%E8%A7%A3%E6%9E%90/"},{"title":"ä¸Šä¼ base64æŠ¥é”™é—®é¢˜","text":"ä¸Šä¼ base64æŠ¥é”™é—®é¢˜,base64æ ¼å¼çš„å­—ç¬¦éå¸¸è†¨å¤§ï¼Œä¸èƒ½ä½¿ç”¨paramsäº†ï¼Œè¦ä½¿ç”¨data æŠ¥é”™ æäº¤ç”¨data ä¸èƒ½ä½¿ç”¨paramsäº†ï¼","link":"/2020/06/18/%E5%89%8D%E7%AB%AF%E9%97%AE%E9%A2%98/%E8%AF%B7%E6%B1%82/%E4%B8%8A%E4%BC%A0base64%E6%8A%A5%E9%94%99%E9%97%AE%E9%A2%98/"}],"tags":[{"name":"jQuery","slug":"jQuery","link":"/tags/jQuery/"},{"name":"è¡¨æ ¼","slug":"è¡¨æ ¼","link":"/tags/%E8%A1%A8%E6%A0%BC/"},{"name":"è¡¨å•éªŒè¯","slug":"è¡¨å•éªŒè¯","link":"/tags/%E8%A1%A8%E5%8D%95%E9%AA%8C%E8%AF%81/"},{"name":"jsé¢˜ç›®","slug":"jsé¢˜ç›®","link":"/tags/js%E9%A2%98%E7%9B%AE/"},{"name":"php","slug":"php","link":"/tags/php/"},{"name":"plan","slug":"plan","link":"/tags/plan/"},{"name":"es6","slug":"es6","link":"/tags/es6/"},{"name":"js","slug":"js","link":"/tags/js/"},{"name":"const","slug":"const","link":"/tags/const/"},{"name":"vue","slug":"vue","link":"/tags/vue/"},{"name":"mixins","slug":"mixins","link":"/tags/mixins/"},{"name":"äº‹ä»¶","slug":"äº‹ä»¶","link":"/tags/%E4%BA%8B%E4%BB%B6/"},{"name":"æ’ä»¶","slug":"æ’ä»¶","link":"/tags/%E6%8F%92%E4%BB%B6/"},{"name":"vuex","slug":"vuex","link":"/tags/vuex/"},{"name":"çŠ¶æ€ç®¡ç†","slug":"çŠ¶æ€ç®¡ç†","link":"/tags/%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86/"},{"name":"ç™»å½•","slug":"ç™»å½•","link":"/tags/%E7%99%BB%E5%BD%95/"},{"name":"å°ç¨‹åº","slug":"å°ç¨‹åº","link":"/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/"},{"name":"this","slug":"this","link":"/tags/this/"},{"name":"let","slug":"let","link":"/tags/let/"},{"name":"éå†","slug":"éå†","link":"/tags/%E9%81%8D%E5%8E%86/"},{"name":"å­—ç¬¦ä¸²","slug":"å­—ç¬¦ä¸²","link":"/tags/%E5%AD%97%E7%AC%A6%E4%B8%B2/"},{"name":"laravelæ‰©å±•åŒ…","slug":"laravelæ‰©å±•åŒ…","link":"/tags/laravel%E6%89%A9%E5%B1%95%E5%8C%85/"},{"name":"auth","slug":"auth","link":"/tags/auth/"},{"name":"jwt","slug":"jwt","link":"/tags/jwt/"},{"name":"æ­£åˆ™","slug":"æ­£åˆ™","link":"/tags/%E6%AD%A3%E5%88%99/"}],"categories":[{"name":"webå‰ç«¯","slug":"webå‰ç«¯","link":"/categories/web%E5%89%8D%E7%AB%AF/"},{"name":"js","slug":"js","link":"/categories/js/"},{"name":"php","slug":"php","link":"/categories/php/"},{"name":"articles","slug":"articles","link":"/categories/articles/"},{"name":"laravel","slug":"php/laravel","link":"/categories/php/laravel/"},{"name":"vue","slug":"vue","link":"/categories/vue/"},{"name":"å°ç¨‹åº","slug":"å°ç¨‹åº","link":"/categories/%E5%B0%8F%E7%A8%8B%E5%BA%8F/"},{"name":"es6","slug":"es6","link":"/categories/es6/"},{"name":"web","slug":"web","link":"/categories/web/"},{"name":"auth","slug":"php/laravel/auth","link":"/categories/php/laravel/auth/"}]}